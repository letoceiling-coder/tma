@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* WOW Рулетка Design System */
    --background: 25 90% 71%;
    --foreground: 0 0% 100%;

    --surface: 0 0% 100%;
    --surface-2: 25 85% 75%;

    --card: 0 0% 100%;
    --card-foreground: 25 50% 30%;

    --popover: 0 0% 100%;
    --popover-foreground: 25 50% 30%;

    --primary: 12 72% 65%;
    --primary-foreground: 0 0% 100%;

    --secondary: 30 78% 68%;
    --secondary-foreground: 0 0% 100%;

    --accent: 40 70% 70%;
    --accent-foreground: 25 50% 30%;

    --wheel-light: 25 60% 87%;
    --wheel-dark: 18 55% 72%;

    --muted: 0 0% 73%;
    --muted-foreground: 0 0% 100%;

    --destructive: 0 70% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 12 70% 67%;
    --input: 0 0% 100%;
    --ring: 12 72% 65%;

    --radius: 10px;

    /* Gradient definitions */
    --gradient-background: linear-gradient(180deg, #F8A575 0%, #FDB083 100%);
    --gradient-button: linear-gradient(8.92deg, #E77D65 23.82%, #EFB66C 192.33%);
    
    /* Shadow effects - lighter for performance */
    --shadow-button: 0px 4px 4px rgba(255, 212, 137, 0.25);
    --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.1);
    
    /* Fast transitions */
    --transition-fast: 150ms ease-out;
    --transition-smooth: 200ms cubic-bezier(0.22, 1, 0.36, 1);
    
    /* Telegram viewport */
    --tg-viewport-height: 100vh;
  }
}

@layer base {
  * {
    @apply border-border;
    box-sizing: border-box;
  }

  html {
    height: 100%;
    height: var(--tg-viewport-height, 100vh);
    overflow: hidden;
    /* Prevent pull-to-refresh */
    overscroll-behavior-y: contain;
  }

  body {
    @apply bg-background text-foreground;
    /* System fonts for fastest rendering */
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    line-height: 1.3;
    letter-spacing: -0.01em;
    margin: 0;
    padding: 0;
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
    height: var(--tg-viewport-height, 100vh);
    /* Telegram WebApp safe areas */
    padding-top: env(safe-area-inset-top, 0);
    padding-bottom: env(safe-area-inset-bottom, 0);
    padding-left: env(safe-area-inset-left, 0);
    padding-right: env(safe-area-inset-right, 0);
    /* Smooth font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeSpeed;
  }

  #root {
    width: 100%;
    height: 100%;
    height: var(--tg-viewport-height, 100vh);
    overflow: hidden;
    position: relative;
  }

  /* Optimize images for performance */
  img {
    content-visibility: auto;
    /* Removed contain to prevent layout issues */
  }

  /* GPU acceleration for wheel - critical for smooth animation */
  .wheel-rotatable {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

@layer utilities {
  .glass-card {
    @apply bg-white/90 backdrop-blur-sm border-0 rounded-2xl;
    box-shadow: var(--shadow-soft);
  }

  .soft-shadow {
    box-shadow: var(--shadow-soft);
  }

  .gradient-background {
    background: var(--gradient-background);
  }

  .transition-fast {
    transition: all var(--transition-fast);
  }

  .transition-smooth {
    transition: all var(--transition-smooth);
  }

  /* Optimized fade-in - shorter duration for snappier feel */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.25s ease-out forwards;
  }

  /* Scale-in animation */
  @keyframes scale-in {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-scale-in {
    animation: scale-in 0.2s ease-out forwards;
  }

  /* Smooth tap feedback */
  .smooth-tap {
    transition: transform var(--transition-fast);
  }

  .smooth-tap:active {
    transform: scale(0.97);
  }

  /* Safe area utilities */
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .safe-top {
    padding-top: env(safe-area-inset-top, 0);
  }
}

/* Telegram WebView specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS specific */
  body {
    min-height: -webkit-fill-available;
  }
  
  #root {
    min-height: -webkit-fill-available;
  }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
