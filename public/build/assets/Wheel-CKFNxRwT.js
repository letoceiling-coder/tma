import{_ as Y,c as i,a as t,b,p as Z,e as I,t as m,d as f,D as S,v as g,F as P,q as N,w as D,f as $,r as a,m as H,k as ee,h as te,o as d,C as ne,E as oe}from"./admin-CoARDCXa.js";import{a as L,c as R}from"./api-DccBIR6h.js";import{S as w}from"./sweetalert2.esm.all-C0u8rGqG.js";import le from"./Media-Vu0l-HuL.js";const se={name:"Wheel",components:{Media:le},setup(){const k=a(!1),e=a(!1),h=a(!1),n=a(null),v=a([]),x=a([]),y=a(!1),o=a(3),r=a(""),z=a(1),C=a(!0),V=a(24),j=a(!0),U=a(!1),_=a(null),M=a(null),E=H(()=>v.value.reduce((l,s)=>l+(parseFloat(s.probability_percent)||0),0)),F=H(()=>Math.abs(E.value-100)<.01),W=async()=>{try{const l=await L("/wow/prize-types");if(l.ok){const s=await l.json();x.value=s.data||[]}}catch(l){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ‚Ð¸Ð¿Ð¾Ð² Ð¿Ñ€Ð¸Ð·Ð¾Ð²:",l)}},T=async()=>{k.value=!0,n.value=null;try{const l=await L("/wow/wheel");if(!l.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²");const s=await l.json();v.value=(s.data||[]).map(u=>({...u,probability_percent:parseFloat(u.probability_percent)||0,prize_value:u.prize_value||0,prize_type_id:u.prize_type_id||null})),s.settings&&(y.value=s.settings.always_empty_mode||!1,o.value=s.settings.ticket_restore_hours||3,r.value=s.settings.admin_username||"",z.value=s.settings.initial_tickets_count||1,C.value=s.settings.ticket_accrual_enabled??!0,V.value=s.settings.ticket_accrual_interval_hours??24,j.value=s.settings.ticket_accrual_notifications_enabled??!0)}catch(l){n.value=l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²"}finally{k.value=!1}},A=l=>({money:"Ð”ÐµÐ½ÑŒÐ³Ð¸",ticket:"Ð‘Ð¸Ð»ÐµÑ‚",gift:"ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº",secret_box:"Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð±Ð¾ÐºÑ",empty:"ÐŸÑƒÑÑ‚Ð¾",sponsor_gift:"ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº Ð¾Ñ‚ ÑÐ¿Ð¾Ð½ÑÐ¾Ñ€Ð°"})[l]||l,q=l=>{const s=x.value.find(c=>c.id===l);if(!s)return"";let u=`Ð¢Ð¸Ð¿: ${A(s.type)}`;return s.value&&(u+=`, Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: ${s.value}`),s.action!=="none"&&(u+=`, Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ: ${s.action==="add_ticket"?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚":s.action}`),u},G=l=>{const s=x.value.find(u=>u.id===l.prize_type_id);s&&(l.prize_type=s.type,l.prize_value=s.value||0,l.icon_url=s.icon_url||l.icon_url)},J=async()=>{if(!F.value){await w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:"Ð¡ÑƒÐ¼Ð¼Ð° Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°Ð²Ð½Ð° 100%",icon:"error",confirmButtonText:"ÐžÐš"});return}e.value=!0,n.value=null;try{const l=v.value.map(c=>{let p=c.prize_type;return p&&typeof p=="object"&&(p=p.type||p.prize_type||null),{id:c.id,prize_type:p||"empty",prize_value:c.prize_value||0,icon_url:c.icon_url||null,probability_percent:parseFloat(c.probability_percent)||0,is_active:c.is_active!==!1,prize_type_id:c.prize_type_id||null}}),s=await R("/wow/wheel/bulk-update",{sectors:l});if(!s.ok){const c=await s.json();throw new Error(c.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²")}const u=await s.json();await w.fire({title:"Ð¡ÐµÐºÑ‚Ð¾Ñ€Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await T()}catch(l){n.value=l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²",await w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²",icon:"error",confirmButtonText:"ÐžÐš"})}finally{e.value=!1}},K=l=>{l.target.style.display="none"},O=l=>{_.value=l,M.value=null,U.value=!0},B=()=>{U.value=!1,_.value=null,M.value=null},Q=l=>{if(_.value&&l){const s=l.url||(l.metadata?.path?"/"+l.metadata.path:"");_.value.icon_url=s||"",M.value=l,setTimeout(()=>{B()},300)}},X=async()=>{h.value=!0;try{const l=await R("/wow/wheel/settings",{always_empty_mode:y.value,ticket_restore_hours:o.value,admin_username:r.value,initial_tickets_count:z.value,ticket_accrual_enabled:C.value,ticket_accrual_interval_hours:V.value,ticket_accrual_notifications_enabled:j.value});if(!l.ok){const s=await l.json();throw new Error(s.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº")}await w.fire({title:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹",icon:"success",timer:1500,showConfirmButton:!1,toast:!0,position:"top-end"})}catch(l){await w.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº",icon:"error",confirmButtonText:"ÐžÐš"}),await T()}finally{h.value=!1}};return ee(async()=>{await W(),await T()}),{loading:k,saving:e,savingSettings:h,error:n,sectors:v,alwaysEmptyMode:y,ticketRestoreHours:o,adminUsername:r,initialTicketsCount:z,ticketAccrualEnabled:C,ticketAccrualIntervalHours:V,ticketAccrualNotificationsEnabled:j,totalProbability:E,probabilityValid:F,saveAllSectors:J,saveSettings:X,handleImageError:K,showMediaModal:U,currentSector:_,selectedMediaFile:M,openMediaSelector:O,closeMediaModal:B,handleMediaFileSelected:Q,prizeTypes:x,getTypeLabel:A,getSelectedPrizeTypeInfo:q,onPrizeTypeChange:G}}},re={class:"wheel-page space-y-6"},ae={class:"flex items-center justify-between"},ie={class:"flex items-center gap-4"},de={key:0,class:"ml-2"},ue=["disabled"],ce={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-6"},fe={class:"flex items-center justify-between"},be={class:"relative inline-flex items-center cursor-pointer"},me={class:"flex items-center justify-between"},pe={class:"flex items-center gap-3"},ge={class:"flex items-center justify-between"},ve={class:"flex items-center gap-3"},xe={class:"flex items-center justify-between"},ye={class:"flex items-center gap-3"},_e={class:"flex items-center justify-between"},we={class:"relative inline-flex items-center cursor-pointer"},ke={class:"flex items-center justify-between"},he={class:"flex items-center gap-3"},Me={class:"flex items-center justify-between"},Se={class:"relative inline-flex items-center cursor-pointer"},ze={key:1,class:"flex items-center justify-center py-12"},Ce={key:2,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Ve={class:"text-destructive"},je={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={class:"flex items-center justify-between"},Te={class:"text-lg font-semibold"},Ee={class:"flex items-center gap-2 cursor-pointer"},Fe=["onUpdate:modelValue"],Ae=["onUpdate:modelValue","onChange"],Be=["value"],Ie={key:0,class:"text-xs text-muted-foreground mt-1"},Pe=["onUpdate:modelValue"],Ne={class:"mt-1 h-2 bg-muted rounded-full overflow-hidden"},De={class:"flex gap-2"},He=["onUpdate:modelValue"],Le=["onClick"],Re={key:0,class:"mt-2"},We=["src","alt"],qe={class:"flex items-center justify-between p-4 border-b border-border"},Ge={class:"flex-1 overflow-y-auto min-h-0"};function Je(k,e,h,n,v,x){const y=te("Media");return d(),i("div",re,[t("div",ae,[e[19]||(e[19]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸"),t("p",{class:"text-muted-foreground mt-1"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð² Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸ Ð¸ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð²Ñ‹Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ")],-1)),t("div",ie,[t("div",{class:Z(["px-4 py-2 rounded-lg text-sm font-medium",n.probabilityValid?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"])},[I(" Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ: "+m(n.totalProbability.toFixed(2))+"% ",1),n.probabilityValid?b("",!0):(d(),i("span",de,"(Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ 100%)"))],2),t("button",{onClick:e[0]||(e[0]=(...o)=>n.saveAllSectors&&n.saveAllSectors(...o)),disabled:!n.probabilityValid||n.saving,class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[t("span",null,m(n.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð²ÑÐµ"),1)],8,ue)])]),n.loading?b("",!0):(d(),i("div",ce,[e[33]||(e[33]=t("h2",{class:"text-xl font-semibold mb-4"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸",-1)),t("div",fe,[e[21]||(e[21]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},'Ð ÐµÐ¶Ð¸Ð¼ "Ð’ÑÐµÐ³Ð´Ð° Ð¿ÑƒÑÑ‚Ð¾"'),t("p",{class:"text-sm text-muted-foreground"}," ÐŸÑ€Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ ÐºÐ¾Ð»ÐµÑÐ¾ Ð²ÑÐµÐ³Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ð¿ÑƒÑÑ‚Ð¾Ð¼ ÑÐµÐºÑ‚Ð¾Ñ€Ðµ ")],-1)),t("label",be,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.alwaysEmptyMode=o),onChange:e[2]||(e[2]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[S,n.alwaysEmptyMode]]),e[20]||(e[20]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),t("div",me,[e[23]||(e[23]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"ÐŸÐµÑ€Ð¸Ð¾Ð´ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð±Ð¸Ð»ÐµÑ‚Ð°"),t("p",{class:"text-sm text-muted-foreground"}," Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð±Ð¸Ð»ÐµÑ‚ (Ð¾Ñ‚ 1 Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð²) ")],-1)),t("div",pe,[f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.ticketRestoreHours=o),onChange:e[4]||(e[4]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"number",min:"1",max:"24",step:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,n.ticketRestoreHours,void 0,{number:!0}]]),e[22]||(e[22]=t("span",{class:"text-sm text-muted-foreground"},"Ñ‡Ð°ÑÐ¾Ð²",-1))])]),t("div",ge,[e[24]||(e[24]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"Username Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"),t("p",{class:"text-sm text-muted-foreground"}," Telegram username Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÑÑ‹Ð»Ð¾Ðº (Ð±ÐµÐ· @) ")],-1)),t("div",ve,[f(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.adminUsername=o),onChange:e[6]||(e[6]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"text",placeholder:"admin_username",class:"w-64 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,544),[[g,n.adminUsername]])])]),t("div",xe,[e[26]||(e[26]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð¸Ð»ÐµÑ‚Ñ‹"),t("p",{class:"text-sm text-muted-foreground"}," ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð²Ñ…Ð¾Ð´Ðµ (Ð¾Ñ‚ 0 Ð´Ð¾ 100). Ð•ÑÐ»Ð¸ Ð½Ðµ Ð·Ð°Ð´Ð°Ð½Ð¾ â€” Ð±ÑƒÐ´ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: 1 ")],-1)),t("div",ye,[f(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>n.initialTicketsCount=o),onChange:e[8]||(e[8]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"number",min:"0",max:"100",step:"1",placeholder:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,n.initialTicketsCount,void 0,{number:!0}]]),e[25]||(e[25]=t("span",{class:"text-sm text-muted-foreground"},"Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²",-1))])]),e[34]||(e[34]=t("div",{class:"border-t border-border my-4"},null,-1)),e[35]||(e[35]=t("h3",{class:"text-lg font-semibold mb-4"},"ÐÐ°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²",-1)),t("div",_e,[e[28]||(e[28]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},"Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²"),t("p",{class:"text-sm text-muted-foreground"}," Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð¸Ð»Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÑƒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð². ")],-1)),t("label",we,[f(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>n.ticketAccrualEnabled=o),onChange:e[10]||(e[10]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[S,n.ticketAccrualEnabled]]),e[27]||(e[27]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),t("div",ke,[e[30]||(e[30]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"ÐŸÐµÑ€Ð¸Ð¾Ð´ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ"),t("p",{class:"text-sm text-muted-foreground"}," Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð² Ñ‡Ð°ÑÐ°Ñ…, Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð°Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒÑÑ 1 Ð±Ð¸Ð»ÐµÑ‚, Ð²Ð½Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð±Ð°Ð»Ð°Ð½ÑÐ° (Ð¾Ñ‚ 1 Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð²) ")],-1)),t("div",he,[f(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>n.ticketAccrualIntervalHours=o),onChange:e[12]||(e[12]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"number",min:"1",max:"24",step:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,n.ticketAccrualIntervalHours,void 0,{number:!0}]]),e[29]||(e[29]=t("span",{class:"text-sm text-muted-foreground"},"Ñ‡Ð°ÑÐ¾Ð²",-1))])]),t("div",Me,[e[32]||(e[32]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÑÑ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¾ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸"),t("p",{class:"text-sm text-muted-foreground"}," Ð•ÑÐ»Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾, Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð°. ")],-1)),t("label",Se,[f(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>n.ticketAccrualNotificationsEnabled=o),onChange:e[14]||(e[14]=(...o)=>n.saveSettings&&n.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[S,n.ticketAccrualNotificationsEnabled]]),e[31]||(e[31]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])])])),n.loading?(d(),i("div",ze,[...e[36]||(e[36]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²...",-1)])])):b("",!0),n.error?(d(),i("div",Ce,[t("p",Ve,m(n.error),1)])):b("",!0),n.loading?b("",!0):(d(),i("div",je,[(d(!0),i(P,null,N(n.sectors,o=>(d(),i("div",{key:o.id,class:"bg-card rounded-lg border border-border p-6 space-y-4"},[t("div",Ue,[t("h3",Te,"Ð¡ÐµÐºÑ‚Ð¾Ñ€ #"+m(o.sector_number),1),t("label",Ee,[f(t("input",{"onUpdate:modelValue":r=>o.is_active=r,type:"checkbox",class:"w-4 h-4"},null,8,Fe),[[S,o.is_active]]),e[37]||(e[37]=t("span",{class:"text-sm"},"ÐÐºÑ‚Ð¸Ð²ÐµÐ½",-1))])]),t("div",null,[e[39]||(e[39]=t("label",{class:"text-sm font-medium mb-1 block"},"Ð¢Ð¸Ð¿ Ð¿Ñ€Ð¸Ð·Ð°",-1)),f(t("select",{"onUpdate:modelValue":r=>o.prize_type_id=r,onChange:r=>n.onPrizeTypeChange(o),class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},[e[38]||(e[38]=t("option",{value:null},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð¿Ñ€Ð¸Ð·Ð°",-1)),(d(!0),i(P,null,N(n.prizeTypes,r=>(d(),i("option",{key:r.id,value:r.id},m(r.name)+" ("+m(n.getTypeLabel(r.type))+") ",9,Be))),128))],40,Ae),[[ne,o.prize_type_id]]),o.prize_type_id?(d(),i("p",Ie,m(n.getSelectedPrizeTypeInfo(o.prize_type_id)),1)):b("",!0)]),t("div",null,[e[40]||(e[40]=t("label",{class:"text-sm font-medium mb-1 block"},[I(" Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ (%) "),t("span",{class:"text-xs text-muted-foreground"},"(0-100)")],-1)),f(t("input",{"onUpdate:modelValue":r=>o.probability_percent=r,type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,Pe),[[g,o.probability_percent,void 0,{number:!0}]]),t("div",Ne,[t("div",{class:"h-full bg-accent transition-all",style:oe({width:`${o.probability_percent}%`})},null,4)])]),t("div",null,[e[41]||(e[41]=t("label",{class:"text-sm font-medium mb-1 block"},"URL Ð¸ÐºÐ¾Ð½ÐºÐ¸",-1)),t("div",De,[f(t("input",{"onUpdate:modelValue":r=>o.icon_url=r,type:"text",placeholder:"https://...",class:"flex-1 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,He),[[g,o.icon_url]]),t("button",{onClick:r=>n.openMediaSelector(o),type:"button",class:"h-10 px-4 bg-accent/10 text-accent border border-accent/40 hover:bg-accent/20 rounded-lg inline-flex items-center justify-center gap-2 transition-colors",title:"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°Ñ‚ÐµÐºÐ¸"}," ðŸ“ ",8,Le)]),o.icon_url?(d(),i("div",Re,[t("img",{src:o.icon_url,alt:`Ð¡ÐµÐºÑ‚Ð¾Ñ€ ${o.sector_number}`,class:"w-16 h-16 object-contain rounded",onError:e[15]||(e[15]=(...r)=>n.handleImageError&&n.handleImageError(...r))},null,40,We)])):b("",!0)])]))),128))])),n.showMediaModal?(d(),i("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:e[18]||(e[18]=D((...o)=>n.closeMediaModal&&n.closeMediaModal(...o),["self"]))},[t("div",{class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col",onClick:e[17]||(e[17]=D(()=>{},["stop"]))},[t("div",qe,[e[42]||(e[42]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸ÐºÐ¾Ð½ÐºÑƒ",-1)),t("button",{onClick:e[16]||(e[16]=(...o)=>n.closeMediaModal&&n.closeMediaModal(...o)),class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-colors"}," âœ• ")]),t("div",Ge,[$(y,{selectionMode:!0,countFile:1,selectedFiles:n.selectedMediaFile?[n.selectedMediaFile]:[],onFileSelected:n.handleMediaFileSelected},null,8,["selectedFiles","onFileSelected"])])])])):b("",!0)])}const Ye=Y(se,[["render",Je]]);export{Ye as default};
