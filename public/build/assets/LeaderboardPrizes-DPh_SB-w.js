import{_ as v,c as a,a as t,b as u,t as m,F as _,q as x,r as c,k as y,o as n,d as b,v as f,B as w}from"./admin-B3NxblAV.js";import{a as k,c as h}from"./api-DccBIR6h.js";import{S as g}from"./sweetalert2.esm.all-C0u8rGqG.js";const z={name:"LeaderboardPrizes",setup(){const i=c(!1),o=c(!1),d=c(null),s=c([]),l=async()=>{i.value=!0,d.value=null;try{const e=await k("/wow/leaderboard-prizes");if(!e.ok)throw new Error("Ошибка загрузки призов");const r=await e.json();s.value=r.data||[]}catch(e){d.value=e.message||"Ошибка загрузки призов"}finally{i.value=!1}},p=async()=>{o.value=!0;try{const e=await h("/wow/leaderboard-prizes/bulk-update",{prizes:s.value.map(r=>({id:r.id,prize_amount:r.prize_amount,prize_description:r.prize_description,is_active:r.is_active}))});if(!e.ok){const r=await e.json();throw new Error(r.message||"Ошибка сохранения призов")}await g.fire({title:"Успешно!",text:"Призы сохранены",icon:"success",confirmButtonText:"OK"}),l()}catch(e){await g.fire({title:"Ошибка",text:e.message||"Не удалось сохранить призы",icon:"error",confirmButtonText:"OK"})}finally{o.value=!1}};return y(()=>{l()}),{loading:i,saving:o,error:d,prizes:s,fetchPrizes:l,savePrizes:p}}},V={class:"leaderboard-prizes-page space-y-6"},P={class:"flex items-center justify-between"},B=["disabled"],U={key:0,class:"flex items-center justify-center py-12"},j={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},C={class:"text-destructive"},D={key:2,class:"space-y-4"},E={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},L={class:"flex items-center h-10 px-4 border border-border rounded-lg bg-muted/30"},M={class:"text-lg font-bold"},S=["onUpdate:modelValue"],T=["onUpdate:modelValue"],F={class:"mt-4 flex items-center"},K=["onUpdate:modelValue","id"],N=["for"];function O(i,o,d,s,l,p){return n(),a("div",V,[t("div",P,[o[1]||(o[1]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Призы лидерборда"),t("p",{class:"text-muted-foreground mt-1"},"Настройка призов за места в рейтинге")],-1)),t("button",{onClick:o[0]||(o[0]=(...e)=>s.savePrizes&&s.savePrizes(...e)),disabled:s.saving,class:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50"},m(s.saving?"Сохранение...":"Сохранить"),9,B)]),s.loading?(n(),a("div",U,[...o[2]||(o[2]=[t("p",{class:"text-muted-foreground"},"Загрузка призов...",-1)])])):u("",!0),s.error?(n(),a("div",j,[t("p",C,m(s.error),1)])):u("",!0),!s.loading&&s.prizes.length>0?(n(),a("div",D,[(n(!0),a(_,null,x(s.prizes,e=>(n(),a("div",{key:e.id,class:"bg-card rounded-lg border border-border p-6"},[t("div",E,[t("div",null,[o[4]||(o[4]=t("label",{class:"text-sm font-medium mb-2 block"},"Место",-1)),t("div",L,[t("span",M,m(e.rank),1),o[3]||(o[3]=t("span",{class:"ml-2 text-sm text-muted-foreground"},"место",-1))])]),t("div",null,[o[5]||(o[5]=t("label",{class:"text-sm font-medium mb-2 block"},"Сумма приза (₽)",-1)),b(t("input",{"onUpdate:modelValue":r=>e.prize_amount=r,type:"number",min:"0",step:"100",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,S),[[f,e.prize_amount,void 0,{number:!0}]])]),t("div",null,[o[6]||(o[6]=t("label",{class:"text-sm font-medium mb-2 block"},"Описание",-1)),b(t("input",{"onUpdate:modelValue":r=>e.prize_description=r,type:"text",placeholder:"Например: Золото",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,T),[[f,e.prize_description]])])]),t("div",F,[b(t("input",{"onUpdate:modelValue":r=>e.is_active=r,type:"checkbox",id:`prize-active-${e.id}`,class:"w-4 h-4 border-border rounded focus:ring-2 focus:ring-accent"},null,8,K),[[w,e.is_active]]),t("label",{for:`prize-active-${e.id}`,class:"ml-2 text-sm text-muted-foreground"}," Активен ",8,N)])]))),128))])):u("",!0)])}const H=v(z,[["render",O]]);export{H as default};
