import{D as so,s as ce,o as x,E as ft,h as Pe,f as xe,g as lt,F as Se,q as We,x as Vt,d as ze,G as Pi,H as Ii,b as V,w as ge,_ as Li,r as O,m as vt,n as ao,c as R,a as c,t as L,I as kt,v as bt,A as ui,p as it,e as Ci,C as Si,J as lo,z as co,k as uo,K as ho,L as oi}from"./admin-tDj8YZk8.js";import{b as Bi,c as Ut,a as ut,d as Lt}from"./api-DccBIR6h.js";import{S as re}from"./sweetalert2.esm.all-C0u8rGqG.js";const fo=()=>({getAuthHeader:()=>{const t=localStorage.getItem("token"),o={};return t&&(o.Authorization=`Bearer ${t}`),o}});function go(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mo(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var o=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(o,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),o}var ni={exports:{}};const po=mo(so);var zi;function vo(){return zi||(zi=1,(function(){var e={293:function(s,r,a){var l,n,u,m;function g(b){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},g(b)}s=a.nmd(s),m=function(){return(function(b){var C={};function D(E){if(C[E])return C[E].exports;var T=C[E]={i:E,l:!1,exports:{}};return b[E].call(T.exports,T,T.exports,D),T.l=!0,T.exports}return D.m=b,D.c=C,D.d=function(E,T,ie){D.o(E,T)||Object.defineProperty(E,T,{enumerable:!0,get:ie})},D.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},D.t=function(E,T){if(1&T&&(E=D(E)),8&T||4&T&&g(E)=="object"&&E&&E.__esModule)return E;var ie=Object.create(null);if(D.r(ie),Object.defineProperty(ie,"default",{enumerable:!0,value:E}),2&T&&typeof E!="string")for(var de in E)D.d(ie,de,(function(ue){return E[ue]}).bind(null,de));return ie},D.n=function(E){var T=E&&E.__esModule?function(){return E.default}:function(){return E};return D.d(T,"a",T),T},D.o=function(E,T){return Object.prototype.hasOwnProperty.call(E,T)},D.p="",D(D.s=0)})([function(b,C,D){D.r(C);var E,T="fslightbox-",ie="".concat(T,"styles"),de="".concat(T,"cursor-grabbing"),ue="".concat(T,"full-dimension"),we="".concat(T,"flex-centered"),ct="".concat(T,"open"),qe="".concat(T,"transform-transition"),_e="".concat(T,"absoluted"),Le="".concat(T,"slide-btn"),dt="".concat(Le,"-container"),Ze="".concat(T,"fade-in"),Ge="".concat(T,"fade-out"),Me=Ze+"-strong",ee=Ge+"-strong",se="".concat(T,"opacity-"),fe="".concat(se,"1"),Be="".concat(T,"source");function Qe(f){return(Qe=typeof Symbol=="function"&&g(Symbol.iterator)=="symbol"?function(h){return g(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":g(h)})(f)}function Te(f){var h,M=f.props,w=0,S={};this.getSourceTypeFromLocalStorageByUrl=function(A){return h[A]?h[A]:_(A)},this.handleReceivedSourceTypeForUrl=function(A,F){if(S[F]===!1&&(w--,A!=="invalid"?S[F]=A:delete S[F],w===0)){(function(k,H){for(var z in H)k[z]=H[z]})(h,S);try{localStorage.setItem("fslightbox-types",JSON.stringify(h))}catch{}}};var _=function(A){w++,S[A]=!1};if(M.disableLocalStorage)this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){};else{try{h=JSON.parse(localStorage.getItem("fslightbox-types"))}catch{}h||(h={},this.getSourceTypeFromLocalStorageByUrl=_)}}function Ae(f,h,M,w){f.data;var S=f.elements.sources,_=M/w,A=0;this.adjustSize=function(){if((A=f.mw/_)<f.mh)return M<f.mw&&(A=w),F();A=w>f.mh?f.mh:w,F()};var F=function(){S[h].style.width=A*_+"px",S[h].style.height=A+"px"}}function rt(f,h){var M=this,w=f.collections.sourceSizers,S=f.elements,_=S.sourceAnimationWrappers,A=S.sources,F=f.isl,k=f.props.onSourceLoad,H=f.resolve;function z(j,B){w[h]=H(Ae,[h,j,B]),w[h].adjustSize()}this.b=function(j,B){A[h].classList.add(fe),M.a(),z(j,B),M.b=z},this.a=function(){F[h]=!0,_[h].classList.add(Me),_[h].removeChild(_[h].firstChild),k&&k(f,A[h],h)}}function gt(f,h){var M,w=this,S=f.elements.sources,_=f.props,A=(0,f.resolve)(rt,[h]);this.handleImageLoad=function(F){var k=F.target,H=k.naturalWidth,z=k.naturalHeight;A.b(H,z)},this.handleVideoLoad=function(F){var k=F.target,H=k.videoWidth,z=k.videoHeight;M=!0,A.b(H,z)},this.handleNotMetaDatedVideoLoad=function(){M||w.handleYoutubeLoad()},this.handleYoutubeLoad=function(F,k){F||(F=1920,k=1080),_.maxYoutubeDimensions&&(F=_.maxYoutubeDimensions.width,k=_.maxYoutubeDimensions.height),A.b(F,k)},this.handleCustomLoad=function(){var F=S[h],k=F.offsetWidth,H=F.offsetHeight;k&&H?A.b(k,H):setTimeout(w.handleCustomLoad)}}function Ne(f,h,M){var w=f.elements.sources,S=f.props.customClasses,_=S[h]?S[h]:"";w[h].className=M+" "+_}function Je(f,h){var M=f.elements.sources,w=f.props.customAttributes;for(var S in w[h])M[h].setAttribute(S,w[h][S])}function Ke(f,h){var M=f.collections.sourceLoadHandlers,w=f.elements,S=w.sources,_=w.sourceAnimationWrappers,A=f.props.sources;S[h]=document.createElement("img"),Ne(f,h,Be),S[h].src=A[h],S[h].onload=M[h].handleImageLoad,Je(f,h),_[h].appendChild(S[h])}function $e(f,h){var M=f.ap,w=f.collections.sourceLoadHandlers,S=f.elements,_=S.sources,A=S.sourceAnimationWrappers,F=f.props,k=F.sources,H=F.videosPosters,z=document.createElement("video"),j=document.createElement("source");_[h]=z,Ne(f,h,"".concat(Be," fslightboxv")),z.src=k[h],z.onloadedmetadata=function(B){return w[h].handleVideoLoad(B)},z.controls=!0,z.autoplay=M.i(h),Je(f,h),H[h]&&(_[h].poster=H[h]),j.src=k[h],z.appendChild(j),setTimeout(w[h].handleNotMetaDatedVideoLoad,3e3),A[h].appendChild(_[h])}function Ft(f,h){var M=f.ap,w=f.collections.sourceLoadHandlers,S=f.elements,_=S.sources,A=S.sourceAnimationWrappers,F=f.props.sources[h],k=F.split("?")[1],H=document.createElement("iframe");_[h]=H,Ne(f,h,"".concat(Be," ").concat(T,"youtube-iframe")),H.src="https://www.youtube.com/embed/".concat(F.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?").concat(k||"").concat(M.i(h)?"&mute=1&autoplay=1":"","&enablejsapi=1"),H.allowFullscreen=!0,Je(f,h),A[h].appendChild(H),w[h].handleYoutubeLoad(parseInt(H.width),parseInt(H.height))}function Gt(f,h){var M=f.collections.sourceLoadHandlers,w=f.elements,S=w.sources,_=w.sourceAnimationWrappers,A=f.props.sources;S[h]=A[h],Ne(f,h,"".concat(S[h].className," ").concat(Be)),_[h].appendChild(S[h]),M[h].handleCustomLoad()}function Qt(f,h){var M=f.elements,w=M.sources,S=M.sourceAnimationWrappers;f.props.sources,w[h]=document.createElement("div"),w[h].className="".concat(T,"invalid-file-wrapper ").concat(we),w[h].innerHTML="Invalid source",S[h].appendChild(w[h]),new rt(f,h).a()}function Oe(f){var h=f.collections,M=h.sourceLoadHandlers,w=h.sourcesRenderFunctions,S=f.core.sourceDisplayFacade,_=f.resolve;this.runActionsForSourceTypeAndIndex=function(A,F){var k;switch(A!=="invalid"&&(M[F]=_(gt,[F])),A){case"image":k=Ke;break;case"video":k=$e;break;case"youtube":k=Ft;break;case"custom":k=Gt;break;default:k=Qt}w[F]=function(){return k(f,F)},S.displaySourcesWhichShouldBeDisplayed()}}function Jt(f,h,M){var w=f.props,S=w.types,_=w.type,A=w.sources;this.getTypeSetByClientForIndex=function(F){var k;return S&&S[F]?k=S[F]:_&&(k=_),k},this.retrieveTypeWithXhrForIndex=function(F){(function(k,H){var z=document.createElement("a");z.href=k;var j=z.hostname;if(j==="www.youtube.com"||j==="youtu.be")return H("youtube");var B=new XMLHttpRequest;B.onreadystatechange=function(){if(B.readyState!==4){if(B.readyState===2){var X,Q=B.getResponseHeader("content-type");switch(Q.slice(0,Q.indexOf("/"))){case"image":X="image";break;case"video":X="video";break;default:X="invalid"}B.onreadystatechange=null,B.abort(),H(X)}}else H("invalid")},B.open("GET",k),B.send()})(A[F],(function(k){h.handleReceivedSourceTypeForUrl(k,A[F]),M.runActionsForSourceTypeAndIndex(k,F)}))}}function De(f,h){var M=f.core.stageManager,w=f.elements,S=w.smw,_=w.sourceWrappersContainer,A=f.props,F=0,k=document.createElement("div");function H(j){k.style.transform="translateX(".concat(j+F,"px)"),F=0}function z(){return(1+A.slideDistance)*innerWidth}k.className="".concat(_e," ").concat(ue," ").concat(we),k.s=function(){k.style.display="flex"},k.h=function(){k.style.display="none"},k.a=function(){k.classList.add(qe)},k.d=function(){k.classList.remove(qe)},k.n=function(){k.style.removeProperty("transform")},k.v=function(j){return F=j,k},k.ne=function(){H(-z())},k.z=function(){H(0)},k.p=function(){H(z())},M.i(h)||k.h(),S[h]=k,_.appendChild(k),(function(j,B){var X=j.elements,Q=X.smw,te=X.sourceAnimationWrappers,q=document.createElement("div"),P=document.createElement("div");P.className="fslightboxl";for(var Y=0;Y<3;Y++){var oe=document.createElement("div");P.appendChild(oe)}q.appendChild(P),Q[B].appendChild(q),te[B]=q})(f,h)}function pe(f,h,M){var w=document.createElementNS("http://www.w3.org/2000/svg","svg"),S="".concat(T,"svg");w.setAttributeNS(null,"class","".concat(S)),w.setAttributeNS(null,"viewBox",h);var _=document.createElementNS("http://www.w3.org/2000/svg","path");return _.setAttributeNS(null,"class","".concat(S,"p")),_.setAttributeNS(null,"d",M),w.appendChild(_),f.appendChild(w),w}function _t(f,h){var M=document.createElement("button");return M.className="fslightboxb ".concat(T,"toolbar-button ").concat(we),M.title=h,f.appendChild(M),M}function Tt(f,h,M,w){var S=f.elements.container,_=M.charAt(0).toUpperCase()+M.slice(1),A=document.createElement("div");A.className="".concat(dt," ").concat(dt,"-").concat(M),A.title="".concat(_," slide"),A.onclick=h,(function(F,k){var H=document.createElement("button");H.className="fslightboxb ".concat(Le," ").concat(we),pe(H,"0 0 20 20",k),F.appendChild(H)})(A,w),S.appendChild(A)}function Kt(f){var h=f.core,M=h.lightboxCloser,w=h.slideChangeFacade,S=f.fs;this.listener=function(_){switch(_.key){case"Escape":M.closeLightbox();break;case"ArrowLeft":w.changeToPrevious();break;case"ArrowRight":w.changeToNext();break;case"F11":_.preventDefault(),S.t()}}}function $t(f){var h=f.elements,M=f.sourcePointerProps,w=f.stageIndexes;function S(_,A){h.smw[_].v(M.swipedX)[A]()}this.runActionsForEvent=function(_){var A,F,k;h.container.contains(h.slideSwipingHoverer)||h.container.appendChild(h.slideSwipingHoverer),A=h.container,F=de,(k=A.classList).contains(F)||k.add(F),M.swipedX=_.screenX-M.downScreenX;var H=w.previous,z=w.next;S(w.current,"z"),H!==void 0&&M.swipedX>0?S(H,"ne"):z!==void 0&&M.swipedX<0&&S(z,"p")}}function ei(f){var h=f.dss,M=f.props.sources,w=f.resolve,S=f.sourcePointerProps,_=w($t);M.length===1||h?this.listener=function(){S.swipedX=1}:this.listener=function(A){S.isPointering&&_.runActionsForEvent(A)}}function ti(f){var h=f.core.slideIndexChanger,M=f.elements.smw,w=f.stageIndexes,S=f.sws;function _(F){var k=M[w.current];k.a(),k[F]()}function A(F,k){F!==void 0&&(M[F].s(),M[F][k]())}this.runPositiveSwipedXActions=function(){var F=w.previous;if(F===void 0)_("z");else{_("p");var k=w.next;h.changeTo(F);var H=w.previous;S.d(H),S.b(k),_("z"),A(H,"ne")}},this.runNegativeSwipedXActions=function(){var F=w.next;if(F===void 0)_("z");else{_("ne");var k=w.previous;h.changeTo(F);var H=w.next;S.d(H),S.b(k),_("z"),A(H,"p")}}}function Ct(f,h){f.contains(h)&&f.removeChild(h)}function st(f){var h=f.core.lightboxCloser,M=f.dss,w=f.elements,S=f.props,_=f.resolve,A=f.sourcePointerProps,F=_(ti);this.runNoSwipeActions=function(){Ct(w.container,w.slideSwipingHoverer),A.isSourceDownEventTarget||S.disableBackgroundClose||h.closeLightbox(),A.isPointering=!1},this.runActions=function(){M||(A.swipedX>0?F.runPositiveSwipedXActions():F.runNegativeSwipedXActions()),Ct(w.container,w.slideSwipingHoverer),w.container.classList.remove(de),A.isPointering=!1}}function ii(f){var h=f.resolve,M=f.sourcePointerProps,w=h(st);this.listener=function(){M.isPointering&&(M.swipedX?w.runActions():w.runNoSwipeActions())}}function Dt(f){var h=this,M=f.core,w=M.globalEventsController,S=M.scrollbarRecompensor,_=(f.data,f.e),A=f.elements,F=f.fs,k=f.props,H=f.sourcePointerProps;this.runActions=function(){h.i=1,A.container.classList.add(ee),w.removeListeners(),k.exitFullscreenOnClose&&f.ifs&&F.x(),setTimeout((function(){h.i=0,H.isPointering=!1,A.container.classList.remove(ee),document.documentElement.classList.remove(ct),S.removeRecompense(),document.body.removeChild(A.container),_("onClose")}),270)}}function St(f,h){var M=f.classList;M.contains(h)&&M.remove(h)}function zt(f){var h,M,w,S,_,A,F,k,H;(function(z){var j=z.ap,B=z.elements.sources,X=z.props,Q=X.autoplay,te=X.autoplays;function q(P,Y){if(Y!="play"||j.i(P)){var oe=B[P];if(oe){var ae=oe.tagName;if(ae=="VIDEO")oe[Y]();else if(ae=="IFRAME"){var U=oe.contentWindow;U&&U.postMessage('{"event":"command","func":"'.concat(Y,'Video","args":""}'),"*")}}}}j.i=function(P){return te[P]||Q&&te[P]!=0},j.p=function(P){q(P,"play")},j.c=function(P,Y){q(P,"pause"),q(Y,"play")}})(f),(function(z){z.data;var j=z.fs,B=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],X=document.documentElement,Q=X.requestFullscreen;function te(P){for(var Y=0;Y<B.length;Y++)document[P](B[Y],q)}function q(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?z.fso():z.fsx()}j.i=function(){if(Q||(Q=X.mozRequestFullScreen),Q||(Q=X.webkitRequestFullscreen),Q||(Q=X.msRequestFullscreen),!Q)return z.hfs=1,j.o=function(){},j.x=function(){},j.t=function(){},j.l=function(){},void(j.q=function(){});j.o=function(){z.fso();var P=document.documentElement;P.requestFullscreen?P.requestFullscreen():P.mozRequestFullScreen?P.mozRequestFullScreen():P.webkitRequestFullscreen?P.webkitRequestFullscreen():P.msRequestFullscreen&&P.msRequestFullscreen()},j.x=function(){z.fsx(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},j.t=function(){z.ifs?j.x():j.o()},j.l=function(){te("addEventListener")},j.q=function(){te("removeEventListener")}}})(f),w=(M=(h=f).core).globalEventsController,S=M.windowResizeActioner,_=h.fs,A=h.resolve,F=A(Kt),k=A(ei),H=A(ii),w.attachListeners=function(){document.addEventListener("pointermove",k.listener),document.addEventListener("pointerup",H.listener),addEventListener("resize",S.runActions),document.addEventListener("keydown",F.listener),_.l()},w.removeListeners=function(){document.removeEventListener("pointermove",k.listener),document.removeEventListener("pointerup",H.listener),removeEventListener("resize",S.runActions),document.removeEventListener("keydown",F.listener),_.q()},(function(z){var j=z.core.lightboxCloser,B=(0,z.resolve)(Dt);j.closeLightbox=function(){B.isLightboxFadingOut||B.runActions()}})(f),(function(z){var j=z.data,B=z.core.scrollbarRecompensor;function X(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=j.scrollbarWidth+"px")}B.addRecompense=function(){document.readyState==="complete"?X():addEventListener("load",(function(){X(),B.addRecompense=X}))},B.removeRecompense=function(){document.body.style.removeProperty("margin-right")}})(f),(function(z){var j=z.core,B=j.slideChangeFacade,X=j.slideIndexChanger,Q=j.stageManager;z.props.sources.length>1?(B.changeToPrevious=function(){X.jumpTo(Q.getPreviousSlideIndex())},B.changeToNext=function(){X.jumpTo(Q.getNextSlideIndex())}):(B.changeToPrevious=function(){},B.changeToNext=function(){})})(f),(function(z){var j=z.ap,B=(z.componentsServices,z.core),X=B.slideIndexChanger,Q=B.sourceDisplayFacade,te=B.stageManager,q=z.elements,P=q.smw,Y=q.sourceAnimationWrappers,oe=z.isl,ae=z.stageIndexes,U=z.sws;X.changeTo=function(G){j.c(ae.current,G),ae.current=G,te.updateStageIndexes(),z.sn(G+1),Q.displaySourcesWhichShouldBeDisplayed()},X.jumpTo=function(G){var $=ae.previous,Z=ae.current,ne=ae.next,ve=oe[Z],he=oe[G];X.changeTo(G);for(var le=0;le<P.length;le++)P[le].d();U.d(Z),U.c(),requestAnimationFrame((function(){requestAnimationFrame((function(){var ke=ae.previous,Re=ae.next;function Fe(){te.i(Z)?Z===ae.previous?P[Z].ne():Z===ae.next&&P[Z].p():(P[Z].h(),P[Z].n())}ve&&Y[Z].classList.add(Ge),he&&Y[ae.current].classList.add(Ze),U.a(),ke!==void 0&&ke!==Z&&P[ke].ne(),P[ae.current].n(),Re!==void 0&&Re!==Z&&P[Re].p(),U.b($),U.b(ne),oe[Z]?setTimeout(Fe,260):Fe()}))}))}})(f),(function(z){var j=z.core.sourcesPointerDown,B=z.elements,X=B.smw,Q=B.sources,te=z.sourcePointerProps,q=z.stageIndexes;j.listener=function(P){P.target.tagName!=="VIDEO"&&P.preventDefault(),te.isPointering=!0,te.downScreenX=P.screenX,te.swipedX=0;var Y=Q[q.current];Y&&Y.contains(P.target)?te.isSourceDownEventTarget=!0:te.isSourceDownEventTarget=!1;for(var oe=0;oe<X.length;oe++)X[oe].d()}})(f),(function(z){var j=z.collections.sourcesRenderFunctions,B=z.core.sourceDisplayFacade,X=z.loc,Q=z.stageIndexes;function te(q){j[q]&&(j[q](),delete j[q])}B.displaySourcesWhichShouldBeDisplayed=function(){if(X)te(Q.current);else for(var q in Q)te(Q[q])}})(f),(function(z){var j=z.core.stageManager,B=z.elements,X=B.smw,Q=B.sourceAnimationWrappers,te=z.isl,q=z.stageIndexes,P=z.sws;P.a=function(){for(var Y in q)X[q[Y]].s()},P.b=function(Y){Y===void 0||j.i(Y)||(X[Y].h(),X[Y].n())},P.c=function(){for(var Y in q)P.d(q[Y])},P.d=function(Y){if(te[Y]){var oe=Q[Y];St(oe,Me),St(oe,Ze),St(oe,Ge)}}})(f),(function(z){var j=z.collections.sourceSizers,B=z.core.windowResizeActioner,X=(z.data,z.elements.smw),Q=z.props.sourceMargin,te=z.stageIndexes,q=1-2*Q;B.runActions=function(){innerWidth>992?z.mw=q*innerWidth:z.mw=innerWidth,z.mh=q*innerHeight;for(var P=0;P<X.length;P++)X[P].d(),j[P]&&j[P].adjustSize();var Y=te.previous,oe=te.next;Y!==void 0&&X[Y].ne(),oe!==void 0&&X[oe].p()}})(f)}function jt(f,h,M){return(jt=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})()?Reflect.construct.bind():function(w,S,_){var A=[null];A.push.apply(A,S);var F=new(Function.bind.apply(w,A));return _&&Pt(F,_.prototype),F}).apply(null,arguments)}function Pt(f,h){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,w){return M.__proto__=w,M})(f,h)}function mt(f,h){(h==null||h>f.length)&&(h=f.length);for(var M=0,w=new Array(h);M<h;M++)w[M]=f[M];return w}(typeof document>"u"?"undefined":Qe(document))==="object"&&((E=document.createElement("style")).className=ie,E.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg{width:20px;height:20px}.fslightbox-svgp{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightboxsn{z-index:0;display:flex;align-items:center;margin:14px 0 0 11px;font-size:15px;color:#d7d7d7}.fslightboxsn span{display:inline;vertical-align:middle}.fslightboxsl{display:inline-block!important;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:white}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex}.fslightbox-toolbar-button{width:45px;height:100%}.fslightbox-fsx{width:24px;height:24px}.fslightboxb{border:0;background:rgba(35,35,35,.65);cursor:pointer}.fslightboxb:focus{outline:0}.fslightboxb:focus .fslightbox-svgp{fill:#fff}.fslightboxb:hover .fslightbox-svgp{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}.fslightbox-slide-btn-container-next{padding-right:6px!important;padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}.fslightbox-slide-btn-container-next{padding-left:30px}.fslightbox-slide-btn{padding:10px}}.fslightbox-slide-btn-container:hover .fslightbox-svgp{fill:#fff}.fslightbox-slide-btn{padding:9px}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightboxv{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightboxl{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightboxl div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightboxl 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightboxl div:nth-child(1){animation-delay:-.45s}.fslightboxl div:nth-child(2){animation-delay:-.3s}.fslightboxl div:nth-child(3){animation-delay:-.15s}@keyframes fslightboxl{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}@media (min-width:1200px){.fslightboxsn{margin:15px 0 0 12px;font-size:16px;display:block}.fslightboxsl{margin:0 6px 1px 6px;height:14px}.fslightbox-slide-btn{padding:11px}.fslightbox-svg{width:22px;height:22px}.fslightbox-fsx{width:26px;height:26px}.fslightbox-fso{width:22px;height:22px}.fslightboxl div{width:60px;height:60px;border-width:6px;border-color:#999 transparent transparent transparent;border-radius:50%}}@media (min-width:1600px){.fslightbox-nav{height:50px}.fslightboxsn{display:flex;margin:19px 0 0 16px;font-size:20px}.fslightboxsl{margin:0 7px 1px 7px;height:16px;width:2px;background:#d7d7d7}.fslightbox-toolbar-button{width:50px}.fslightbox-slide-btn{padding:12px}.fslightbox-svg{width:24px;height:24px}.fslightbox-fsx{width:28px;height:28px}.fslightbox-fso{width:24px;height:24px}}")),document.head.appendChild(E)),C.default=function(){var f=this;this.props={sources:[],customAttributes:[],customClasses:[],autoplays:[],types:[],videosPosters:[],exitFullscreenOnClose:1,sourceMargin:.05,slideDistance:.3},this.data={isFullscreenOpen:!1,scrollbarWidth:0},this.isl=[],this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,smw:[],sourceWrappersContainer:null,sources:[],sourceAnimationWrappers:[]},this.sn=function(){},this.resolve=function(h){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return M.unshift(f),jt(h,(function(w){return(function(S){if(Array.isArray(S))return mt(S)})(w)||(function(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)})(w)||(function(S,_){if(S){if(typeof S=="string")return mt(S,_);var A=Object.prototype.toString.call(S).slice(8,-1);return A==="Object"&&S.constructor&&(A=S.constructor.name),A==="Map"||A==="Set"?Array.from(S):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?mt(S,_):void 0}})(w)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()})(M))},this.collections={sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={globalEventsController:{},lightboxCloser:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},this.ap={},this.fs={},this.sws={},this.e=function(h){f.props[h]&&f.props[h](f)},(function(h){var M=h.ap,w=(h.componentsServices,h.core),S=w.globalEventsController,_=w.scrollbarRecompensor,A=w.sourceDisplayFacade,F=w.stageManager,k=w.windowResizeActioner,H=h.data,z=h.e,j=h.elements,B=(h.props,h.stageIndexes),X=h.sws,Q=0;function te(){var q,P,Y=h.props,oe=Y.autoplay,ae=Y.autoplays;Q=!0,(function(U){var G=U.props,$=G.autoplays;U.c=G.sources.length;for(var Z=0;Z<U.c;Z++)$[Z]==="false"&&($[Z]=0),$[Z]===""&&($[Z]=1);U.dss=G.disableSlideSwiping,U.loc=G.loadOnlyCurrentSource})(h),H.scrollbarWidth=(function(){var U=document.createElement("div"),G=U.style,$=document.createElement("div");G.visibility="hidden",G.width="100px",G.msOverflowStyle="scrollbar",G.overflow="scroll",$.style.width="100%",document.body.appendChild(U);var Z=U.offsetWidth;U.appendChild($);var ne=$.offsetWidth;return document.body.removeChild(U),Z-ne})(),(oe||ae.length>0)&&(h.loc=1),zt(h),h.fs.i(),j.container=document.createElement("div"),j.container.className="".concat(T,"container ").concat(ue," ").concat(Me),j.container.setAttribute("tabindex","0"),(function(U){var G=U.elements;G.slideSwipingHoverer=document.createElement("div"),G.slideSwipingHoverer.className="".concat(T,"slide-swiping-hoverer ").concat(ue," ").concat(_e)})(h),(function(U){var G=U.props.sources,$=U.elements.container,Z=document.createElement("div");Z.className="".concat(T,"nav"),$.appendChild(Z),(function(ne,ve){var he=document.createElement("div");he.className="".concat(T,"toolbar"),ve.appendChild(he),(function(le,ke){if(!le.hfs){var Re="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",Fe=_t(ke);Fe.title="Enter fullscreen";var Ue=pe(Fe,"0 0 18 18",Re);le.fso=function(){le.ifs=1,Fe.title="Exit fullscreen",Ue.classList.add("".concat(T,"fsx")),Ue.setAttributeNS(null,"viewBox","0 0 950 1024"),Ue.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},le.fsx=function(){le.ifs=0,Fe.title="Enter fullscreen",Ue.classList.remove("".concat(T,"fsx")),Ue.setAttributeNS(null,"viewBox","0 0 18 18"),Ue.firstChild.setAttributeNS(null,"d",Re)},Fe.onclick=le.fs.t}})(ne,he),(function(le,ke){var Re=_t(ke,"Close");Re.onclick=le.core.lightboxCloser.closeLightbox,pe(Re,"0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")})(ne,he)})(U,Z),G.length>1&&(function(ne,ve){var he=ne.props.sources,le=(ne.stageIndexes,document.createElement("div")),ke=document.createElement("span"),Re=document.createElement("span"),Fe=document.createElement("span");le.className="fslightboxsn",ne.sn=function(Ue){return ke.innerHTML=Ue},Re.className="fslightboxsl",Fe.innerHTML=he.length,le.appendChild(ke),le.appendChild(Re),le.appendChild(Fe),ve.appendChild(le)})(U,Z)})(h),(function(U){var G=U.core.sourcesPointerDown,$=U.elements,Z=U.props.sources,ne=document.createElement("div");ne.className="".concat(_e," ").concat(ue),$.container.appendChild(ne),ne.addEventListener("pointerdown",G.listener),$.sourceWrappersContainer=ne;for(var ve=0;ve<Z.length;ve++)De(U,ve)})(h),h.props.sources.length>1&&(P=(q=h).core.slideChangeFacade,Tt(q,P.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),Tt(q,P.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),(function(U){for(var G=U.props.sources,$=U.resolve,Z=$(Te),ne=$(Oe),ve=$(Jt,[Z,ne]),he=0;he<G.length;he++)if(typeof G[he]=="string"){var le=ve.getTypeSetByClientForIndex(he);if(le)ne.runActionsForSourceTypeAndIndex(le,he);else{var ke=Z.getSourceTypeFromLocalStorageByUrl(G[he]);ke?ne.runActionsForSourceTypeAndIndex(ke,he):ve.retrieveTypeWithXhrForIndex(he)}}else ne.runActionsForSourceTypeAndIndex("custom",he)})(h),z("onInit")}h.open=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=B.previous,Y=B.current,oe=B.next;B.current=q,Q||(function(ae){var U=ae.stageIndexes,G=ae.core.stageManager,$=ae.props.sources.length-1;G.getPreviousSlideIndex=function(){return U.current===0?$:U.current-1},G.getNextSlideIndex=function(){return U.current===$?0:U.current+1},G.updateStageIndexes=$===0?function(){}:$===1?function(){U.current===0?(U.next=1,delete U.previous):(U.previous=0,delete U.next)}:function(){U.previous=G.getPreviousSlideIndex(),U.next=G.getNextSlideIndex()},G.i=$<=2?function(){return!0}:function(Z){var ne=U.current;if(ne===0&&Z===$||ne===$&&Z===0)return!0;var ve=ne-Z;return ve===-1||ve===0||ve===1}})(h),F.updateStageIndexes(),Q?(X.c(),X.a(),X.b(P),X.b(Y),X.b(oe),z("onShow")):te(),A.displaySourcesWhichShouldBeDisplayed(),h.sn(q+1),document.body.appendChild(j.container),j.container.focus(),document.documentElement.classList.add(ct),_.addRecompense(),S.attachListeners(),k.runActions(),j.smw[q].n(),M.p(q),z("onOpen")}})(this),this.close=function(){return f.core.lightboxCloser.closeLightbox()}}}])},g(r)=="object"&&g(s)=="object"?s.exports=m():(n=[],(u=typeof(l=m)=="function"?l.apply(r,n):l)===void 0||(s.exports=u))},744:function(s,r){r.Z=(a,l)=>{const n=a.__vccOpts||a;for(const[u,m]of l)n[u]=m;return n}}},t={};function o(s){var r=t[s];if(r!==void 0)return r.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s](a,a.exports,o),a.loaded=!0,a.exports}o.d=function(s,r){for(var a in r)o.o(r,a)&&!o.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:r[a]})},o.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.nmd=function(s){return s.paths=[],s.children||(s.children=[]),s};var i={};(function(){o.r(i),o.d(i,{default:function(){return g}});var s=po,r={key:0,style:{display:"none"}};function a(b){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(b)}var l,n=0;function u(b){var C=b.sourceIndex;C===void 0&&(C=b.slide),C?C--:C=0,b.o.open(C)}(typeof window>"u"?"undefined":a(window))==="object"&&(l=o(293),n=1);var m={props:["toggler","sources","slide","sourceIndex","onOpen","onClose","onInit","onShow","onSourceLoad","disableLocalStorage","types","type","customAttributes","maxYoutubeVideoDimensions","autoplay","loadOnlyCurrentSource","slideDistance","openOnMount","exitFullscreenOnClose","disableSlideSwiping","disableBackgroundClose","sourceMargin"],created:function(){this.o=null},mounted:function(){var b=this;if(n||(l=o(293),n=1),!this.o){var C=new l.default,D={};for(var E in Object.assign(D,this.$props),D)D[E]===void 0&&delete D[E];Object.assign(C.props,D),C.props.sources=this.sources.map((function(T,ie){if(typeof T=="string")return T;var de=b.$refs.s[ie],ue=de.firstChild;return de.removeChild(ue),ue})),C.props.maxYoutubeDimensions=this.maxYoutubeVideoDimensions,this.o=C,this.openOnMount&&u(this)}},watch:{toggler:function(){u(this)}}},g=(0,o(744).Z)(m,[["render",function(b,C,D,E,T,ie){return b.o?(0,s.createCommentVNode)("v-if",!0):((0,s.openBlock)(),(0,s.createElementBlock)("div",r,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(D.sources,(function(de,ue){return(0,s.openBlock)(),(0,s.createElementBlock)("div",{ref_for:!0,ref:"s"},[typeof de!="string"?((0,s.openBlock)(),(0,s.createBlock)((0,s.resolveDynamicComponent)(de),{key:0})):(0,s.createCommentVNode)("v-if",!0)],512)})),256))]))}]])})(),ni.exports=i})()),ni.exports}var bo=vo();const wo=go(bo);function Mi(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),o.push.apply(o,i)}return o}function J(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Mi(Object(o),!0).forEach((function(i){je(e,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Mi(Object(o)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i))}))}return e}function je(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function xo(e,t){if(e==null)return{};var o,i,s=(function(a,l){if(a==null)return{};var n,u,m={},g=Object.keys(a);for(u=0;u<g.length;u++)n=g[u],l.indexOf(n)>=0||(m[n]=a[n]);return m})(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}function ht(e){return(function(t){if(Array.isArray(t))return ri(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||(function(t,o){if(t){if(typeof t=="string")return ri(t,o);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ri(t,o)}})(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function ri(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var Ai,yo,Bt,me=(Ai=function(e){(function(){var t={}.hasOwnProperty;function o(){for(var i=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var a=typeof r;if(a==="string"||a==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var l=o.apply(null,r);l&&i.push(l)}}else if(a==="object")if(r.toString===Object.prototype.toString)for(var n in r)t.call(r,n)&&r[n]&&i.push(n);else i.push(r.toString())}}return i.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o})()},Ai(Bt={path:yo,exports:{},require:function(e,t){return(function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")})(t==null&&Bt.path)}},Bt.exports),Bt.exports),He=function(e){return function(t,o){if(!t)return e;var i;typeof t=="string"?i=t:o=t;var s=e;return i&&(s+="__"+i),s+(o?Object.keys(o).reduce((function(r,a){var l=o[a];return l&&(r+=" "+(typeof l=="boolean"?s+"--"+a:s+"--"+a+"_"+l)),r}),""):"")}};function hi(e,t,o){var i,s,r,a,l;function n(){var m=Date.now()-a;m<t&&m>=0?i=setTimeout(n,t-m):(i=null,o||(l=e.apply(r,s),r=s=null))}t==null&&(t=100);var u=function(){r=this,s=arguments,a=Date.now();var m=o&&!i;return i||(i=setTimeout(n,t)),m&&(l=e.apply(r,s),r=s=null),l};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(l=e.apply(r,s),r=s=null,clearTimeout(i),i=null)},u}hi.debounce=hi;var fi=hi,W=function(){return W=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var s in t=arguments[o])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},W.apply(this,arguments)};function Oi(e,t){var o,i;return e&&t?(o=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(o=e||t,i=e||t),{name:o,classname:i}}function Wi(e){return/^blob:/.test(e)}function ki(e){return Wi(e)||(function(t){return/^data:/.test(t)})(e)}function pt(e){return!!(e&&e.constructor&&e.call&&e.apply)}function be(e){return e===void 0}function Xt(e){return typeof e=="object"&&e!==null}function gi(e,t,o){var i={};return Xt(e)?(Object.keys(t).forEach((function(s){be(e[s])?i[s]=t[s]:Xt(t[s])?Xt(e[s])?i[s]=gi(e[s],t[s],o[s]):i[s]=e[s]?t[s]:o[s]:t[s]===!0||t[s]===!1?i[s]=!!e[s]:i[s]=e[s]})),i):e?t:o}function Ot(e){var t=Number(e);return Number.isNaN(t)?e:t}function Ri(e){return typeof(e=="number"||(function(t){return typeof t=="object"&&t!==null})(e)&&toString.call(e)=="[object Number]")&&!Hi(e)}function Hi(e){return e!=e}function Ni(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var Rt=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},Co=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},bi=function(e){this.type="move",this.directions=e},So=(function(){function e(t,o,i,s,r){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=s,this.element=o,this.anchor=r}return e.prototype.shift=function(){var t=this,o=t.element,i=t.anchor,s=t.position;if(o){var r=o.getBoundingClientRect(),a=r.left,l=r.top;return{left:s.left-a-i.left,top:s.top-l-i.top}}return{left:0,top:0}},e})(),wi={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=ht(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce((function(t,o){return{clientX:t.clientX+o.clientX/e.touches.length,clientY:t.clientY+o.clientY/e.touches.length}}),{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),o=t.left,i=t.right,s=t.bottom,r=t.top;this.anchor={left:e.clientX-o,top:e.clientY-r,bottom:s-e.clientY,right:i-e.clientX}},processMove:function(e,t){var o=ht(t);if(this.touches.length){if(this.touches.length===1&&o.length===1){var i=this.$refs.draggable;this.$emit("drag",new So(e,i,{left:o[0].clientX,top:o[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=o}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};wi.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"draggable",class:o.classname,onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)}),onMouseover:t[3]||(t[3]=function(){return r.onMouseOver&&r.onMouseOver.apply(r,arguments)}),onMouseleave:t[4]||(t[4]=function(){return r.onMouseLeave&&r.onMouseLeave.apply(r,arguments)})},[ft(e.$slots,"default")],34)};var si=He("vue-handler-wrapper"),Ui={name:"HandlerWrapper",components:{DraggableElement:wi},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,o=Oi(this.horizontalPosition,this.verticalPosition);e=si((je(t={},o.classname,!0),je(t,"disabled",this.disabled),t))}else e=si({disabled:this.disabled});return{root:e,draggable:si("draggable")}}},emits:["leave","enter","drag","drag-end"]};Ui.render=function(e,t,o,i,s,r){var a=Pe("DraggableElement");return x(),ce("div",{class:r.classes.root},[xe(a,{class:r.classes.draggable,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:lt((function(){return[ft(e.$slots,"default")]})),_:3},8,["class"])],2)};var zo=He("vue-line-wrapper"),Xi={name:"LineWrapper",components:{DraggableElement:wi},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return zo((je(e={},this.position,!0),je(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};Xi.render=function(e,t,o,i,s,r){var a=Pe("DraggableElement");return x(),ce(a,{class:r.classname,onDrag:t[1]||(t[1]=function(l){return e.$emit("drag",l)}),onDragEnd:t[2]||(t[2]=function(l){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(l){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(l){return e.$emit("enter")})},{default:lt((function(){return[ft(e.$slots,"default")]})),_:3},8,["class"])};var Ve=["left","right","top","bottom"],Mo=["left","right"],Ao=["top","bottom"],ko=["left","top"],Ro=["fill-area","fit-area","stencil","none"],Ei={left:0,top:0,width:0,height:0};function Fi(e,t,o){return!(o=o||["width","height","left","top"]).some((function(i){return e[i]!==t[i]}))}function Ye(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function wt(e,t){return{left:e.left-t.left,top:e.top-t.top}}function ye(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function Et(e,t){var o={left:0,top:0,right:0,bottom:0};return Ve.forEach((function(i){var s=t[i],r=Ye(e)[i];o[i]=s!==void 0&&r!==void 0?i==="left"||i==="top"?Math.max(0,s-r):Math.max(0,r-s):0})),o}function Xe(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function Yt(e){return{left:-e.left,top:-e.top}}function Ee(e,t){return W(W({},e),{left:e.left+t.left,top:e.top+t.top})}function Ie(e,t,o,i){if(t!==1){if(o){var s=ye(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(o.left-s.left)*(1-t),top:e.top+e.height*(1-t)/2+(o.top-s.top)*(1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function K(e){return e.width/e.height}function xt(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function yt(e,t){var o={left:0,top:0},i=Et(e,t);return i.left&&i.left>0?o.left=i.left:i.right&&i.right>0&&(o.left=-i.right),i.top&&i.top>0?o.top=i.top:i.bottom&&i.bottom>0&&(o.top=-i.bottom),o}function ai(e,t){var o;return t.minimum&&e<t.minimum?o=t.minimum:t.maximum&&e>t.maximum&&(o=t.maximum),o}function Vi(e,t){var o=K(e),i=K(t);return t.width<1/0&&t.height<1/0?o>i?{width:t.width,height:t.width/o}:{width:t.height*o,height:t.height}:t.width<1/0?{width:t.width,height:t.width/o}:t.height<1/0?{width:t.height*o,height:t.height}:e}function Yi(e,t){var o=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(o))+Math.abs(e.height*Math.sin(o)),height:Math.abs(e.width*Math.sin(o))+Math.abs(e.height*Math.cos(o))}}function at(e,t){var o=t*Math.PI/180;return{left:e.left*Math.cos(o)-e.top*Math.sin(o),top:e.left*Math.sin(o)+e.top*Math.cos(o)}}function qt(e,t){var o=Et(Ce(e,t),t);return o.left+o.right+o.top+o.bottom?o.left+o.right>o.top+o.bottom?Math.min((e.width+o.left+o.right)/e.width,xt(e,t)):Math.min((e.height+o.top+o.bottom)/e.height,xt(e,t)):1}function Ce(e,t,o){o===void 0&&(o=!1);var i=yt(e,t);return Ee(e,o?Yt(i):i)}function mi(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Eo(e,t){return W(W({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function qi(e,t,o){o===void 0&&(o=!0);var i={};return Ve.forEach((function(s){var r=e[s],a=t[s];r!==void 0&&a!==void 0?i[s]=s==="left"||s==="top"?o?Math.max(r,a):Math.min(r,a):o?Math.min(r,a):Math.max(r,a):a!==void 0?i[s]=a:r!==void 0&&(i[s]=r)})),i}function Zt(e,t){return qi(e,t,!0)}function _i(e){var t=e.size,o=e.aspectRatio,i=e.ignoreMinimum,s=e.sizeRestrictions;return!!((t.correctRatio||K(t)>=o.minimum&&K(t)<=o.maximum)&&t.height<=s.maxHeight&&t.width<=s.maxWidth&&t.width&&t.height&&(i||t.height>=s.minHeight&&t.width>=s.minWidth))}function Ti(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function nt(e){var t=e.width,o=e.height,i=e.sizeRestrictions,s={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},r={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,o))};function a(u,m){return m===void 0&&(m=!1),u.reduce((function(g,b){return _i({size:b,aspectRatio:s,sizeRestrictions:i,ignoreMinimum:m})&&(!g||Ti(b,{width:t,height:o})<Ti(g,{width:t,height:o}))?b:g}),null)}var l=[];s&&[s.minimum,s.maximum].forEach((function(u){u&&l.push({width:r.width,height:r.width/u,correctRatio:!0},{width:r.height*u,height:r.height,correctRatio:!0})})),_i({size:r,aspectRatio:s,sizeRestrictions:i})&&l.push(r);var n=a(l)||a(l,!0);return n&&{width:n.width,height:n.height}}function pi(e){var t=e.event,o=e.coordinates,i=e.positionRestrictions,s=i===void 0?{}:i,r=Ee(o,t.directions);return Ee(r,yt(r,s))}function Fo(e){var t=e.coordinates,o=e.transform,i=e.imageSize,s=e.sizeRestrictions,r=e.positionRestrictions,a=e.aspectRatio,l=e.visibleArea,n=function(m,g){return pi({coordinates:m,positionRestrictions:r,event:new bi({left:g.left-m.left,top:g.top-m.top})})},u=W({},t);return(Array.isArray(o)?o:[o]).forEach((function(m){var g={};be((g=typeof m=="function"?m({coordinates:u,imageSize:i,visibleArea:l}):m).width)&&be(g.height)||(u=(function(b,C){var D=W(W(W({},b),nt({width:C.width,height:C.height,sizeRestrictions:s,aspectRatio:a})),{left:0,top:0});return n(D,{left:b.left,top:b.top})})(u,W(W({},u),g))),be(g.left)&&be(g.top)||(u=n(u,W(W({},u),g)))})),u}function _o(e){e.event;var t=e.getAreaRestrictions,o=e.boundaries,i=e.coordinates,s=e.visibleArea;e.aspectRatio;var r=e.stencilSize,a=e.sizeRestrictions,l=e.positionRestrictions;e.stencilReference;var n,u,m,g=W({},i),b=W({},s),C=W({},r);n=K(C),u=K(g),m===void 0&&(m=.001),(n===0||u===0?Math.abs(u-n)<m:Math.abs(u/n)<1+m&&Math.abs(u/n)>1-m)||(g=W(W({},g),nt({sizeRestrictions:a,width:g.width,height:g.height,aspectRatio:{minimum:K(C),maximum:K(C)}})));var D=qt(b=Ie(b,g.width*o.width/(b.width*C.width)),t({visibleArea:b,type:"resize"}));return D!==1&&(b=Ie(b,D),g=Ie(g,D)),b=Ce(b=Ee(b,wt(ye(g),ye(b))),t({visibleArea:b,type:"move"})),{coordinates:g=Ce(g,Zt(Ye(b),l)),visibleArea:b}}function To(e){var t=e.event,o=e.getAreaRestrictions,i=e.boundaries,s=e.coordinates,r=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var a=e.positionRestrictions;e.stencilReference;var l=W({},s),n=W({},r);if(s&&r&&t.type!=="manipulateImage"){var u={width:0,height:0};n.width,i.width,K(i)>K(l)?(u.height=.8*i.height,u.width=u.height*K(l)):(u.width=.8*i.width,u.height=u.width*K(l));var m=qt(n=Ie(n,l.width*i.width/(n.width*u.width)),o({visibleArea:n,type:"resize"}));n=Ie(n,m),m!==1&&(u.height/=m,u.width/=m),n=Ce(n=Ee(n,wt(ye(l),ye(n))),o({visibleArea:n,type:"move"})),l=Ce(l,Zt(Ye(n),a))}return{coordinates:l,visibleArea:n}}function Do(e){var t=e.event,o=e.coordinates,i=e.visibleArea,s=e.getAreaRestrictions,r=W({},i),a=W({},o);if(t.type==="setCoordinates"){var l=Math.max(0,a.width-r.width),n=Math.max(0,a.height-r.height);l>n?r=Ie(r,Math.min(a.width/r.width,xt(r,s({visibleArea:r,type:"resize"})))):n>l&&(r=Ie(r,Math.min(a.height/r.height,xt(r,s({visibleArea:r,type:"resize"}))))),r=Ce(r=Ee(r,Yt(yt(a,Ye(r)))),s({visibleArea:r,type:"move"}))}return{visibleArea:r,coordinates:a}}function jo(e){var t=e.imageSize,o=e.visibleArea,i=e.coordinates,s=o||t;return{left:(o?o.left:0)+s.width/2-i.width/2,top:(o?o.top:0)+s.height/2-i.height/2}}function Po(e){var t=e.imageSize,o=e.visibleArea,i=e.aspectRatio,s=e.sizeRestrictions,r=o||t,a=Math.min(i.maximum||1/0,Math.max(i.minimum||0,K(r))),l=r.width<r.height?{width:.8*r.width,height:.8*r.width/a}:{height:.8*r.height,width:.8*r.height*a};return nt(W(W({},l),{aspectRatio:i,sizeRestrictions:s}))}function Io(e){var t,o,i=e.imageSize,s=e.visibleArea,r=e.boundaries,a=e.aspectRatio,l=e.sizeRestrictions,n=e.stencilSize,u=s||i;return K(u)>K(r)?o=(t=n.height*u.height/r.height)*K(n):t=(o=n.width*u.width/r.width)/K(n),nt({width:o,height:t,aspectRatio:a,sizeRestrictions:l})}function Lo(e){var t=e.getAreaRestrictions,o=e.coordinates,i=e.imageSize,s=K(e.boundaries);if(o){var r={height:Math.max(o.height,i.height),width:Math.max(o.width,i.width)},a=Vi({width:K(r)>s?r.width:r.height*s,height:K(r)>s?r.width/s:r.height},mi(t())),l={left:o.left+o.width/2-a.width/2,top:o.top+o.height/2-a.height/2,width:a.width,height:a.height},n=Et(o,Ye(W({left:0,top:0},i))),u={};return!n.left&&!n.right&&l.width<=i.width&&(u.left=0,u.right=i.width),!n.top&&!n.bottom&&l.height<=i.height&&(u.top=0,u.bottom=i.height),Ce(l,u)}var m=K(i);return a={height:m>s?i.height:i.width/s,width:m>s?i.height*s:i.width},{left:i.width/2-a.width/2,top:i.height/2-a.height/2,width:a.width,height:a.height}}function Wt(e,t){return qi(e,Ye(t))}function Bo(e){var t=e.event,o=e.coordinates,i=e.visibleArea,s=e.sizeRestrictions,r=e.getAreaRestrictions,a=e.positionRestrictions,l=e.adjustStencil,n=t.scale,u=t.move,m=W({},i),g=W({},o),b=1,C=1,D=n.factor&&Math.abs(n.factor-1)>.001;m=Ee(m,{left:u.left||0,top:u.top||0});var E={stencil:{minimum:Math.max(s.minWidth?s.minWidth/g.width:0,s.minHeight?s.minHeight/g.height:0),maximum:Math.min(s.maxWidth?s.maxWidth/g.width:1/0,s.maxHeight?s.maxHeight/g.height:1/0,xt(g,a))},area:{maximum:xt(m,r({visibleArea:m,type:"resize"}))}};n.factor&&D&&(n.factor<1?(C=Math.max(n.factor,E.stencil.minimum))>1&&(C=1):n.factor>1&&(C=Math.min(n.factor,Math.min(E.area.maximum,E.stencil.maximum)))<1&&(C=1)),C&&(m=Ie(m,C,n.center));var T=o.left-i.left,ie=i.width+i.left-(o.width+o.left),de=o.top-i.top,ue=i.height+i.top-(o.height+o.top);return m=Ce(m=Ee(m,yt(m,{left:a.left!==void 0?a.left-T*C:void 0,top:a.top!==void 0?a.top-de*C:void 0,bottom:a.bottom!==void 0?a.bottom+ue*C:void 0,right:a.right!==void 0?a.right+ie*C:void 0})),r({visibleArea:m,type:"move"})),g.width=g.width*C,g.height=g.height*C,g.left=m.left+T*C,g.top=m.top+de*C,g=Ce(g,Zt(Ye(m),a)),n.factor&&D&&l&&(n.factor>1?b=Math.min(E.area.maximum,n.factor)/C:n.factor<1&&(b=Math.max(g.height/m.height,g.width/m.width,n.factor/C)),b!==1&&(m=Ee(m=Ce(m=Ie(m,b,n.factor>1?n.center:ye(g)),r({visibleArea:m,type:"move"})),Yt(yt(g,Ye(m)))))),{coordinates:g,visibleArea:m}}function Oo(e){var t=e.aspectRatio,o=e.getAreaRestrictions,i=e.coordinates,s=e.visibleArea,r=e.sizeRestrictions,a=e.positionRestrictions,l=e.imageSize,n=e.previousImageSize,u=e.angle,m=W({},i),g=W({},s),b=at(ye(W({left:0,top:0},n)),u);return(m=W(W({},nt({sizeRestrictions:r,aspectRatio:t,width:m.width,height:m.height})),at(ye(m),u))).left-=b.left-l.width/2+m.width/2,m.top-=b.top-l.height/2+m.height/2,g=Ie(g,qt(g,o({visibleArea:g,type:"resize"}))),{coordinates:m=Ce(m,a),visibleArea:g=Ce(g=Ee(g,wt(ye(m),ye(i))),o({visibleArea:g,type:"move"}))}}function Wo(e){var t=e.flip,o=e.previousFlip,i=e.rotate,s=e.getAreaRestrictions,r=e.coordinates,a=e.visibleArea,l=e.imageSize,n=W({},r),u=W({},a),m=o.horizontal!==t.horizontal,g=o.vertical!==t.vertical;if(m||g){var b=at({left:l.width/2,top:l.height/2},-i),C=at(ye(n),-i),D=at({left:m?b.left-(C.left-b.left):C.left,top:g?b.top-(C.top-b.top):C.top},i);n=Ee(n,wt(D,ye(n))),C=at(ye(u),-i),u=Ce(u=Ee(u,wt(D=at({left:m?b.left-(C.left-b.left):C.left,top:g?b.top-(C.top-b.top):C.top},i),ye(u))),s({visibleArea:u,type:"move"}))}return{coordinates:n,visibleArea:u}}function Di(e){var t=e.directions,o=e.coordinates,i=e.positionRestrictions,s=i===void 0?{}:i,r=e.sizeRestrictions,a=e.preserveRatio,l=e.compensate,n=W({},t),u=Xe(o,n).width,m=Xe(o,n).height;u<0&&(n.left<0&&n.right<0?(n.left=-(o.width-r.minWidth)/(n.left/n.right),n.right=-(o.width-r.minWidth)/(n.right/n.left)):n.left<0?n.left=-(o.width-r.minWidth):n.right<0&&(n.right=-(o.width-r.minWidth))),m<0&&(n.top<0&&n.bottom<0?(n.top=-(o.height-r.minHeight)/(n.top/n.bottom),n.bottom=-(o.height-r.minHeight)/(n.bottom/n.top)):n.top<0?n.top=-(o.height-r.minHeight):n.bottom<0&&(n.bottom=-(o.height-r.minHeight)));var g=Et(Xe(o,n),s);l&&(g.left&&g.left>0&&g.right===0?(n.right+=g.left,n.left-=g.left):g.right&&g.right>0&&g.left===0&&(n.left+=g.right,n.right-=g.right),g.top&&g.top>0&&g.bottom===0?(n.bottom+=g.top,n.top-=g.top):g.bottom&&g.bottom>0&&g.top===0&&(n.top+=g.bottom,n.bottom-=g.bottom),g=Et(Xe(o,n),s));var b={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(Ve.forEach((function(E){var T=g[E];T&&n[E]&&(b[E]=Math.max(0,1-T/n[E]))})),a){var C=Math.min.apply(null,Ve.map((function(E){return b[E]})));C!==1/0&&Ve.forEach((function(E){n[E]*=C}))}else Ve.forEach((function(E){b[E]!==1/0&&(n[E]*=b[E])}));if(u=Xe(o,n).width,m=Xe(o,n).height,n.right+n.left&&(u>r.maxWidth?b.width=(r.maxWidth-o.width)/(n.right+n.left):u<r.minWidth&&(b.width=(r.minWidth-o.width)/(n.right+n.left))),n.bottom+n.top&&(m>r.maxHeight?b.height=(r.maxHeight-o.height)/(n.bottom+n.top):m<r.minHeight&&(b.height=(r.minHeight-o.height)/(n.bottom+n.top))),a){var D=Math.min(b.width,b.height);D!==1/0&&Ve.forEach((function(E){n[E]*=D}))}else b.width!==1/0&&Mo.forEach((function(E){n[E]*=b.width})),b.height!==1/0&&Ao.forEach((function(E){n[E]*=b.height}));return n}function Ht(e,t,o){return t==0&&o==0?e/2:t==0?0:o==0?e:e*Math.abs(t/(t+o))}var Ho=He("vue-simple-handler"),No=He("vue-simple-handler-wrapper"),xi={name:"SimpleHandler",components:{HandlerWrapper:Ui},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(je(e={},this.horizontalPosition,!!this.horizontalPosition),je(e,this.verticalPosition,!!this.verticalPosition),je(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),je(e,"hover",this.hover),e);return{default:me(Ho(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:me(No(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};xi.render=function(e,t,o,i,s,r){var a=Pe("HandlerWrapper");return x(),ce(a,{class:r.classes.wrapper,"vertical-position":o.verticalPosition,"horizontal-position":o.horizontalPosition,disabled:o.disabled,onDrag:r.onDrag,onDragEnd:r.onDragEnd,onEnter:r.onEnter,onLeave:r.onLeave},{default:lt((function(){return[xe("div",{class:r.classes.default},null,2)]})),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Uo=He("vue-simple-line"),Xo=He("vue-simple-line-wrapper"),yi={name:"SimpleLine",components:{LineWrapper:Xi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:me(Uo(je({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:me(Xo(je({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};yi.render=function(e,t,o,i,s,r){var a=Pe("LineWrapper");return x(),ce(a,{class:r.classes.wrapper,position:o.position,disabled:o.disabled,onDrag:r.onDrag,onDragEnd:r.onDragEnd,onEnter:r.onEnter,onLeave:r.onLeave},{default:lt((function(){return[xe("div",{class:r.classes.root},null,2)]})),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var li=He("vue-bounding-box"),Vo=["east","west",null],Yo=["south","north",null],Zi={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return xi}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return yi}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Vo.forEach((function(t){Yo.forEach((function(o){if(t!==o){var i=Oi(t,o),s=i.name,r=i.classname;e.push({name:s,classname:r,verticalDirection:o,horizontalDirection:t})}}))})),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,o=this.linesClasses,i=this.linesWrappersClasses;return{root:li(),handlers:e,handlersWrappers:t,lines:o,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach((function(o){o.horizontalDirection&&o.verticalDirection||!e.lines[o.name]||t.push({name:o.name,component:e.linesComponent,class:me(e.classes.lines.default,e.classes.lines[o.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:me(e.classes.linesWrappers.default,e.classes.linesWrappers[o.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:o.verticalDirection,horizontalDirection:o.horizontalDirection,disabled:!e.resizable})})),t},handlerNodes:function(){var e=this,t=[],o=this.width,i=this.height;return this.points.forEach((function(s){if(e.handlers[s.name]){var r={name:s.name,component:e.handlersComponent,class:me(e.classes.handlers.default,e.classes.handlers[s.name]),wrapperClass:me(e.classes.handlersWrappers.default,e.classes.handlersWrappers[s.name]),hoverClass:e.classes.handlers.hover,verticalDirection:s.verticalDirection,horizontalDirection:s.horizontalDirection,disabled:!e.resizable};if(o&&i){var a=s.horizontalDirection,l=s.verticalDirection,n=a==="east"?o:a==="west"?0:o/2,u=l==="south"?i:l==="north"?0:i/2;r.wrapperClass=li("handler"),r.wrapperStyle={transform:"translate(".concat(n,"px, ").concat(u,"px)")},e.transitions&&e.transitions.enabled&&(r.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else r.wrapperClass=li("handler",je({},s.classname,!0));t.push(r)}})),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,o){var i,s=e.shift(),r=s.left,a=s.top,l={left:0,right:0,top:0,bottom:0};t==="west"?l.left-=r:t==="east"&&(l.right+=r),o==="north"?l.top-=a:o==="south"&&(l.bottom+=a),!o&&t?i="width":o&&!t&&(i="height"),this.resizable&&this.$emit("resize",new Co(l,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:o==="south"||!o,top:o==="north"||!o},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};Zi.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"box",class:r.classes.root,style:r.style},[ft(e.$slots,"default"),xe("div",null,[(x(!0),ce(Se,null,We(r.lineNodes,(function(a){return x(),ce(Vt(a.component),{key:a.name,"default-class":a.class,"hover-class":a.hoverClass,"wrapper-class":a.wrapperClass,position:a.name,disabled:a.disabled,onDrag:function(l){return r.onHandlerDrag(l,a.horizontalDirection,a.verticalDirection)},onDragEnd:t[1]||(t[1]=function(l){return r.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])})),128))]),(x(!0),ce(Se,null,We(r.handlerNodes,(function(a){return x(),ce("div",{key:a.name,style:a.wrapperStyle,class:a.wrapperClass},[(x(),ce(Vt(a.component),{"default-class":a.class,"hover-class":a.hoverClass,"wrapper-class":a.wrapperClass,"horizontal-position":a.horizontalDirection,"vertical-position":a.verticalDirection,disabled:a.disabled,onDrag:function(l){return r.onHandlerDrag(l,a.horizontalDirection,a.verticalDirection)},onDragEnd:t[2]||(t[2]=function(l){return r.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)})),128))],6)};var qo=He("vue-draggable-area"),Gi={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:qo()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=ht(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):Ni({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),o=t.left,i=t.top;this.anchor={x:e.clientX-o,y:e.clientY-i}},processMove:function(e,t){var o=ht(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),s=i.left,r=i.top;this.touches.length===1&&o.length===1&&this.$emit("move",new bi({left:o[0].clientX-(s+this.anchor.x),top:o[0].clientY-(r+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};Gi.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)})},[ft(e.$slots,"default")],544)};function ci(e){var t,o;return{rotate:e.rotate||0,flip:{horizontal:((t=e?.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((o=e?.flip)===null||o===void 0?void 0:o.vertical)||!1}}}function Zo(e){return new Promise((function(t,o){try{if(e)if(/^data:/i.test(e))t((function(n){n=n.replace(/^data:([^;]+);base64,/gim,"");for(var u=atob(n),m=u.length,g=new ArrayBuffer(m),b=new Uint8Array(g),C=0;C<m;C++)b[C]=u.charCodeAt(C);return g})(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(n){t(n.target.result)},r=e,a=function(n){i.readAsArrayBuffer(n)},(l=new XMLHttpRequest).open("GET",r,!0),l.responseType="blob",l.onload=function(){this.status!=200&&this.status!==0||a(this.response)},l.send()}else{var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===4&&(s.status===200||s.status===0?t(s.response):o("Warning: could not load an image to parse its orientation"),s=null)},s.onprogress=function(){s.getResponseHeader("content-type")!=="image/jpeg"&&s.abort()},s.withCredentials=!1,s.open("GET",e,!0),s.responseType="arraybuffer",s.send(null)}else o("Error: the image is empty")}catch(n){o(n)}var r,a,l}))}function Qi(e){var t=e.rotate,o=e.flip,i=e.scaleX,s=e.scaleY,r="";return r+=" rotate("+t+"deg) ",r+=" scaleX("+i*(o.horizontal?-1:1)+") ",r+=" scaleY("+s*(o.vertical?-1:1)+") "}function Go(e){try{var t,o=new DataView(e),i=void 0,s=void 0,r=void 0,a=void 0;if(o.getUint8(0)===255&&o.getUint8(1)===216)for(var l=o.byteLength,n=2;n+1<l;){if(o.getUint8(n)===255&&o.getUint8(n+1)===225){r=n;break}n++}if(r&&(i=r+10,(function(C,D,E){var T,ie="";for(T=D,E+=D;T<E;T++)ie+=String.fromCharCode(C.getUint8(T));return ie})(o,r+4,4)==="Exif")){var u=o.getUint16(i);if(((s=u===18761)||u===19789)&&o.getUint16(i+2,s)===42){var m=o.getUint32(i+4,s);m>=8&&(a=i+m)}}if(a){for(var g=o.getUint16(a,s),b=0;b<g;b++)if(n=a+12*b+2,o.getUint16(n,s)===274){n+=8,t=o.getUint16(n,s),o.setUint16(n,1,s);break}}return t}catch{return null}}function ji(e,t){var o=t.getBoundingClientRect(),i=o.left,s=o.top,r={left:0,top:0},a=0;return e.forEach((function(l){r.left+=(l.clientX-i)/e.length,r.top+=(l.clientY-s)/e.length})),e.forEach((function(l){a+=Ni({x:r.left,y:r.top},{x:l.clientX-i,y:l.clientY-s})})),{centerMass:r,spread:a,count:e.length}}var Ji={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=fi(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new Rt({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var o=ji(t,this.$refs.container),i=this.oldGeometricProperties;i.count===o.count&&i.count>1&&this.$emit("resize",new Rt({left:i.centerMass.left-o.centerMass.left,top:i.centerMass.top-o.centerMass.top},{factor:i.spread/o.spread,center:o.centerMass})),this.oldGeometricProperties=o}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,o=t.getBoundingClientRect(),i=o.left,s=o.top,r=o.bottom,a=o.right;this.touches=ht(e.touches).filter((function(l){return l.clientX>i&&l.clientX<a&&l.clientY>s&&l.clientY<r})),this.oldGeometricProperties=ji(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var o=ht(e.touches).filter((function(i){return!i.identifier||t.touches.find((function(s){return s.identifier===i.identifier}))}));this.processEvent(e)&&(this.processMove(e,o),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),o=t.left,i=t.top,s=1+this.wheelResize.ratio*(a=e.deltaY||e.detail||e.wheelDelta,(l=+a)==0||Hi(l)?l:l>0?1:-1),r={left:e.clientX-o,top:e.clientY-i};this.$emit("resize",new Rt({},{factor:s,center:r})),this.touches.length||this.debouncedProcessEnd()}var a,l}},emits:["resize","move","transform-end"]};Ji.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return r.onTouchStart&&r.onTouchStart.apply(r,arguments)}),onMousedown:t[2]||(t[2]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)}),onWheel:t[3]||(t[3]=function(){return r.onWheel&&r.onWheel.apply(r,arguments)})},[ft(e.$slots,"default")],544)};var vi={components:{TransformableImage:Ji},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};vi.render=function(e,t,o,i,s,r){var a=Pe("transformable-image");return x(),ce(a,{"touch-move":o.touchMove,"touch-resize":o.touchResize,"mouse-move":o.mouseMove,"wheel-resize":o.wheelResize,onMove:t[1]||(t[1]=function(l){return e.$emit("move",l)}),onResize:t[2]||(t[2]=function(l){return e.$emit("resize",l)})},{default:lt((function(){return[ft(e.$slots,"default")]})),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var Nt=He("vue-preview"),Ki={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:Nt({fill:this.fill}),wrapper:Nt("wrapper"),imageWrapper:Nt("image-wrapper"),image:me(Nt("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=J(J({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),o=this.imageSize.width,i=this.imageSize.height,s=Yi({width:o,height:i},t.rotate),r={width:"".concat(o,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},a={rotate:{left:(o-s.width)*t.scaleX/2,top:(i-s.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*o/2,top:(1-t.scaleY)*i/2}};return r.transform=`translate(
				`.concat(-this.coordinates.left/e-a.rotate.left-a.scale.left,"px,").concat(-this.coordinates.top/e-a.rotate.top-a.scale.top,"px) ")+Qi(t),this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){e.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};Ki.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"root",class:r.classes.root,style:r.style},[xe("div",{ref:"wrapper",class:r.classes.wrapper,style:r.wrapperStyle},[ze(xe("img",{ref:"image",src:o.image&&o.image.src,class:r.classes.image,style:r.imageStyle},null,14,["src"]),[[Pi,o.image&&o.image.src]])],6)],6)};var $i={components:{Preview:Ki},inheritAttrs:!1};$i.render=function(e,t,o,i,s,r){var a=Pe("preview");return x(),ce(a,Ii(e.$attrs,{fill:!0}),null,16)};var di=He("vue-rectangle-stencil"),eo={name:"RectangleStencil",components:{StencilPreview:$i,BoundingBox:Zi,DraggableArea:Gi},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return xi}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return yi}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:me(di({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:me(di("preview"),this.previewClass),boundingBox:me(di("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,o=e.width,i=e.left,s=e.top,r={width:"".concat(o,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(s,"px)")};return this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};eo.render=function(e,t,o,i,s,r){var a=Pe("stencil-preview"),l=Pe("draggable-area"),n=Pe("bounding-box");return x(),ce("div",{class:r.classes.stencil,style:r.style},[xe(n,{width:o.stencilCoordinates.width,height:o.stencilCoordinates.height,transitions:o.transitions,class:r.classes.boundingBox,handlers:o.handlers,"handlers-component":o.handlersComponent,"handlers-classes":o.handlersClasses,"handlers-wrappers-classes":o.handlersWrappersClasses,lines:o.lines,"lines-component":o.linesComponent,"lines-classes":o.linesClasses,"lines-wrappers-classes":o.linesWrappersClasses,resizable:o.resizable,onResize:r.onResize,onResizeEnd:r.onResizeEnd},{default:lt((function(){return[xe(l,{movable:o.movable,onMove:r.onMove,onMoveEnd:r.onMoveEnd},{default:lt((function(){return[xe(a,{image:o.image,coordinates:o.coordinates,width:o.stencilCoordinates.width,height:o.stencilCoordinates.height,class:r.classes.preview,transitions:o.transitions},null,8,["image","coordinates","width","height","class","transitions"])]})),_:1},8,["movable","onMove","onMoveEnd"])]})),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Qo=["transitions"],ot=He("vue-advanced-cropper"),to={name:"Cropper",components:{BackgroundWrapper:vi},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return eo}},backgroundWrapperComponent:{type:[Object,String],default:function(){return vi}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Ro.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,o=e.coordinates,i=e.aspectRatio,s=e.positionRestrictions,r=e.sizeRestrictions,a=W(W({},o),{right:o.left+o.width,bottom:o.top+o.height}),l=t.params||{},n=W({},t.directions),u=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};r.widthFrozen&&(n.left=0,n.right=0),r.heightFrozen&&(n.top=0,n.bottom=0),Ve.forEach((function(we){u[we]||(n[we]=0)}));var m=Xe(a,n=Di({coordinates:a,directions:n,sizeRestrictions:r,positionRestrictions:s})).width,g=Xe(a,n).height,b=l.preserveRatio?K(a):ai(m/g,i);if(b){var C=l.respectDirection;if(C||(C=a.width>=a.height||b===1?"width":"height"),C==="width"){var D=m/b-a.height;if(u.top&&u.bottom){var E=n.top,T=n.bottom;n.bottom=Ht(D,T,E),n.top=Ht(D,E,T)}else u.bottom?n.bottom=D:u.top?n.top=D:u.right?n.right=0:u.left&&(n.left=0)}else if(C==="height"){var ie=a.width-g*b;if(u.left&&u.right){var de=n.left,ue=n.right;n.left=-Ht(ie,de,ue),n.right=-Ht(ie,ue,de)}else u.left?n.left=-ie:u.right?n.right=-ie:u.top?n.top=0:u.bottom&&(n.bottom=0)}n=Di({directions:n,coordinates:a,sizeRestrictions:r,positionRestrictions:s,preserveRatio:!0,compensate:l.compensate})}return m=Xe(a,n).width,g=Xe(a,n).height,(b=l.preserveRatio?K(a):ai(m/g,i))&&Math.abs(b-m/g)>.001&&Ve.forEach((function(we){u[we]||(n[we]=0)})),pi({event:new bi({left:-n.left,top:-n.top}),coordinates:{width:o.width+n.right+n.left,height:o.height+n.top+n.bottom,left:o.left,top:o.top},positionRestrictions:s})}},moveAlgorithm:{type:Function,default:pi},initStretcher:{type:Function,default:function(e){var t=e.stretcher,o=e.imageSize,i=K(o);t.style.width=o.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,o=e.coordinates,i=e.aspectRatio,s=e.sizeRestrictions,r=e.positionRestrictions,a=W(W({},o),nt({width:o.width,height:o.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,s.minHeight),minWidth:Math.min(t.width,s.minWidth)}}));return a=Ce(a=Ee(a,wt(ye(o),ye(a))),Zt(Ye(t),r))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,o=e.boundaries,i=e.getAreaRestrictions,s=e.coordinates,r=W({},t);r.height=r.width/K(o),r.top+=(t.height-r.height)/2,(s.height-r.height>0||s.width-r.width>0)&&(r=Ie(r,Math.max(s.height/r.height,s.width/r.width)));var a=Yt(yt(s,Ye(r=Ie(r,qt(r,i({visibleArea:r,type:"resize"}))))));return r.width<s.width&&(a.left=0),r.height<s.height&&(a.top=0),r=Ce(r=Ee(r,a),i({visibleArea:r,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,o=e.boundaries,i=e.imageSize,s=e.imageRestriction,r=e.type,a={};return s==="fill-area"?a={left:0,top:0,right:i.width,bottom:i.height}:s==="fit-area"&&(K(o)>K(i)?(a={top:0,bottom:i.height},t&&r==="move"&&(t.width>i.width?(a.left=-(t.width-i.width)/2,a.right=i.width-a.left):(a.left=0,a.right=i.width))):(a={left:0,right:i.width},t&&r==="move"&&(t.height>i.height?(a.top=-(t.height-i.height)/2,a.bottom=i.height-a.top):(a.top=0,a.bottom=i.height)))),a}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,o={};return e.imageRestriction!=="none"&&(o={left:0,top:0,right:t.width,bottom:t.height}),o}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:J({},Ei)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=(function(t){return t*Math.PI/180})(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=gi(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:gi(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:be(this.minWidth)?0:Ot(this.minWidth),minHeight:be(this.minHeight)?0:Ot(this.minHeight),maxWidth:be(this.maxWidth)?1/0:Ot(this.maxWidth),maxHeight:be(this.maxHeight)?1/0:Ot(this.maxHeight)});if(e=(function(i){var s=i.areaRestrictions,r=i.sizeRestrictions,a=i.boundaries,l=i.positionRestrictions,n=W(W({},r),{minWidth:r.minWidth!==void 0?r.minWidth:0,minHeight:r.minHeight!==void 0?r.minHeight:0,maxWidth:r.maxWidth!==void 0?r.maxWidth:1/0,maxHeight:r.maxHeight!==void 0?r.maxHeight:1/0});l.left!==void 0&&l.right!==void 0&&(n.maxWidth=Math.min(n.maxWidth,l.right-l.left)),l.bottom!==void 0&&l.top!==void 0&&(n.maxHeight=Math.min(n.maxHeight,l.bottom-l.top));var u=mi(s),m=Vi(a,u);return u.width<1/0&&(!n.maxWidth||n.maxWidth>m.width)&&(n.maxWidth=Math.min(n.maxWidth,m.width)),u.height<1/0&&(!n.maxHeight||n.maxHeight>m.height)&&(n.maxHeight=Math.min(n.maxHeight,m.height)),n.minWidth>n.maxWidth&&(n.minWidth=n.maxWidth,n.widthFrozen=!0),n.minHeight>n.maxHeight&&(n.minHeight=n.maxHeight,n.heightFrozen=!0),n})({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),o=mi(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,o.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,o.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:ot(),image:me(ot("image"),this.imageClass),stencil:ot("stencil"),boundaries:me(ot("boundaries"),this.boundariesClass),stretcher:me(ot("stretcher")),background:me(ot("background"),this.backgroundClass),foreground:me(ot("foreground"),this.foregroundClass),imageWrapper:me(ot("image-wrapper")),cropperWrapper:me(ot("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,o=e.height,i=e.left,s=e.top;return{width:t/this.coefficient,height:o/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(s-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},o={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=J(J({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),s={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-o.left-this.imageTransforms.translateX,"px, ").concat(-t.top-o.top-this.imageTransforms.translateY,"px)")+Qi(i)};return this.transitionsOptions.enabled&&(s.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),s}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick((function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(o){return e[o]!==t[o]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=fi(this.update,this.debounce),this.debouncedDisableTransitions=fi(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(J({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:J({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var o=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?J({},this.visibleArea):null,imageTransforms:t,get canvas(){return o.canvas?o.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?J({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,s=i===void 0||i;this.onManipulateImage(new Rt({},{factor:1/e,center:t}),{normalize:!1,transitions:s})},move:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,s=i===void 0||i;this.onManipulateImage(new Rt({left:e||0,top:t||0}),{normalize:!1,transitions:s})},setCoordinates:function(e){var t=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.autoZoom,s=i===void 0||i,r=o.transitions,a=r===void 0||r;this.$nextTick((function(){t.imageLoaded?(t.transitionsActive||(a&&t.enableTransitions(),t.coordinates=t.applyTransform(e),s&&t.runAutoZoom("setCoordinates"),a&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e}))},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then((function(){e.onChange()})):this.resetVisibleArea().then((function(){e.onChange()}))},reset:function(){var e=this;return this.resetVisibleArea().then((function(){e.onChange(!1)}))},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){e(),t.awaiting=!1})))},prepareResult:function(e){return this.roundResult?(function(t){var o=t.coordinates,i=t.sizeRestrictions,s=t.positionRestrictions,r={width:Math.round(o.width),height:Math.round(o.height),left:Math.round(o.left),top:Math.round(o.top)};return r.width>i.maxWidth?r.width=Math.floor(o.width):r.width<i.minWidth&&(r.width=Math.ceil(o.width)),r.height>i.maxHeight?r.height=Math.floor(o.height):r.height<i.minHeight&&(r.height=Math.ceil(o.height)),Ce(r,s)})(J(J({},this.getPublicProperties()),{},{positionRestrictions:Wt(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,o,i){var s=this.autoZoomAlgorithm;s||(s=this.stencilSize?_o:this.autoZoom?To:Do);var r=s({event:{type:e,params:i},visibleArea:t,coordinates:o,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return J(J({},r),{},{changed:!Fi(r.visibleArea,t)||!Fi(r.coordinates,o)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.transitions,i=o!==void 0&&o,s=xo(t,Qo),r=this.processAutoZoom(e,this.visibleArea,this.coordinates,s),a=r.visibleArea,l=r.coordinates,n=r.changed;i&&n&&this.enableTransitions(),this.visibleArea=a,this.coordinates=l,i&&n&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return(function(t){var o=t.event,i=t.visibleArea,s=t.coefficient;if(o.type==="manipulateImage")return W(W({},o),{move:{left:o.move&&o.move.left?s*o.move.left:0,top:o.move&&o.move.top?s*o.move.top:0},scale:{factor:o.scale&&o.scale.factor?o.scale.factor:1,center:o.scale&&o.scale.center?{left:o.scale.center.left*s+i.left,top:o.scale.center.top*s+i.top}:null}});if(o.type==="resize"){var r=W(W({},o),{directions:W({},o.directions)});return Ve.forEach((function(l){r.directions[l]*=s})),r}if(o.type==="move"){var a=W(W({},o),{directions:W({},o.directions)});return ko.forEach((function(l){a.directions[l]*=s})),a}return o})(J(J({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,o=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?(function(l,n,u){var m=u.rotate,g=u.flip,b={width:n.naturalWidth,height:n.naturalHeight},C=Yi(b,m),D=l.getContext("2d");l.height=C.height,l.width=C.width,D.save();var E=at(ye(W({left:0,top:0},b)),m);return D.translate(-(E.left-C.width/2),-(E.top-C.height/2)),D.rotate(m*Math.PI/180),D.translate(g.horizontal?b.width:0,g.vertical?b.height:0),D.scale(g.horizontal?-1:1,g.vertical?-1:1),D.drawImage(n,0,0,b.width,b.height),D.restore(),l})(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=J({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),s=function(l){return l.find((function(n){return u=n,!Number.isNaN(parseFloat(u))&&isFinite(u);var u}))},r=nt({sizeRestrictions:{minWidth:s([i.width,i.minWidth])||0,minHeight:s([i.height,i.minHeight])||0,maxWidth:s([i.width,i.maxWidth])||1/0,maxHeight:s([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&r.width*r.height>i.maxArea){var a=Math.sqrt(i.maxArea/(r.width*r.height));r={width:Math.round(a*r.width),height:Math.round(a*r.height)}}return(function(l,n,u,m,g){l.width=m?m.width:u.width,l.height=m?m.height:u.height;var b=l.getContext("2d");b.clearRect(0,0,l.width,l.height),g&&(g.imageSmoothingEnabled&&(b.imageSmoothingEnabled=g.imageSmoothingEnabled),g.imageSmoothingQuality&&(b.imageSmoothingQuality=g.imageSmoothingQuality),g.fillColor&&(b.fillStyle=g.fillColor,b.fillRect(0,0,l.width,l.height),b.save()));var C=u.left<0?-u.left:0,D=u.top<0?-u.top:0;b.drawImage(n,u.left+C,u.top+D,u.width,u.height,C*(l.width/u.width),D*(l.height/u.height),l.width,l.height)})(e,o,this.coordinates,r,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=this.visibleArea&&t?Eo(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?Wt(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return Fo({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:o,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?Io:Po);var o=this.sizeRestrictions;o.minWidth,o.minHeight,o.maxWidth,o.maxHeight;var i=pt(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,s=this.defaultPosition||jo,r=[i,function(a){var l=a.coordinates;return J({},pt(s)?s({coordinates:l,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&r.push.apply(r,ht(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(r,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout((function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,o=this.$refs.cropper;return this.initStretcher({cropper:o,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then((function(){var i={cropper:o,imageSize:e.imageSize};if(pt(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=(function(s){var r=s.cropper,a=s.imageSize,l=r.clientHeight,n=r.clientWidth,u=l,m=a.width*l/a.height;return m>n&&(m=n,u=a.height*n/a.width),{width:m,height:u}})(i):e.boundaries=(function(s){var r=s.cropper;return{width:r.clientWidth,height:r.clientHeight}})(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=J(J({},this.defaultImageTransforms),{},{flip:J({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then((function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,o,i,s,r,a,l=e.defaultVisibleArea||Lo;e.visibleArea=pt(l)?l({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},o=t.visibleArea,i=t.boundaries,s=t.getAreaRestrictions,r=W({},o),a=K(i),r.width/r.height!==a&&(r.height=r.width/a),Ce(r,s({visibleArea:r,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")})).catch((function(){e.visibleArea=null}))},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then((function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")})).catch((function(){e.visibleArea=null}))},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if((function(s){if(ki(s))return!1;var r=window.location,a=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(s)||[],l={protocol:a[1]||"",host:a[2]||"",port:a[3]||""},n=function(u){return u.port||((u.protocol||r.protocol)==="http"?80:433)};return!(!l.protocol&&!l.host&&!l.port||l.protocol&&l.protocol==r.protocol&&l.host&&l.host==r.host&&l.host&&n(l)==n(r))})(this.src)){var o=be(this.crossOrigin)?this.canvas:this.crossOrigin;o===!0&&(o="anonymous"),this.imageAttributes.crossOrigin=o||null}if(this.checkOrientation){var i=(e=this.src,new Promise((function(s){Zo(e).then((function(r){var a=Go(r);s(r?{source:e,arrayBuffer:r,orientation:a}:{source:e,arrayBuffer:null,orientation:null})})).catch((function(r){console.warn(r),s({source:e,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){i.then(t.onParseImage)}),this.transitionTime)}else setTimeout((function(){t.onParseImage({source:t.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then((function(){e.$emit("ready"),e.onChange(!1)})))},onParseImage:function(e){var t=this,o=e.source,i=e.arrayBuffer,s=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&s&&s>1?Wi(o)||!ki(o)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=(function(r){for(var a=[],l=new Uint8Array(r);l.length>0;){var n=l.subarray(0,8192);a.push(String.fromCharCode.apply(null,Array.from?Array.from(n):n.slice())),l=l.subarray(8192)}return"data:image/jpeg;base64,"+btoa(a.join(""))})(i):this.imageAttributes.src=o,pt(this.defaultTransforms)?this.appliedImageTransforms=ci(this.defaultTransforms()):Xt(this.defaultTransforms)?this.appliedImageTransforms=ci(this.defaultTransforms):this.appliedImageTransforms=(function(r){var a=ci({});if(r)switch(r){case 2:a.flip.horizontal=!0;break;case 3:a.rotate=-180;break;case 4:a.flip.vertical=!0;break;case 5:a.rotate=90,a.flip.vertical=!0;break;case 6:a.rotate=90;break;case 7:a.rotate=90,a.flip.horizontal=!0;break;case 8:a.rotate=-90}return a})(s),this.defaultImageTransforms=J(J({},this.appliedImageTransforms),{},{flip:J({},this.appliedImageTransforms.flip)}),this.$nextTick((function(){var r=t.$refs.image;r&&r.complete&&((function(a){return!!a.naturalWidth})(r)?t.onSuccessLoadImage():t.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender((function(){t.coordinates=t.moveAlgorithm(J(J({},t.getPublicProperties()),{},{positionRestrictions:Wt(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()}))},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var o=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(J(J({},t.getPublicProperties()),{},{positionRestrictions:Wt(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(o.maxWidth,t.visibleArea.width),maxHeight:Math.min(o.maxHeight,t.visibleArea.height),minWidth:Math.max(o.minWidth,i),minHeight:Math.max(o.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1}))},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var o=t.transitions,i=o!==void 0&&o,s=t.normalize,r=s===void 0||s;i&&this.enableTransitions();var a=Bo(J(J({},this.getPublicProperties()),{},{event:r?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=a.visibleArea,n=a.coordinates;this.visibleArea=l,this.coordinates=n,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,o=e.type,i=o===void 0?"move":o;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,o,i=this.stencilProps,s=i.aspectRatio,r=i.minAspectRatio,a=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var l=this.$refs.stencil.aspectRatios();t=l.minimum,o=l.maximum}if(be(t)&&(t=be(s)?r:s),be(o)&&(o=be(s)?a:s),!e&&(be(t)||be(o))){var n=this.getStencilSize(),u=n?K(n):null;be(t)&&(t=Ri(u)?u:void 0),be(o)&&(o=Ri(u)?u:void 0)}return{minimum:t,maximum:o}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,o=e.stencilSize,i=e.aspectRatio,ai(K(s=pt(o)?o({boundaries:t,aspectRatio:i}):o),i)&&(s=nt({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(s.width>t.width||s.height>t.height)&&(s=nt({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:K(s),maximum:K(s)}})),s;var e,t,o,i,s},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return J({},Ei)},flip:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.transitions,s=i===void 0||i;if(!this.transitionsActive){s&&this.enableTransitions();var r=J({},this.imageTransforms.flip),a=Wo({flip:{horizontal:e?!r.horizontal:r.horizontal,vertical:t?!r.vertical:r.vertical},previousFlip:r,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),l=a.visibleArea,n=a.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=l,this.coordinates=n,this.onChange(),s&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.transitions,i=o===void 0||o;if(!this.transitionsActive){i&&this.enableTransitions();var s=J({},this.imageSize);this.appliedImageTransforms.rotate+=e;var r=Oo({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:s,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=r.visibleArea,l=r.coordinates,n=this.processAutoZoom("rotateImage",a,l);a=n.visibleArea,l=n.coordinates,this.visibleArea=a,this.coordinates=l,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Jo={key:0,ref:"canvas",style:{display:"none"}},Ko={key:1,ref:"sourceCanvas",style:{display:"none"}};to.render=function(e,t,o,i,s,r){return x(),ce("div",{ref:"cropper",class:r.classes.cropper},[xe("div",{ref:"stretcher",class:r.classes.stretcher},null,2),xe("div",{class:r.classes.boundaries,style:r.boundariesStyle},[(x(),ce(Vt(o.backgroundWrapperComponent),{class:r.classes.cropperWrapper,"wheel-resize":r.settings.resizeImage.wheel,"touch-resize":r.settings.resizeImage.touch,"touch-move":r.settings.moveImage.touch,"mouse-move":r.settings.moveImage.mouse,onMove:r.onManipulateImage,onResize:r.onManipulateImage},{default:lt((function(){return[xe("div",{class:r.classes.background,style:r.boundariesStyle},null,6),xe("div",{class:r.classes.imageWrapper},[xe("img",{ref:"image",crossorigin:s.imageAttributes.crossOrigin,src:s.imageAttributes.src,class:r.classes.image,style:r.imageStyle,onMousedown:t[1]||(t[1]=ge((function(){}),["prevent"]))},null,46,["crossorigin","src"])],2),xe("div",{class:r.classes.foreground,style:r.boundariesStyle},null,6),ze((x(),ce(Vt(o.stencilComponent),Ii({ref:"stencil",image:r.image,coordinates:s.coordinates,"stencil-coordinates":r.stencilCoordinates,transitions:r.transitionsOptions},o.stencilProps,{onResize:r.onResize,onResizeEnd:r.onResizeEnd,onMove:r.onMove,onMoveEnd:r.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[Pi,s.imageLoaded]]),o.canvas?(x(),ce("canvas",Jo,null,512)):V("",!0),o.canvas?(x(),ce("canvas",Ko,null,512)):V("",!0)]})),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const $o={name:"ImageEditor",components:{Cropper:to},props:{show:{type:Boolean,default:!1},file:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const o=O(null),i=O(""),s=O(null),r=O(1),a=O(800),l=O(600),n=O(90),u=O("image/jpeg"),m=O(!1),g=O(!1),b=O(0),C=O(0),D=O(0),E=O(0),T=O(null),ie=vt(()=>e.file?.width||800),de=vt(()=>e.file?.height||600);ao(()=>e.file,ee=>{ee&&ee.url&&(i.value=ee.url.startsWith("http")?ee.url:window.location.origin+ee.url,a.value=ee.width||800,l.value=ee.height||600,b.value=ee.width||0,C.value=ee.height||0,ee.extension==="png"?u.value="image/png":ee.extension==="webp"?u.value="image/webp":u.value="image/jpeg")},{immediate:!0});const ue=({coordinates:ee,canvas:se})=>{T.value=ee,se&&(D.value=Math.round(se.width),E.value=Math.round(se.height))},we=()=>{o.value&&o.value.zoom(r.value)},ct=()=>{r.value=Math.min(3,r.value+.1),we()},qe=()=>{r.value=Math.max(.1,r.value-.1),we()},_e=ee=>{o.value&&o.value.rotate(ee)},Le=(ee,se)=>{o.value&&o.value.flip(ee,se)},dt=()=>{r.value=1,s.value=null,o.value&&o.value.reset()},Ze=()=>{o.value&&e.file&&o.value.setCoordinates({left:0,top:0,width:e.file.width||800,height:e.file.height||600})},Ge=async ee=>{if(!(!o.value||!e.file)){m.value=!0,g.value=!1;try{const{canvas:se}=o.value.getResult();if(!se)throw new Error("    ");let fe=se;if(a.value&&l.value&&(se.width!==a.value||se.height!==l.value)){const Ae=document.createElement("canvas");Ae.width=a.value,Ae.height=l.value,Ae.getContext("2d").drawImage(se,0,0,a.value,l.value),fe=Ae}const Be=await new Promise(Ae=>{fe.toBlob(Ae,u.value,n.value/100)}),Qe=new FormData;Qe.append("file",Be,e.file.original_name),Qe.append("folder_id",e.file.folder_id);let Te;if(ee?Te=await Bi(`/media/${e.file.id}`,Qe):Te=await Ut("/media",Qe),!Te.ok){const Ae=await Te.json();throw new Error(Ae.message||"  ")}t("saved",await Te.json()),Me()}catch(se){console.error("[ImageEditor] Error saving image:",se),alert(se.message||"  ")}finally{m.value=!1}}},Me=()=>{t("close")};return{cropperRef:o,imageUrl:i,aspectRatio:s,zoom:r,outputWidth:a,outputHeight:l,quality:n,outputFormat:u,saving:m,showSaveOptions:g,originalWidth:b,originalHeight:C,croppedWidth:D,croppedHeight:E,defaultWidth:ie,defaultHeight:de,onChange:ue,handleZoomChange:we,zoomIn:ct,zoomOut:qe,rotate:_e,flip:Le,reset:dt,fitToImage:Ze,saveImage:Ge,handleClose:Me}}},en={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},tn={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col"},on={class:"flex items-center justify-between p-4 border-b border-border"},nn={class:"flex items-center gap-3"},rn={key:0,class:"text-sm text-muted-foreground"},sn={class:"flex gap-2"},an=["disabled"],ln={class:"flex-1 overflow-auto p-4"},cn={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},dn={class:"lg:col-span-2"},un={class:"bg-muted/30 rounded-lg p-4"},hn={class:"mt-4 p-3 bg-muted/30 rounded-lg"},fn={class:"grid grid-cols-2 gap-4 text-sm"},gn={class:"ml-2 font-medium"},mn={class:"ml-2 font-medium"},pn={class:"space-y-4"},vn={class:"bg-muted/30 rounded-lg p-4"},bn={class:"space-y-2"},wn={class:"flex items-center gap-2"},xn={class:"flex items-center gap-2"},yn={class:"flex items-center gap-2"},Cn={class:"flex items-center gap-2"},Sn={class:"flex items-center gap-2"},zn={class:"bg-muted/30 rounded-lg p-4"},Mn={class:"space-y-2"},An={class:"flex items-center gap-2"},kn={class:"text-center text-xs text-muted-foreground"},Rn={class:"bg-muted/30 rounded-lg p-4"},En={class:"grid grid-cols-2 gap-2"},Fn={class:"bg-muted/30 rounded-lg p-4"},_n={class:"grid grid-cols-2 gap-2"},Tn={class:"bg-muted/30 rounded-lg p-4"},Dn={class:"space-y-3"},jn={class:"text-center text-xs text-muted-foreground mt-1"},Pn={class:"bg-muted/30 rounded-lg p-4"},In={class:"space-y-2"},Ln={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm"},Bn={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md p-6"},On={class:"space-y-3"},Wn=["disabled"],Hn=["disabled"];function Nn(e,t,o,i,s,r){const a=Pe("Cropper");return o.show?(x(),R("div",en,[c("div",tn,[c("div",on,[c("div",nn,[c("button",{onClick:t[0]||(t[0]=(...l)=>i.handleClose&&i.handleClose(...l)),class:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-accent/10 hover:text-accent transition-colors"},"  "),t[27]||(t[27]=c("h2",{class:"text-xl font-semibold"}," ",-1)),o.file?(x(),R("span",rn,L(o.file.original_name),1)):V("",!0)]),c("div",sn,[c("button",{onClick:t[1]||(t[1]=(...l)=>i.handleClose&&i.handleClose(...l)),class:"px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  "),c("button",{onClick:t[2]||(t[2]=l=>i.showSaveOptions=!0),disabled:i.saving,class:"px-4 py-2 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},L(i.saving?"...":""),9,an)])]),c("div",ln,[c("div",cn,[c("div",dn,[c("div",un,[xe(a,{ref:"cropperRef",src:i.imageUrl,"stencil-props":{aspectRatio:i.aspectRatio,resizable:!0,movable:!0},"default-size":{width:i.defaultWidth,height:i.defaultHeight},"image-restriction":"stencil",class:"cropper",onChange:i.onChange},null,8,["src","stencil-props","default-size","onChange"])]),c("div",hn,[c("div",fn,[c("div",null,[t[28]||(t[28]=c("span",{class:"text-muted-foreground"}," :",-1)),c("span",gn,L(i.originalWidth)+"  "+L(i.originalHeight)+" px",1)]),c("div",null,[t[29]||(t[29]=c("span",{class:"text-muted-foreground"}," :",-1)),c("span",mn,L(i.croppedWidth)+"  "+L(i.croppedHeight)+" px",1)])])])]),c("div",pn,[c("div",vn,[t[35]||(t[35]=c("h3",{class:"text-sm font-semibold mb-3"}," ",-1)),c("div",bn,[c("label",wn,[ze(c("input",{type:"radio",value:null,"onUpdate:modelValue":t[3]||(t[3]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[kt,i.aspectRatio]]),t[30]||(t[30]=c("span",{class:"text-sm"},"",-1))]),c("label",xn,[ze(c("input",{type:"radio",value:1,"onUpdate:modelValue":t[4]||(t[4]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[kt,i.aspectRatio]]),t[31]||(t[31]=c("span",{class:"text-sm"},"1:1 ()",-1))]),c("label",yn,[ze(c("input",{type:"radio",value:16/9,"onUpdate:modelValue":t[5]||(t[5]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[kt,i.aspectRatio]]),t[32]||(t[32]=c("span",{class:"text-sm"},"16:9",-1))]),c("label",Cn,[ze(c("input",{type:"radio",value:4/3,"onUpdate:modelValue":t[6]||(t[6]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[kt,i.aspectRatio]]),t[33]||(t[33]=c("span",{class:"text-sm"},"4:3",-1))]),c("label",Sn,[ze(c("input",{type:"radio",value:3/2,"onUpdate:modelValue":t[7]||(t[7]=l=>i.aspectRatio=l),class:"w-4 h-4"},null,512),[[kt,i.aspectRatio]]),t[34]||(t[34]=c("span",{class:"text-sm"},"3:2",-1))])])]),c("div",zn,[t[36]||(t[36]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",Mn,[c("div",An,[c("button",{onClick:t[8]||(t[8]=(...l)=>i.zoomOut&&i.zoomOut(...l)),class:"h-8 w-8 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  "),ze(c("input",{type:"range","onUpdate:modelValue":t[9]||(t[9]=l=>i.zoom=l),min:"0.1",max:"3",step:"0.1",onInput:t[10]||(t[10]=(...l)=>i.handleZoomChange&&i.handleZoomChange(...l)),class:"flex-1"},null,544),[[bt,i.zoom,void 0,{number:!0}]]),c("button",{onClick:t[11]||(t[11]=(...l)=>i.zoomIn&&i.zoomIn(...l)),class:"h-8 w-8 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"}," + ")]),c("div",kn,L(Math.round(i.zoom*100))+"% ",1)])]),c("div",Rn,[t[37]||(t[37]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",En,[c("button",{onClick:t[12]||(t[12]=l=>i.rotate(-90)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  -90 "),c("button",{onClick:t[13]||(t[13]=l=>i.rotate(90)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  +90 "),c("button",{onClick:t[14]||(t[14]=l=>i.rotate(-180)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  -180 "),c("button",{onClick:t[15]||(t[15]=l=>i.rotate(180)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  +180 ")])]),c("div",Fn,[t[38]||(t[38]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",_n,[c("button",{onClick:t[16]||(t[16]=l=>i.flip(!0,!1)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"   "),c("button",{onClick:t[17]||(t[17]=l=>i.flip(!1,!0)),class:"h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"   ")])]),c("div",Tn,[t[44]||(t[44]=c("h3",{class:"text-sm font-semibold mb-3"}," ",-1)),c("div",Dn,[c("div",null,[t[39]||(t[39]=c("label",{class:"text-xs text-muted-foreground mb-1 block"}," (px)",-1)),ze(c("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>i.outputWidth=l),min:"1",class:"w-full h-9 px-3 border border-border rounded bg-background"},null,512),[[bt,i.outputWidth,void 0,{number:!0}]])]),c("div",null,[t[40]||(t[40]=c("label",{class:"text-xs text-muted-foreground mb-1 block"}," (px)",-1)),ze(c("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>i.outputHeight=l),min:"1",class:"w-full h-9 px-3 border border-border rounded bg-background"},null,512),[[bt,i.outputHeight,void 0,{number:!0}]])]),c("div",null,[t[41]||(t[41]=c("label",{class:"text-xs text-muted-foreground mb-1 block"},"",-1)),ze(c("input",{type:"range","onUpdate:modelValue":t[20]||(t[20]=l=>i.quality=l),min:"1",max:"100",class:"w-full"},null,512),[[bt,i.quality,void 0,{number:!0}]]),c("div",jn,L(i.quality)+"% ",1)]),c("div",null,[t[43]||(t[43]=c("label",{class:"text-xs text-muted-foreground mb-1 block"},"",-1)),ze(c("select",{"onUpdate:modelValue":t[21]||(t[21]=l=>i.outputFormat=l),class:"w-full h-9 px-3 border border-border rounded bg-background"},[...t[42]||(t[42]=[c("option",{value:"image/jpeg"},"JPEG",-1),c("option",{value:"image/png"},"PNG",-1),c("option",{value:"image/webp"},"WebP",-1)])],512),[[ui,i.outputFormat]])])])]),c("div",Pn,[t[45]||(t[45]=c("h3",{class:"text-sm font-semibold mb-3"},"",-1)),c("div",In,[c("button",{onClick:t[22]||(t[22]=(...l)=>i.reset&&i.reset(...l)),class:"w-full h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"  "),c("button",{onClick:t[23]||(t[23]=(...l)=>i.fitToImage&&i.fitToImage(...l)),class:"w-full h-9 flex items-center justify-center bg-background border border-border rounded hover:bg-accent/10"},"    ")])])])])])]),i.showSaveOptions?(x(),R("div",Ln,[c("div",Bn,[t[46]||(t[46]=c("h3",{class:"text-lg font-semibold mb-4"}," ",-1)),c("div",On,[c("button",{onClick:t[24]||(t[24]=l=>i.saveImage(!0)),disabled:i.saving,class:"w-full h-12 flex items-center justify-center bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},"    ",8,Wn),c("button",{onClick:t[25]||(t[25]=l=>i.saveImage(!1)),disabled:i.saving,class:"w-full h-12 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors disabled:opacity-50"},"    ",8,Hn),c("button",{onClick:t[26]||(t[26]=l=>i.showSaveOptions=!1),class:"w-full h-12 flex items-center justify-center border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  ")])])])):V("",!0)])):V("",!0)}const Un=Li($o,[["render",Nn],["__scopeId","data-v-484fb785"]]),Xn={name:"Media",components:{FsLightbox:wo,ImageEditor:Un},props:{selectionMode:{type:Boolean,default:!1},countFile:{type:Number,default:1},selectedFiles:{type:Array,default:()=>[]}},emits:["file-selected"],setup(e,{emit:t}){console.log("[Media] setup() ");const o=O(!1),i=O(!1),s=O(!1),r=O(null),a=O(""),l=O([]),n=O(null),u=O(""),m=O(!1),g=O([]),b=O([]),C=O(!1),D=O(!1),E=O(null),T=O({total:0,completed:0}),ie=O(!1),de=O([]),ue=O(1),we=O(!1),ct=O(null),qe=O(!1),_e=O(null),Le=O(null),dt=O([]),Ze=O(!1),Ge=O(!1),Me=O([]),ee=O([]),se="media_selected_folder_id",fe=O(1),Be=O(20),Qe=[10,20,30,40,50,100],Te=O(0),Ae=O(1),rt=O(""),gt=O(""),Ne=O("created_at"),Je=O("desc"),Ke=O(null),$e=O(null),Ft=[{value:"created_at",order:"desc",label:""},{value:"created_at",order:"asc",label:""},{value:"created_at",order:"asc",label:"  (.)"},{value:"created_at",order:"desc",label:"  (.)"},{value:"original_name",order:"asc",label:"  (-)"},{value:"original_name",order:"desc",label:"  (-)"},{value:"size",order:"asc",label:"  (.)"},{value:"size",order:"desc",label:"  (.)"}],Gt=vt(()=>{const d=Ft.find(p=>p.value===Ne.value&&p.order===Je.value);return d?d.label:""}),Qt=vt(()=>a.value?l.value.filter(d=>d.name.toLowerCase().includes(a.value.toLowerCase())):l.value),Oe=vt(()=>n.value?.is_trash===!0||n.value?.id===4),Jt=vt(()=>{const d=g.value.length>0,p=!!n.value,v=!s.value,y=d&&p&&v;return console.log("[Media] canUpload check:",{hasFiles:d,hasFolder:p,notUploading:v,result:y,filesCount:g.value.length}),y}),De=async()=>{o.value=!0,r.value=null;try{const d=await ut("/folders");if(!d.ok){let v=`HTTP error! status: ${d.status}`;try{const y=await d.json();v=y.message||y.error||v,console.error("[Media] API Error Data:",y)}catch{const I=await d.text();console.error("[Media] API Error Response (text):",I)}throw new Error(v)}const p=await d.json();console.log("[Media] API Response:",p),Array.isArray(p)?l.value=p:p.data&&Array.isArray(p.data)?l.value=p.data:l.value=[],console.log("[Media] Folders loaded:",l.value.length)}catch(d){console.error("[Media] Error fetching folders:",d),r.value="  : "+(d.message||" ")}finally{o.value=!1}},pe=async(d,p=1,v=null)=>{i.value=!0,r.value=null;try{const y=new URLSearchParams;y.append("folder_id",d),y.append("page",p),y.append("per_page",Be.value),v&&y.append("original_folder_id",v),rt.value.trim()&&y.append("search",rt.value.trim()),gt.value&&y.append("type",gt.value),y.append("sort_by",Ne.value),y.append("sort_order",Je.value);const I=await ut(`/media?${y.toString()}`);if(!I.ok){let Mt=`HTTP error! status: ${I.status}`;try{const At=await I.json();Mt=At.message||At.error||Mt,console.error("[Media] API Error Data:",At)}catch{const It=await I.text();console.error("[Media] API Error Response (text):",It)}throw new Error(Mt)}const N=await I.json();console.log("[Media] Media API Response:",N),console.log("[Media] Response structure:",{hasData:!!N.data,isArray:Array.isArray(N.data),hasMeta:!!N.meta,hasLinks:!!N.links,keys:Object.keys(N)});let et=[];N.data&&Array.isArray(N.data)?(et=N.data,N.meta?(Ke.value={current_page:N.meta.current_page||p,last_page:N.meta.last_page||1,per_page:N.meta.per_page||Be.value,total:N.meta.total||0,from:N.meta.from||0,to:N.meta.to||0},fe.value=N.meta.current_page||p,Ae.value=N.meta.last_page||1,Te.value=N.meta.total||0):N.current_page!==void 0?(Ke.value={current_page:N.current_page||p,last_page:N.last_page||1,per_page:N.per_page||Be.value,total:N.total||0,from:N.from||0,to:N.to||0},fe.value=N.current_page||p,Ae.value=N.last_page||1,Te.value=N.total||0):Ke.value=null):Array.isArray(N)?(et=N,Ke.value=null):(et=[],Ke.value=null),console.log("[Media] Parsed pagination:",Ke.value),console.log("[Media] Parsed files:",et.length,"Total:",Te.value,"Page:",fe.value,"of",Ae.value),await oi(),b.value=[...et],await oi()}catch(y){console.error("[Media] Error fetching media files:",y),r.value="  : "+(y.message||" ")}finally{i.value=!1}},_t=d=>{n.value&&pe(n.value.id,d)},Tt=()=>{fe.value=1,n.value&&pe(n.value.id,1)},Kt=(d=!1)=>{$e.value&&(clearTimeout($e.value),$e.value=null),d?(fe.value=1,n.value&&pe(n.value.id,1)):$e.value=setTimeout(()=>{fe.value=1,n.value&&pe(n.value.id,1),$e.value=null},500)},$t=()=>{fe.value=1,n.value&&pe(n.value.id,1)},ei=(d,p)=>{Ne.value=d,Je.value=p,fe.value=1,n.value&&pe(n.value.id,1)},ti=(d,p)=>{const v=[];if(p<=5)for(let I=1;I<=p;I++)v.push(I);else if(d<=3)for(let I=1;I<=5;I++)v.push(I);else if(d>=p-2)for(let I=p-4;I<=p;I++)v.push(I);else for(let I=d-2;I<=d+2;I++)v.push(I);return v},Ct=async()=>{const d=n.value?n.value.id:null,p=n.value?`  "${n.value.name}"`:" ",{value:v}=await re.fire({title:"  ",html:`  ${p}`,input:"text",inputPlaceholder:"  ",inputValidator:y=>{if(!y||!y.trim())return"     ";if(y.trim().length<2)return"     2 ";if(y.trim().length>100)return"     100 "},showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!(!v||!v.trim())){o.value=!0,r.value=null;try{const y=await Ut("/folders",{name:v.trim(),parent_id:d});if(!y.ok){const N=await y.json();throw new Error(N.message||"  ")}const I=await y.json();re.fire({title:" ",html:` <strong>"${v.trim()}"</strong>   ${p}.`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await De(),n.value&&await st(n.value.id),console.log("[Media] Folder created successfully")}catch(y){console.error("[Media] Error creating folder:",y),re.fire({title:"",text:y.message||"  ",icon:"error",confirmButtonText:""}),r.value=y.message||"  "}finally{o.value=!1}}},st=async d=>{try{let p;Oe.value?p="/folders?trash=1":p=`/folders?parent_id=${d}`;const v=await ut(p);if(!v.ok){console.error("[Media] Error fetching nested folders:",v.status),Me.value=[];return}const y=await v.json();Array.isArray(y)?Me.value=y:y.data&&Array.isArray(y.data)?Me.value=y.data:Me.value=[],console.log("[Media] Nested folders loaded:",Me.value.length,Oe.value?"(trash)":"")}catch(p){console.error("[Media] Error fetching nested folders:",p),Me.value=[]}},ii=async d=>{if(!d){ee.value=[];return}const p=[];let v=d;for(;v;)if(p.unshift({id:v.id,name:v.name,folder:v}),v.parent&&v.parent.id)v=v.parent;else if(v.parent_id)try{const y=await ut(`/folders/${v.parent_id}`);if(y.ok){const I=await y.json();v=I.data||I}else break}catch(y){console.error("[Media] Error loading parent folder:",y);break}else break;p.unshift({id:null,name:" ",folder:null}),ee.value=p},Dt=d=>{try{d?localStorage.setItem(se,d.toString()):localStorage.removeItem(se)}catch(p){console.error("[Media] Error saving folder to localStorage:",p)}},St=async()=>{try{const d=localStorage.getItem(se);if(d){const p=parseInt(d);if(isNaN(p))localStorage.removeItem(se);else{const v=await ut(`/folders/${p}`);if(v.ok){const y=await v.json(),I=y.data||y;if(I)return await zt(I,!1),!0}else if(v.status===404)return console.log("[Media] Folder from localStorage not found (deleted), clearing storage"),localStorage.removeItem(se),!1}}}catch(d){console.error("[Media] Error loading folder from localStorage:",d),localStorage.removeItem(se)}return!1},zt=async(d,p=!0)=>{if(console.log("[Media] Folder clicked:",d),d.deleted_at||Oe.value&&d.id!==4)try{const v=await ut(`/folders/${d.id}`);if(v.ok){const y=await v.json();d=y.data||y}}catch(v){console.error("[Media] Error loading deleted folder:",v)}n.value=d,fe.value=1,rt.value="",gt.value="",Ne.value="created_at",Je.value="desc",p&&!Oe.value&&Dt(d.id),await ii(d),d.deleted_at?await Promise.all([pe(4,1,d.id),st(d.id)]):await Promise.all([pe(d.id,1),st(d.id)])},jt=()=>{E.value&&E.value.click()},Pt=d=>{if(d.target.files){const p=Array.from(d.target.files),v=10*1024*1024,y=p.filter(I=>I.size>v?(console.warn(`[Media]  ${I.name}  10    `),!1):!0);y.forEach(I=>{I.uploadProgress=void 0,I.uploadError=void 0}),g.value=y,s.value=!1,T.value={total:0,completed:0},y.length<p.length&&(r.value="   10     "),console.log("[Media] Files selected:",y.length,"selectedFiles.value.length:",g.value.length),d.target&&(d.target.value="")}},mt=d=>{if(C.value=!1,D.value=!1,d.dataTransfer.files&&d.dataTransfer.files.length>0){const p=Array.from(d.dataTransfer.files),v=p.filter(y=>y.size>10485760?(console.warn(`[Media]  ${y.name}  10    `),!1):!0);v.forEach(y=>{y.uploadProgress=void 0,y.uploadError=void 0}),g.value=v,s.value=!1,T.value={total:0,completed:0},v.length<p.length&&(r.value="   10     "),console.log("[Media] Files dropped:",v.length,"selectedFiles.value.length:",g.value.length)}},f=d=>{C.value=!1,D.value=!1,mt(d)},h=(d,p)=>{d.target.style.display="none",p.src&&(p.imageError=!0)},M=O(new Set),w=()=>`${window.location.origin}/system/folder.png`,S=d=>!d||!d.src?w():`${window.location.origin}/system/${d.src}.png`,_=d=>{const p=d.target,v=p.parentElement;if(v&&!v.querySelector("span.folder-fallback")){p.style.display="none";const y=document.createElement("span");v.classList.contains("aspect-square")||p.classList.contains("w-full")?y.className="text-4xl folder-fallback":y.className="text-sm folder-fallback",y.textContent="",v.appendChild(y)}},A=d=>{const p=d.extension?.toLowerCase()||"",v=d.type?.toLowerCase()||"";return v==="photo"||v==="video"?null:p==="pdf"||v==="document"&&p==="pdf"?"":["doc","docx"].includes(p)?"":["xls","xlsx"].includes(p)?"":["ppt","pptx"].includes(p)?"":["zip","rar","7z","tar","gz"].includes(p)?"":["txt","rtf"].includes(p)?"":["js","ts","php","py","java","cpp","html","css","scss","json","xml"].includes(p)?"":["mp3","wav","ogg","m4a","flac","aac"].includes(p)?"":""},F=d=>{if(!d)return"0 B";const p=1024,v=["B","KB","MB","GB"],y=Math.floor(Math.log(d)/Math.log(p));return Math.round(d/Math.pow(p,y)*100)/100+" "+v[y]},k=d=>{if(d.type)return d.type.startsWith("image/");const p=z(d.name);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(p)},H=d=>{if(d.type)return d.type.startsWith("video/");const p=z(d.name);return["mp4","avi","mov","webm","mkv","wmv","flv"].includes(p)},z=d=>{if(!d)return"";const p=d.split(".");return p.length>1?p[p.length-1].toLowerCase():""},j=d=>{if(d instanceof File){const p=URL.createObjectURL(d);return M.value.add(p),p}return d.url||""},B=()=>{M.value.forEach(d=>{URL.revokeObjectURL(d)}),M.value.clear()},X=d=>{const p=z(d.name);return A({extension:p,type:d.type})},Q=(d,p,v)=>new Promise((y,I)=>{const N=new XMLHttpRequest,et=new FormData;et.append("file",d),et.append("folder_id",p),N.upload.addEventListener("progress",tt=>{if(tt.lengthComputable){const ro=Math.round(tt.loaded/tt.total*100);v(ro)}}),N.addEventListener("load",()=>{if(N.status>=200&&N.status<300)try{const tt=JSON.parse(N.responseText);y(tt)}catch{y(N.responseText)}else try{const tt=JSON.parse(N.responseText);I(new Error(tt.message||`HTTP error! status: ${N.status}`))}catch{I(new Error(`HTTP error! status: ${N.status}`))}}),N.addEventListener("error",()=>{I(new Error("    "))}),N.addEventListener("abort",()=>{I(new Error("   "))});const{getAuthHeader:Mt}=fo(),It=Mt().Authorization?.replace("Bearer ","");N.open("POST","/api/v1/media"),It&&N.setRequestHeader("Authorization",`Bearer ${It}`),N.setRequestHeader("Accept","application/json"),N.send(et)}),te=async()=>{if(g.value.length===0){r.value="   ";return}if(!n.value){r.value="   ";return}s.value=!0,r.value=null,T.value={total:g.value.length,completed:0},g.value.forEach(d=>{d.uploadProgress=0});try{const d=g.value.map(async(p,v)=>{try{const y=await Q(p,n.value.id,I=>{p.uploadProgress=I});return T.value.completed++,p.uploadProgress=100,y}catch(y){throw T.value.completed++,p.uploadProgress=0,p.uploadError=y.message,y}});await Promise.all(d),B(),await pe(n.value.id),await De(),g.value=[],T.value={total:0,completed:0},console.log("[Media] Files uploaded successfully")}catch(d){console.error("[Media] Error uploading files:",d),r.value=d.message||"  "}finally{s.value=!1}},q=()=>{B(),g.value=[],r.value=null,s.value=!1,T.value={total:0,completed:0},console.log("[Media] Upload cancelled")},P=()=>{n.value=null,b.value=[],Me.value=[],ee.value=[],Dt(null),console.log("[Media] Back to folders list")},Y=async d=>{d.id===null?P():await zt(d.folder)},oe=()=>{Ct()},ae=d=>d.type==="photo"||d.type==="video"?!0:["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(d.extension?.toLowerCase()),U=d=>{const p=b.value.filter(I=>I.type==="photo"||I.type==="video"),v=p.findIndex(I=>I.id===d.id);if(v===-1){console.error("[Media] File not found in mediaFiles:",d);return}const y=p.map(I=>I.url);console.log("[Media] Opening lightbox:",{currentIndex:v,slide:v+1,totalSources:y.length,file:d.original_name}),de.value=y,ue.value=v+1,oi(()=>{ie.value=!ie.value})},G=d=>!e.selectedFiles||!Array.isArray(e.selectedFiles)?!1:e.selectedFiles.some(p=>p.id===d.id),$=d=>{if(e.selectionMode){t("file-selected",d);return}if(d.type==="photo"||d.type==="video"){U(d);return}if(ae(d)){const p=window.location.origin+d.url;(d.extension?.toLowerCase()==="pdf"||["doc","docx","xls","xlsx","ppt","pptx"].includes(d.extension?.toLowerCase())||d.extension?.toLowerCase()==="txt")&&window.open(p,"_blank")}},Z=d=>{const p=window.location.origin+d.url,v=document.createElement("a");v.href=p,v.download=d.original_name,document.body.appendChild(v),v.click(),document.body.removeChild(v)},ne=d=>{d.type==="photo"&&(ct.value=d,we.value=!0)},ve=async d=>{console.log("[Media] Image saved:",d),n.value&&(await pe(n.value.id),await De())},he=async()=>{try{const d=await ut("/folders?paginate=0");if(!d.ok)throw new Error("  ");const p=await d.json();let v=[];Array.isArray(p)?v=p:p.data&&Array.isArray(p.data)&&(v=p.data);const y=_e.value?.folder_id;dt.value=v.filter(I=>!(I.id===y||I.id===4||I.is_trash===!0))}catch(d){console.error("[Media] Error fetching all folders:",d),r.value="   "}},le=async d=>{_e.value=d,Le.value=d.folder_id,await he(),qe.value=!0},ke=d=>{Le.value=d},Re=async()=>{if(_e.value){if(Le.value===_e.value.folder_id){qe.value=!1;return}Ze.value=!0,r.value=null;try{const d={folder_id:Le.value===null?null:Le.value},p=await Bi(`/media/${_e.value.id}`,d);if(!p.ok){const v=await p.json();throw new Error(v.message||"  ")}n.value&&await pe(n.value.id,fe.value),await De(),qe.value=!1,console.log("[Media] File moved successfully")}catch(d){console.error("[Media] Error moving file:",d),r.value=d.message||"  "}finally{Ze.value=!1}}},Fe=async d=>{if((await re.fire({title:" ?",html:` <strong>"${d.original_name}"</strong>     .`,icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)try{const v=await Ut(`/media/${d.id}/restore`);if(!v.ok){const y=await v.json();throw new Error(y.message||"  ")}re.fire({title:" ",html:` <strong>"${d.original_name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),n.value&&await pe(n.value.id,fe.value),await De(),console.log("[Media] File restored successfully")}catch(v){console.error("[Media] Error restoring file:",v),re.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),r.value=v.message||"  "}},Ue=async d=>{if(Oe.value){if(!(await re.fire({title:"  ?",html:` <strong>"${d.original_name}"</strong>        .`,icon:"warning",showCancelButton:!0,confirmButtonText:",  ",cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed)return}else if(!(await re.fire({title:" ?",html:` <strong>"${d.original_name}"</strong>    .`,icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)return;try{const p=await Lt(`/media/${d.id}`);if(!p.ok){const v=await p.json();throw new Error(v.message||"  ")}re.fire({title:Oe.value?" ":"   ",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),n.value&&await pe(n.value.id,fe.value),await De(),console.log("[Media] File deleted successfully")}catch(p){console.error("[Media] Error deleting file:",p),re.fire({title:"",text:p.message||"  ",icon:"error",confirmButtonText:""}),r.value=p.message||"  "}},io=async()=>{if(!Oe.value||b.value.length===0)return;const d=b.value.length;if((await re.fire({title:"  ?",html:` <strong> </strong>   (${d} .)  .<br><br>   !`,icon:"warning",showCancelButton:!0,confirmButtonText:`,   (${d})`,cancelButtonText:"",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,customClass:{confirmButton:"swal2-confirm-danger",cancelButton:"swal2-cancel"}})).isConfirmed){Ge.value=!0,r.value=null;try{let v=0,y=0;for(const I of b.value)try{(await Lt(`/media/${I.id}`)).ok?v++:y++}catch(N){console.error(`[Media] Error deleting file ${I.id}:`,N),y++}y===0?re.fire({title:" ",html:`  : <strong>${v}</strong>`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}):re.fire({title:" ",html:`: <strong>${v}</strong><br>: <strong>${y}</strong>`,icon:"warning",confirmButtonText:""}),n.value&&await pe(n.value.id,fe.value),await De(),console.log("[Media] Trash cleared:",{deletedCount:v,errorCount:y})}catch(v){console.error("[Media] Error clearing trash:",v),re.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),r.value=v.message||"  "}finally{Ge.value=!1}}},oo=async d=>{if(d.protected){re.fire({title:"",text:"   ",icon:"error",confirmButtonText:""});return}if(Oe.value){if(!(await re.fire({title:" ?",html:` ,   <strong> </strong>  <strong>"${d.name}"</strong>    ?<br><br>   !`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:",  ",cancelButtonText:""})).isConfirmed)return;o.value=!0,r.value=null;try{const y=await Lt(`/folders/${d.id}?force=1`);if(!y.ok){const I=await y.json();throw new Error(I.message||"  ")}n.value&&await st(n.value.id),re.fire({title:" ",html:` <strong>"${d.name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder permanently deleted")}catch(y){console.error("[Media] Error deleting folder:",y),re.fire({title:"",text:y.message||"  ",icon:"error",confirmButtonText:""}),r.value=y.message||"  "}finally{o.value=!1}return}if((await re.fire({title:" ?",html:` ,     <strong>"${d.name}"</strong>    ?<br><br>    .`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:", ",cancelButtonText:""})).isConfirmed){o.value=!0,r.value=null;try{const v=await Lt(`/folders/${d.id}`);if(!v.ok){const y=await v.json();throw new Error(y.message||"  ")}await De(),n.value&&await st(n.value.id),re.fire({title:" ",html:` <strong>"${d.name}"</strong>   .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder deleted successfully")}catch(v){console.error("[Media] Error deleting folder:",v),re.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),r.value=v.message||"  "}finally{o.value=!1}}},no=async d=>{if((await re.fire({title:" ?",html:` ,     <strong>"${d.name}"</strong>    ?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:", ",cancelButtonText:""})).isConfirmed){o.value=!0,r.value=null;try{const v=await Ut(`/folders/${d.id}/restore`);if(!v.ok){const y=await v.json();throw new Error(y.message||"  ")}n.value&&await st(n.value.id),await De(),re.fire({title:" ",html:` <strong>"${d.name}"</strong>  .`,icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),console.log("[Media] Folder restored successfully")}catch(v){console.error("[Media] Error restoring folder:",v),re.fire({title:"",text:v.message||"  ",icon:"error",confirmButtonText:""}),r.value=v.message||"  "}finally{o.value=!1}}};return uo(async()=>{console.log("[Media] onMounted() "),await De(),await St()||(n.value=null,ee.value=[])}),ho(()=>{B(),$e.value&&clearTimeout($e.value)}),{selectionMode:e.selectionMode,isFileSelected:G,loading:o,loadingMedia:i,uploading:s,error:r,searchQuery:a,folders:l,selectedFolder:n,newFolderName:u,isCreateFolderOpen:m,selectedFiles:g,mediaFiles:b,nestedFolders:Me,breadcrumbs:ee,filteredFolders:Qt,isTrashFolder:Oe,canUpload:Jt,uploadProgress:T,isDragging:C,isDraggingButton:D,lightboxToggler:ie,lightboxSources:de,lightboxSlide:ue,isPreviewable:ae,openLightbox:U,openFilePreview:$,handleDownloadFile:Z,handleEditFile:ne,handleMoveFile:le,handleRestoreFile:Fe,showImageEditor:we,selectedFileForEdit:ct,handleImageSaved:ve,showMoveModal:qe,selectedFileForMove:_e,selectedMoveFolderId:Le,allFolders:dt,moving:Ze,clearingTrash:Ge,selectMoveFolder:ke,confirmMoveFile:Re,handleBack:P,handleBreadcrumbClick:Y,handleToggleCreateFolder:oe,handleCreateFolder:Ct,handleFolderClick:zt,fileInput:E,handleFileButtonClick:jt,handleFileSelect:Pt,handleDrop:mt,handleDropOnButton:f,handleImageError:h,getDefaultFolderIcon:w,getFolderIcon:S,handleFolderImageError:_,getFileIcon:A,formatFileSize:F,isImageFile:k,isVideoFile:H,getFileExtension:z,getFilePreview:j,getFileIconFromFile:X,handleUpload:te,handleCancel:q,handleDeleteFile:Ue,handleClearTrash:io,handleDeleteFolder:oo,handleRestoreFolder:no,currentPage:fe,perPage:Be,perPageOptions:Qe,totalFiles:Te,lastPage:Ae,fileSearchQuery:rt,fileTypeFilter:gt,fileSortBy:Ne,fileSortOrder:Je,sortOptions:Ft,currentSortLabel:Gt,paginationData:Ke,handlePageChange:_t,handlePerPageChange:Tt,handleFileSearch:Kt,handleTypeFilter:$t,handleSortChange:ei,getPageNumbers:ti}}},Vn={class:"space-y-6 bg-transparent"},Yn={class:"flex items-center justify-between"},qn={class:"flex items-center gap-4"},Zn={class:"text-3xl font-semibold text-foreground"},Gn={class:"text-muted-foreground mt-1"},Qn={class:"flex gap-2"},Jn={key:0},Kn=["disabled"],$n={key:0,class:"flex items-center justify-center py-12"},er={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},tr={class:"text-destructive"},ir={key:2,class:"relative"},or={key:3,class:"grid gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"},nr=["onClick"],rr={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center"},sr=["src","alt"],ar={class:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded z-10"},lr={class:"text-sm font-medium text-center text-foreground truncate"},cr={class:"text-xs text-muted-foreground text-center"},dr=["onClick"],ur={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs",title:" "},hr={key:4,class:"rounded-xl shadow-sm p-6 bg-card border border-border"},fr={class:"w-full"},gr={class:"mb-4 flex items-center gap-2 text-sm flex-wrap"},mr={key:0,class:"text-muted-foreground"},pr=["onClick"],vr={class:"flex gap-2 mb-6 items-center justify-between"},br=["disabled"],wr={key:0,class:"space-y-6 pt-6"},xr={class:"text-center text-muted-foreground mb-4"},yr={class:"flex gap-2 max-w-3xl mx-auto"},Cr={class:"flex-1"},Sr=["disabled"],zr={key:0,class:"mt-6"},Mr={class:"text-sm text-muted-foreground mb-4"},Ar={key:0,class:"ml-2"},kr={key:0,class:"mb-4"},Rr={class:"flex items-center justify-between mb-1"},Er={class:"text-xs text-muted-foreground"},Fr={class:"w-full h-2 bg-muted rounded-full overflow-hidden"},_r={class:"grid gap-3 md:grid-cols-4 lg:grid-cols-6 max-h-96 overflow-y-auto"},Tr=["src","alt"],Dr=["src"],jr={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4"},Pr={class:"text-5xl mb-2"},Ir={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},Lr={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-1 p-2"},Br=["title"],Or={class:"text-white/80 text-xs"},Wr={key:3,class:"absolute bottom-0 left-0 right-0 bg-black/80 p-1"},Hr={class:"flex items-center justify-between mb-1"},Nr={class:"text-xs text-white truncate flex-1 mr-2"},Ur={key:0,class:"text-xs text-white/80 whitespace-nowrap"},Xr={key:1,class:"text-xs text-red-400 whitespace-nowrap",title:" "},Vr={key:0,class:"w-full h-1 bg-muted/50 rounded-full overflow-hidden"},Yr={key:1,class:"w-full h-1 bg-red-500/50 rounded-full"},qr={key:1,class:"flex items-center justify-center py-8"},Zr={key:2,class:"pt-6"},Gr={class:"text-lg font-semibold mb-4"},Qr={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Jr=["onClick"],Kr={class:"relative aspect-square mb-2 bg-transparent rounded-lg overflow-hidden flex items-center justify-center hover:bg-accent/5 transition-colors"},$r=["src","alt"],es={class:"text-center"},ts=["title"],is={key:0,class:"flex items-center justify-center gap-1 mt-1"},os=["onClick"],ns={key:1,class:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-accent/20 text-accent rounded text-xs z-10",title:" "},rs=["onClick"],ss=["onClick"],as={key:3,class:"pt-6 space-y-4"},ls={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},cs={class:"flex-1 w-full sm:w-auto"},ds={class:"relative"},us=["value"],hs=["value"],fs={class:"flex items-center gap-2"},gs=["value"],ms={key:4,class:"pt-6"},ps={class:"flex items-center justify-between mb-4"},vs={class:"text-lg font-semibold"},bs={key:0},ws={key:1},xs={key:2,class:"text-sm text-muted-foreground ml-2"},ys=["disabled"],Cs={class:"grid gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Ss=["onClick"],zs={class:"relative aspect-video bg-muted/30 overflow-hidden flex-shrink-0"},Ms=["src","alt"],As=["src"],ks={key:2,class:"w-full h-full flex flex-col items-center justify-center bg-muted/50 p-4"},Rs={class:"text-5xl mb-2"},Es={class:"text-xs text-muted-foreground text-center truncate w-full px-2"},Fs={key:3,class:"absolute top-2 left-2 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold z-10"},_s=["onClick","title"],Ts=["onClick"],Ds={class:"p-3 space-y-1 flex-grow"},js=["title"],Ps={class:"flex items-center gap-2 text-xs text-muted-foreground"},Is={key:0,class:"text-blue-600 font-medium"},Ls={key:0,class:"text-xs text-muted-foreground"},Bs={key:0,class:"px-3 pb-3 flex gap-2 mt-auto"},Os=["onClick"],Ws=["onClick"],Hs=["onClick"],Ns=["onClick"],Us=["onClick"],Xs=["onClick"],Vs={key:5,class:"flex flex-col sm:flex-row items-center justify-between pt-6 border-t border-border gap-4"},Ys={class:"text-sm text-muted-foreground"},qs={key:0},Zs={key:1},Gs={key:0,class:"flex gap-2 items-center"},Qs=["disabled"],Js={class:"flex gap-1"},Ks=["onClick"],$s=["disabled"],ea={key:6,class:"text-center py-12"},ta={class:"text-muted-foreground"},ia={key:0,class:"text-xs text-muted-foreground mt-2"},oa={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},na={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-md p-6"},ra={key:0,class:"text-sm text-muted-foreground mb-4"},sa={class:"mb-4"},aa={class:"border border-border rounded-lg max-h-96 overflow-y-auto bg-muted/30"},la={class:"p-2"},ca=["src"],da=["onClick"],ua=["src","alt"],ha={class:"flex-1"},fa={key:0,class:"text-xs text-muted-foreground"},ga={class:"flex gap-2"},ma=["disabled"];function pa(e,t,o,i,s,r){const a=Pe("FsLightbox"),l=Pe("ImageEditor");return x(),R(Se,null,[c("div",Vn,[c("div",Yn,[c("div",qn,[i.selectedFolder?(x(),R("button",{key:0,onClick:t[0]||(t[0]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"h-10 w-10 flex items-center justify-center rounded-lg hover:bg-accent/10 hover:text-accent transition-colors"},"  ")):V("",!0),c("div",null,[c("h1",Zn,L(i.selectedFolder?`  - ${i.selectedFolder.name}`:"  -  "),1),c("p",Gn,L(i.selectedFolder?" ":"  "),1)])]),c("div",Qn,[!i.selectedFolder&&!i.selectionMode?(x(),R("div",Jn,[c("button",{onClick:t[1]||(t[1]=(...n)=>i.handleToggleCreateFolder&&i.handleToggleCreateFolder(...n)),disabled:i.loading,class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[t[39]||(t[39]=c("span",null,"+",-1)),c("span",null,L(i.loading?"...":" "),1)],8,Kn)])):V("",!0)])]),i.loading&&i.folders.length===0?(x(),R("div",$n,[...t[40]||(t[40]=[c("p",{class:"text-muted-foreground"}," ...",-1)])])):V("",!0),i.error?(x(),R("div",er,[c("p",tr,L(i.error),1)])):V("",!0),!i.selectedFolder&&!i.loading?(x(),R("div",ir,[t[41]||(t[41]=c("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"",-1)),ze(c("input",{type:"text",placeholder:" ...","onUpdate:modelValue":t[2]||(t[2]=n=>i.searchQuery=n),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,512),[[bt,i.searchQuery]])])):V("",!0),!i.selectedFolder&&!i.loading?(x(),R("div",or,[(x(!0),R(Se,null,We(i.filteredFolders,n=>(x(),R("div",{key:n.id,class:"group relative"},[c("div",{class:"cursor-pointer",onClick:u=>i.handleFolderClick(n)},[c("div",rr,[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:t[3]||(t[3]=(...u)=>i.handleFolderImageError&&i.handleFolderImageError(...u))},null,40,sr),c("div",ar,L(n.count||0),1)]),c("p",lr,L(n.name),1),c("p",cr,L(n.count||0)+" ",1)],8,nr),!n.protected&&!i.selectionMode?(x(),R("button",{key:0,onClick:ge(u=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90",title:" "},"  ",8,dr)):V("",!0),n.protected?(x(),R("div",ur,"  ")):V("",!0)]))),128))])):V("",!0),i.selectedFolder?(x(),R("div",hr,[c("div",fr,[c("div",gr,[c("button",{onClick:t[4]||(t[4]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"px-2 py-1 rounded-md text-sm font-medium hover:bg-accent/10 text-muted-foreground hover:text-foreground transition-colors",title:"  "},"  "),i.breadcrumbs.length>0?(x(),R("span",mr,"/")):V("",!0),(x(!0),R(Se,null,We(i.breadcrumbs,(n,u)=>(x(),R("button",{key:n.id||"root",onClick:m=>i.handleBreadcrumbClick(n),class:it(["px-2 py-1 rounded-md text-sm transition-colors",u===i.breadcrumbs.length-1?"font-semibold text-foreground cursor-default":"text-muted-foreground hover:text-foreground hover:bg-accent/10 cursor-pointer"])},L(n.name),11,pr))),128))]),c("div",vr,[c("button",{onClick:t[5]||(t[5]=(...n)=>i.handleBack&&i.handleBack(...n)),class:"px-4 py-2 rounded-md text-sm font-medium hover:bg-accent/10"},"  "),!i.isTrashFolder&&!i.selectionMode?(x(),R("button",{key:0,onClick:t[6]||(t[6]=(...n)=>i.handleCreateFolder&&i.handleCreateFolder(...n)),disabled:i.loading,class:"px-4 py-2 rounded-md text-sm font-medium bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2"},[t[42]||(t[42]=c("span",null,"",-1)),c("span",null,L(i.loading?"...":" "),1)],8,br)):V("",!0)]),i.isTrashFolder?V("",!0):(x(),R("div",wr,[c("div",{class:it(["border-2 border-dashed border-border rounded-lg p-8 transition-colors",{"border-accent bg-accent/5":i.isDragging}]),onDrop:t[15]||(t[15]=ge((...n)=>i.handleDrop&&i.handleDrop(...n),["prevent"])),onDragover:t[16]||(t[16]=ge(n=>i.isDragging=!0,["prevent"])),onDragleave:t[17]||(t[17]=ge(n=>i.isDragging=!1,["prevent"]))},[c("p",xr,L(i.isDragging?"   ":'      "".      10 '),1),c("div",yr,[c("label",Cr,[c("input",{ref:"fileInput",type:"file",multiple:"",class:"hidden",onChange:t[7]||(t[7]=(...n)=>i.handleFileSelect&&i.handleFileSelect(...n))},null,544),c("button",{type:"button",onClick:t[8]||(t[8]=(...n)=>i.handleFileButtonClick&&i.handleFileButtonClick(...n)),onDrop:t[9]||(t[9]=ge((...n)=>i.handleDropOnButton&&i.handleDropOnButton(...n),["prevent"])),onDragover:t[10]||(t[10]=ge(n=>i.isDraggingButton=!0,["prevent"])),onDragleave:t[11]||(t[11]=ge(n=>i.isDraggingButton=!1,["prevent"])),class:it(["w-full h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center transition-colors",{"border-accent bg-accent/10":i.isDraggingButton}])},L(i.isDraggingButton?" ":"+ "),35)]),c("button",{onClick:t[12]||(t[12]=(...n)=>i.handleUpload&&i.handleUpload(...n)),disabled:!i.canUpload,class:"flex-1 h-11 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center"},L(i.uploading?"...":" "),9,Sr),c("button",{onClick:t[13]||(t[13]=(...n)=>i.handleCancel&&i.handleCancel(...n)),class:"flex-1 h-11 px-4 border border-border bg-background/50 hover:bg-accent/10 hover:text-accent hover:border-accent rounded-lg inline-flex items-center justify-center"},"   ")]),i.selectedFiles.length>0?(x(),R("div",zr,[c("p",Mr,[Ci("  : "+L(i.selectedFiles.length)+" ",1),i.uploadProgress.total>0?(x(),R("span",Ar," ("+L(i.uploadProgress.completed)+"/"+L(i.uploadProgress.total)+" ) ",1)):V("",!0)]),i.uploading&&i.uploadProgress.total>0?(x(),R("div",kr,[c("div",Rr,[t[43]||(t[43]=c("span",{class:"text-xs text-muted-foreground"}," ",-1)),c("span",Er,L(Math.round(i.uploadProgress.completed/i.uploadProgress.total*100))+"%",1)]),c("div",Fr,[c("div",{class:"h-full bg-accent transition-all duration-300",style:Si({width:`${i.uploadProgress.completed/i.uploadProgress.total*100}%`})},null,4)])])):V("",!0),c("div",_r,[(x(!0),R(Se,null,We(i.selectedFiles,(n,u)=>(x(),R("div",{key:u,class:"group relative aspect-square rounded-lg overflow-hidden border border-border bg-muted/30"},[i.isImageFile(n)?(x(),R("img",{key:0,src:i.getFilePreview(n),alt:n.name,class:"w-full h-full object-cover"},null,8,Tr)):i.isVideoFile(n)?(x(),R("video",{key:1,src:i.getFilePreview(n),class:"w-full h-full object-cover",muted:"",onError:t[14]||(t[14]=m=>{m.target.style.display="none"})},null,40,Dr)):(x(),R("div",jr,[c("div",Pr,L(i.getFileIconFromFile(n)),1),c("p",Ir,L(i.getFileExtension(n.name)?.toUpperCase()||"FILE"),1)])),c("div",Lr,[c("p",{class:"text-white text-xs text-center truncate w-full px-2",title:n.name},L(n.name),9,Br),c("p",Or,L(i.formatFileSize(n.size)),1)]),n.uploadProgress!==void 0?(x(),R("div",Wr,[c("div",Hr,[c("span",Nr,L(n.name),1),n.uploadError?(x(),R("span",Xr,"   ")):(x(),R("span",Ur,L(n.uploadProgress)+"% ",1))]),n.uploadError?(x(),R("div",Yr)):(x(),R("div",Vr,[c("div",{class:it(["h-full transition-all duration-300",n.uploadProgress===100?"bg-green-500":"bg-accent"]),style:Si({width:`${n.uploadProgress}%`})},null,6)]))])):V("",!0)]))),128))])])):V("",!0)],34)])),i.loadingMedia?(x(),R("div",qr,[...t[44]||(t[44]=[c("p",{class:"text-muted-foreground"}," ...",-1)])])):V("",!0),i.nestedFolders.length>0&&!i.loadingMedia?(x(),R("div",Zr,[c("h3",Gr," ("+L(i.nestedFolders.length)+")",1),c("div",Qr,[(x(!0),R(Se,null,We(i.nestedFolders,n=>(x(),R("div",{key:n.id,class:"group relative"},[c("div",{class:"cursor-pointer",onClick:u=>i.handleFolderClick(n)},[c("div",Kr,[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-full h-full object-contain max-w-[66.67%] max-h-[66.67%]",onError:t[18]||(t[18]=(...u)=>i.handleFolderImageError&&i.handleFolderImageError(...u))},null,40,$r)]),c("div",es,[c("p",{class:"text-sm font-medium text-foreground truncate",title:n.name},L(n.name),9,ts),n.protected?(x(),R("div",is,[...t[45]||(t[45]=[c("span",{class:"text-xs",title:" "},"",-1)])])):V("",!0)])],8,Jr),i.isTrashFolder?(x(),R(Se,{key:1},[c("button",{onClick:ge(u=>i.handleRestoreFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-green-500 text-white rounded text-xs hover:bg-green-600 z-10",title:" "},"  ",8,rs),i.selectionMode?V("",!0):(x(),R("button",{key:0,onClick:ge(u=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:" "},"  ",8,ss))],64)):(x(),R(Se,{key:0},[!n.protected&&!i.selectionMode?(x(),R("button",{key:0,onClick:ge(u=>i.handleDeleteFolder(n),["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 flex items-center justify-center bg-destructive text-white rounded text-xs hover:bg-destructive/90 z-10",title:" "},"  ",8,os)):V("",!0),n.protected?(x(),R("div",ns,"  ")):V("",!0)],64))]))),128))])])):V("",!0),i.selectedFolder&&!i.isTrashFolder?(x(),R("div",as,[c("div",ls,[c("div",cs,[c("div",ds,[t[46]||(t[46]=c("span",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"},"",-1)),ze(c("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=n=>i.fileSearchQuery=n),onKeyup:t[20]||(t[20]=lo(n=>i.handleFileSearch(!0),["enter"])),onInput:t[21]||(t[21]=n=>i.handleFileSearch(!1)),placeholder:" ...",class:"flex h-10 w-full sm:w-64 rounded-md border border-input bg-background px-3 py-2 pl-9 text-sm"},null,544),[[bt,i.fileSearchQuery]])])]),ze(c("select",{"onUpdate:modelValue":t[22]||(t[22]=n=>i.fileTypeFilter=n),onChange:t[23]||(t[23]=(...n)=>i.handleTypeFilter&&i.handleTypeFilter(...n)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[...t[47]||(t[47]=[co('<option value=""> </option><option value="photo"></option><option value="video"></option><option value="document"></option><option value="audio"></option>',5)])],544),[[ui,i.fileTypeFilter]]),c("select",{onChange:t[24]||(t[24]=n=>{const u=i.sortOptions.find(m=>m.label===n.target.value);u&&i.handleSortChange(u.value,u.order)}),value:i.currentSortLabel,class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[180px]"},[(x(!0),R(Se,null,We(i.sortOptions,n=>(x(),R("option",{key:`${n.value}-${n.order}`,value:n.label},L(n.label),9,hs))),128))],40,us),c("div",fs,[t[48]||(t[48]=c("label",{class:"text-sm text-muted-foreground whitespace-nowrap"}," :",-1)),ze(c("select",{"onUpdate:modelValue":t[25]||(t[25]=n=>i.perPage=n),onChange:t[26]||(t[26]=(...n)=>i.handlePerPageChange&&i.handlePerPageChange(...n)),class:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm"},[(x(!0),R(Se,null,We(i.perPageOptions,n=>(x(),R("option",{key:n,value:n},L(n),9,gs))),128))],544),[[ui,i.perPage,void 0,{number:!0}]])])])])):V("",!0),i.mediaFiles.length>0&&!i.loadingMedia?(x(),R("div",ms,[c("div",ps,[c("h3",vs,[t[49]||(t[49]=Ci("   ",-1)),i.paginationData?(x(),R("span",bs," ("+L(i.paginationData.from)+"-"+L(i.paginationData.to)+"  "+L(i.paginationData.total)+") ",1)):(x(),R("span",ws," ("+L(i.mediaFiles.length)+") ",1)),i.isTrashFolder?(x(),R("span",xs,"()")):V("",!0)]),i.isTrashFolder&&i.mediaFiles.length>0?(x(),R("button",{key:0,onClick:t[27]||(t[27]=(...n)=>i.handleClearTrash&&i.handleClearTrash(...n)),disabled:i.clearingTrash,class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium"},L(i.clearingTrash?"...":"  "),9,ys)):V("",!0)]),c("div",Cs,[(x(!0),R(Se,null,We(i.mediaFiles,n=>(x(),R("div",{key:n.id,class:it(["group bg-background border rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow flex flex-col",i.selectionMode&&(n.type==="photo"||n.type==="video")?i.isFileSelected(n)?"border-primary border-2 cursor-pointer":"border-border cursor-pointer hover:border-primary":"border-border"]),onClick:u=>i.selectionMode&&(n.type==="photo"||n.type==="video")?i.openFilePreview(n):null},[c("div",zs,[n.type==="photo"?(x(),R("img",{key:0,src:n.url,alt:n.original_name,class:"w-full h-full object-cover"},null,8,Ms)):n.type==="video"?(x(),R("video",{key:1,src:n.url,class:"w-full h-full object-cover",muted:"",onMouseenter:t[28]||(t[28]=u=>{try{u.target.play()}catch{}}),onMouseleave:t[29]||(t[29]=u=>{try{u.target.pause(),u.target.currentTime=0}catch{}}),onError:t[30]||(t[30]=u=>{u.target.style.display="none"})},null,40,As)):(x(),R("div",ks,[c("div",Rs,L(i.getFileIcon(n)||""),1),c("p",Es,L(n.extension?.toUpperCase()||"FILE"),1)])),i.selectionMode&&i.isFileSelected(n)?(x(),R("div",Fs,"  ")):V("",!0),i.selectionMode&&(n.type==="photo"||n.type==="video")?(x(),R("button",{key:4,onClick:ge(u=>i.openFilePreview(n),["stop"]),class:it(["absolute inset-0 flex items-center justify-center transition-opacity cursor-pointer",i.isFileSelected(n)?"opacity-100 bg-primary/30":"opacity-0 group-hover:opacity-100 bg-primary/20 hover:bg-primary/30"]),title:i.isFileSelected(n)?"":""},[...t[50]||(t[50]=[c("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg hover:scale-110 transition-transform bg-primary/95 text-white"},[c("span",{class:"text-2xl"},"")],-1)])],10,_s)):!i.selectionMode&&i.isPreviewable(n)?(x(),R("button",{key:5,onClick:ge(u=>i.openFilePreview(n),["stop"]),class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 hover:bg-black/30 cursor-pointer",title:""},[...t[51]||(t[51]=[c("div",{class:"w-16 h-16 rounded-full backdrop-blur-sm flex items-center justify-center shadow-lg hover:scale-110 transition-transform bg-white/95"},[c("span",{class:"text-2xl"},"")],-1)])],8,Ts)):V("",!0)]),c("div",Ds,[c("p",{class:"font-semibold text-sm text-foreground truncate",title:n.original_name},L(n.original_name),9,js),c("div",Ps,[c("span",null,L(i.formatFileSize(n.size)),1),n.extension?(x(),R("span",Is," ."+L(n.extension.toUpperCase()),1)):V("",!0)]),n.width&&n.height?(x(),R("p",Ls,L(n.width)+"  "+L(n.height),1)):V("",!0)]),i.selectionMode?V("",!0):(x(),R("div",Bs,[i.isTrashFolder?(x(),R(Se,{key:1},[c("button",{onClick:ge(u=>i.handleRestoreFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:""},[...t[56]||(t[56]=[c("span",{class:"text-sm"},"",-1)])],8,Us),c("button",{onClick:ge(u=>i.handleDeleteFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:" "},[...t[57]||(t[57]=[c("span",{class:"text-sm"},"",-1)])],8,Xs)],64)):(x(),R(Se,{key:0},[c("button",{onClick:ge(u=>i.handleDownloadFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",title:""},[...t[52]||(t[52]=[c("span",{class:"text-sm"},"",-1)])],8,Os),n.type==="photo"?(x(),R("button",{key:0,onClick:ge(u=>i.handleEditFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:""},[...t[53]||(t[53]=[c("span",{class:"text-sm"},"",-1)])],8,Ws)):V("",!0),c("button",{onClick:ge(u=>i.handleMoveFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",title:""},[...t[54]||(t[54]=[c("span",{class:"text-sm"},"",-1)])],8,Hs),c("button",{onClick:ge(u=>i.handleDeleteFile(n),["stop"]),class:"flex-1 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:""},[...t[55]||(t[55]=[c("span",{class:"text-sm"},"",-1)])],8,Ns)],64))]))],10,Ss))),128))])])):V("",!0),i.paginationData&&i.paginationData.total>0&&!i.loadingMedia?(x(),R("div",Vs,[c("div",Ys,[i.paginationData.last_page>1?(x(),R("span",qs,"  "+L(i.paginationData.current_page)+"  "+L(i.paginationData.last_page),1)):(x(),R("span",Zs,"  : "+L(i.paginationData.total),1))]),i.paginationData.last_page>1?(x(),R("div",Gs,[c("button",{onClick:t[31]||(t[31]=n=>i.handlePageChange(i.paginationData.current_page-1)),disabled:i.paginationData.current_page===1,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"},"   ",8,Qs),c("div",Js,[(x(!0),R(Se,null,We(i.getPageNumbers(i.paginationData.current_page,i.paginationData.last_page),n=>(x(),R("button",{key:n,onClick:u=>i.handlePageChange(n),class:it(["px-3 py-2 rounded-md border text-sm transition-colors min-w-[40px]",n===i.paginationData.current_page?"bg-accent text-accent-foreground border-accent font-semibold":"border-border bg-background hover:bg-accent/10"])},L(n),11,Ks))),128))]),c("button",{onClick:t[32]||(t[32]=n=>i.handlePageChange(i.paginationData.current_page+1)),disabled:i.paginationData.current_page===i.paginationData.last_page,class:"px-3 py-2 rounded-md border border-border bg-background hover:bg-accent/10 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-colors"},"   ",8,$s)])):V("",!0)])):V("",!0),i.nestedFolders.length===0&&i.mediaFiles.length===0&&!i.loadingMedia?(x(),R("div",ea,[c("p",ta,L(i.isTrashFolder?" ":i.fileSearchQuery||i.fileTypeFilter?"  ":"       "),1),i.selectedFolder?(x(),R("p",ia," Debug: folder_id="+L(i.selectedFolder.id)+", is_trash="+L(i.selectedFolder.is_trash)+", nestedFolders="+L(i.nestedFolders.length)+", mediaFiles="+L(i.mediaFiles.length)+", loadingMedia="+L(i.loadingMedia),1)):V("",!0)])):V("",!0)])])):V("",!0)]),i.lightboxSources.length>0?(x(),ce(a,{key:0,toggler:i.lightboxToggler,sources:i.lightboxSources,slide:i.lightboxSlide},null,8,["toggler","sources","slide"])):V("",!0),xe(l,{show:i.showImageEditor,file:i.selectedFileForEdit,onClose:t[33]||(t[33]=n=>i.showImageEditor=!1),onSaved:i.handleImageSaved},null,8,["show","file","onSaved"]),i.showMoveModal?(x(),R("div",oa,[c("div",na,[t[60]||(t[60]=c("h3",{class:"text-lg font-semibold mb-4"}," ",-1)),i.selectedFileForMove?(x(),R("p",ra,L(i.selectedFileForMove.original_name),1)):V("",!0),c("div",sa,[t[59]||(t[59]=c("label",{class:"text-sm font-medium mb-2 block"}," ",-1)),c("div",aa,[c("div",la,[c("button",{onClick:t[35]||(t[35]=n=>i.selectMoveFolder(null)),class:it(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",i.selectedMoveFolderId===null?"bg-accent/20 border border-accent/40":""])},[c("img",{src:i.getDefaultFolderIcon(),alt:" ",class:"w-[13.33px] h-[13.33px] object-contain",onError:t[34]||(t[34]=(...n)=>i.handleFolderImageError&&i.handleFolderImageError(...n))},null,40,ca),t[58]||(t[58]=c("span",{class:"flex-1"}," ",-1))],2),(x(!0),R(Se,null,We(i.allFolders,n=>(x(),R("div",{key:n.id,class:"mt-1"},[c("button",{onClick:u=>i.selectMoveFolder(n.id),class:it(["w-full text-left px-3 py-2 rounded hover:bg-accent/10 transition-colors flex items-center gap-2",i.selectedMoveFolderId===n.id?"bg-accent/20 border border-accent/40":""])},[c("img",{src:i.getFolderIcon(n),alt:n.name,class:"w-[13.33px] h-[13.33px] object-contain",onError:t[36]||(t[36]=(...u)=>i.handleFolderImageError&&i.handleFolderImageError(...u))},null,40,ua),c("span",ha,L(n.name),1),n.count?(x(),R("span",fa,L(n.count)+"  ",1)):V("",!0)],10,da)]))),128))])])]),c("div",ga,[c("button",{onClick:t[37]||(t[37]=n=>i.showMoveModal=!1),class:"flex-1 h-10 px-4 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},"  "),c("button",{onClick:t[38]||(t[38]=(...n)=>i.confirmMoveFile&&i.confirmMoveFile(...n)),disabled:i.moving,class:"flex-1 h-10 px-4 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},L(i.moving?"...":""),9,ma)])])])):V("",!0)],64)}const xa=Li(Xn,[["render",pa]]);export{xa as default};
