import{r as v,k as w,c as r,a as t,b as i,t as c,w as y,d as u,v as p,B as g,j as m,o as d}from"./admin-BRyfBNbs.js";const h={class:"bot-config-page space-y-6"},U={key:0,class:"flex items-center justify-center py-12"},V={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},M={class:"text-destructive"},C={key:2,class:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg"},B={class:"text-green-600"},A={class:"bg-card rounded-lg border border-border p-6"},L={class:"space-y-4"},T={class:"bg-card rounded-lg border border-border p-6"},j={class:"space-y-4"},N={class:"flex items-center gap-2"},R={key:0},W={key:1,class:"space-y-3"},D={class:"flex items-center gap-2"},H={key:0,class:"space-y-3 pl-6"},$={__name:"BotConfig",setup(I){const n=v(!1),a=v(null),b=v(null),l=v({bot_token:"",webhook_url:"",mini_app_url:"",welcome_message:{enabled:!0,text:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>",mini_app_button:{enabled:!0,text:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",url:""}}}),f=async()=>{n.value=!0,a.value=null;try{const o=await m.get("/api/v1/settings/bot");o.data&&(l.value={bot_token:o.data.bot_token||"",webhook_url:o.data.webhook_url||"",mini_app_url:o.data.mini_app_url||"",welcome_message:o.data.welcome_message||l.value.welcome_message})}catch(o){a.value=o.response?.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{n.value=!1}},_=async()=>{n.value=!0,a.value=null,b.value=null;try{if(await m.post("/api/v1/settings/bot",l.value),b.value="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",l.value.bot_token)try{await m.post("/api/v1/settings/bot/set-webhook",{url:l.value.webhook_url||void 0})}catch(o){console.error("–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook:",o)}}catch(o){a.value=o.response?.data?.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{n.value=!1}},x=async()=>{n.value=!0,a.value=null;try{const o=await m.post("/api/v1/settings/bot/test-connection");o.data.success?b.value="–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ë–æ—Ç: "+o.data.bot.username:a.value=o.data.error||"–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}catch(o){a.value=o.response?.data?.error||"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}finally{n.value=!1}},k=async()=>{n.value=!0,a.value=null;try{const o=await m.get("/api/v1/settings/bot/webhook-info");if(o.data.ok){const e=o.data.result;b.value=`Webhook: ${e.url||"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"}, –û–∂–∏–¥–∞—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: ${e.pending_update_count||0}`}else a.value=o.data.description||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"}catch(o){a.value=o.response?.data?.error||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ webhook"}finally{n.value=!1}};return w(()=>{f()}),(o,e)=>(d(),r("div",h,[e[20]||(e[20]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞"),t("p",{class:"text-muted-foreground mt-1"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Telegram –±–æ—Ç–∞ –∏ webhook")],-1)),n.value?(d(),r("div",U,[...e[8]||(e[8]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫...",-1)])])):i("",!0),a.value?(d(),r("div",V,[t("p",M,c(a.value),1)])):i("",!0),b.value?(d(),r("div",C,[t("p",B,c(b.value),1)])):i("",!0),n.value?i("",!0):(d(),r("form",{key:3,onSubmit:y(_,["prevent"]),class:"space-y-6"},[t("div",A,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold mb-4"},"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",-1)),t("div",L,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–æ–∫–µ–Ω –±–æ—Ç–∞",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.bot_token=s),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"},null,512),[[p,l.value.bot_token]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium mb-2"},"Webhook URL",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.webhook_url=s),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com/api/telegram/webhook"},null,512),[[p,l.value.webhook_url]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-2"},"Mini App URL",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.mini_app_url=s),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[p,l.value.mini_app_url]])])])]),t("div",T,[e[18]||(e[18]=t("h2",{class:"text-xl font-semibold mb-4"},"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1)),t("div",j,[t("div",N,[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.welcome_message.enabled=s),type:"checkbox",id:"welcome_enabled",class:"w-4 h-4"},null,512),[[g,l.value.welcome_message.enabled]]),e[13]||(e[13]=t("label",{for:"welcome_enabled",class:"text-sm font-medium"},"–í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1))]),l.value.welcome_message.enabled?(d(),r("div",R,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (HTML)",-1)),u(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.welcome_message.text=s),rows:"5",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>"},null,512),[[p,l.value.welcome_message.text]])])):i("",!0),l.value.welcome_message.enabled?(d(),r("div",W,[t("div",D,[u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.welcome_message.mini_app_button.enabled=s),type:"checkbox",id:"button_enabled",class:"w-4 h-4"},null,512),[[g,l.value.welcome_message.mini_app_button.enabled]]),e[15]||(e[15]=t("label",{for:"button_enabled",class:"text-sm font-medium"},"–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É Mini App",-1))]),l.value.welcome_message.mini_app_button.enabled?(d(),r("div",H,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏",-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.welcome_message.mini_app_button.text=s),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"},null,512),[[p,l.value.welcome_message.mini_app_button.text]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"URL Mini App",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.welcome_message.mini_app_button.url=s),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[p,l.value.welcome_message.mini_app_button.url]])])])):i("",!0)])):i("",!0)])]),t("div",{class:"flex gap-4"},[e[19]||(e[19]=t("button",{type:"submit",class:"px-6 py-2 bg-accent text-white rounded-lg hover:bg-accent/90"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)),t("button",{type:"button",onClick:x,class:"px-6 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80"}," –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ "),t("button",{type:"button",onClick:k,class:"px-6 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80"}," –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook ")])],32))]))}};export{$ as default};
