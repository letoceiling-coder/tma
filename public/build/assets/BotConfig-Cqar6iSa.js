import{r as m,k,c as n,a as t,b as u,t as v,w,d as i,v as p,B as c,j as g,o as d}from"./admin-D831b1AY.js";const h={class:"bot-config-page space-y-6"},M={key:0,class:"flex items-center justify-center py-12"},U={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},V={class:"text-destructive"},C={key:2,class:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg"},B={class:"text-green-600"},A={class:"bg-card rounded-lg border border-border p-6"},T={class:"space-y-4"},j={class:"bg-card rounded-lg border border-border p-6"},L={class:"space-y-4"},N={class:"flex items-center gap-2"},D={key:0},H={key:1,class:"space-y-3"},I={class:"flex items-center gap-2"},R={key:0,class:"space-y-3 pl-6"},$={__name:"BotConfig",setup(S){const r=m(!1),a=m(null),b=m(null),o=m({bot_token:"",webhook_url:"",mini_app_url:"",welcome_message:{enabled:!0,text:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>",mini_app_button:{enabled:!0,text:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",url:""}}}),y=async()=>{r.value=!0,a.value=null;try{const l=await g.get("/api/v1/settings/bot");l.data&&(o.value={bot_token:l.data.bot_token||"",mini_app_url:l.data.mini_app_url||"",welcome_message:l.data.welcome_message||o.value.welcome_message})}catch(l){a.value=l.response?.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{r.value=!1}},_=async()=>{r.value=!0,a.value=null,b.value=null;try{await g.post("/api/v1/settings/bot",o.value),b.value="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"}catch(l){a.value=l.response?.data?.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{r.value=!1}},x=async()=>{r.value=!0,a.value=null;try{const l=await g.post("/api/v1/settings/bot/test-connection");l.data.success?b.value="–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ë–æ—Ç: "+l.data.bot.username:a.value=l.data.error||"–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}catch(l){a.value=l.response?.data?.error||"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}finally{r.value=!1}},f=async()=>{r.value=!0,a.value=null;try{const l=await g.get("/api/v1/settings/bot/webhook-info");if(l.data.ok){const e=l.data.result;b.value=`Webhook: ${e.url||"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"}, –û–∂–∏–¥–∞—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: ${e.pending_update_count||0}`}else a.value=l.data.description||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"}catch(l){a.value=l.response?.data?.error||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ webhook"}finally{r.value=!1}};return k(()=>{y()}),(l,e)=>(d(),n("div",h,[e[18]||(e[18]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞"),t("p",{class:"text-muted-foreground mt-1"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Telegram –±–æ—Ç–∞ –∏ webhook")],-1)),r.value?(d(),n("div",M,[...e[7]||(e[7]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫...",-1)])])):u("",!0),a.value?(d(),n("div",U,[t("p",V,v(a.value),1)])):u("",!0),b.value?(d(),n("div",C,[t("p",B,v(b.value),1)])):u("",!0),r.value?u("",!0):(d(),n("form",{key:3,onSubmit:w(_,["prevent"]),class:"space-y-6"},[t("div",A,[e[10]||(e[10]=t("h2",{class:"text-xl font-semibold mb-4"},"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",-1)),t("div",T,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–æ–∫–µ–Ω –±–æ—Ç–∞",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.bot_token=s),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"},null,512),[[p,o.value.bot_token]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-2"},"Mini App URL",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.mini_app_url=s),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[p,o.value.mini_app_url]])])])]),t("div",j,[e[16]||(e[16]=t("h2",{class:"text-xl font-semibold mb-4"},"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1)),t("div",L,[t("div",N,[i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.welcome_message.enabled=s),type:"checkbox",id:"welcome_enabled",class:"w-4 h-4"},null,512),[[c,o.value.welcome_message.enabled]]),e[11]||(e[11]=t("label",{for:"welcome_enabled",class:"text-sm font-medium"},"–í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1))]),o.value.welcome_message.enabled?(d(),n("div",D,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (HTML)",-1)),i(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.welcome_message.text=s),rows:"5",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>"},null,512),[[p,o.value.welcome_message.text]])])):u("",!0),o.value.welcome_message.enabled?(d(),n("div",H,[t("div",I,[i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.welcome_message.mini_app_button.enabled=s),type:"checkbox",id:"button_enabled",class:"w-4 h-4"},null,512),[[c,o.value.welcome_message.mini_app_button.enabled]]),e[13]||(e[13]=t("label",{for:"button_enabled",class:"text-sm font-medium"},"–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É Mini App",-1))]),o.value.welcome_message.mini_app_button.enabled?(d(),n("div",R,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.welcome_message.mini_app_button.text=s),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"},null,512),[[p,o.value.welcome_message.mini_app_button.text]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium mb-2"},"URL Mini App",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.welcome_message.mini_app_button.url=s),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[p,o.value.welcome_message.mini_app_button.url]])])])):u("",!0)])):u("",!0)])]),t("div",{class:"flex gap-4"},[e[17]||(e[17]=t("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)),t("button",{type:"button",onClick:x,class:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors"}," –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ "),t("button",{type:"button",onClick:f,class:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors"}," –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook ")])],32))]))}};export{$ as default};
