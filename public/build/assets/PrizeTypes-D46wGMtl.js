import{_ as N,c as n,a as e,b as c,t as i,F as q,q as A,w,d as u,e as j,v as k,C as F,A as I,D as G,f as R,r as a,k as H,h as J,o as r,p as K}from"./admin-DV02a_ex.js";import{a as O,d as Q,b as W,c as X}from"./api-DccBIR6h.js";import{S as p}from"./sweetalert2.esm.all-C0u8rGqG.js";import Y from"./Media-zNX4kA2U.js";const Z={name:"PrizeTypes",components:{Media:Y},setup(){const m=a(!1),t=a(!1),v=a(null),o=a([]),h=a(!1),f=a(!1),g=a(!1),s=a(null),x=a(null),b=a({name:"",type:"empty",value:0,message:"",action:"none",icon_url:"",is_active:!0}),P=l=>({money:"–î–µ–Ω—å–≥–∏",ticket:"–ë–∏–ª–µ—Ç",gift:"–ü–æ–¥–∞—Ä–æ–∫",secret_box:"–°–µ–∫—Ä–µ—Ç–Ω—ã–π –±–æ–∫—Å",empty:"–ü—É—Å—Ç–æ",sponsor_gift:"–ü–æ–¥–∞—Ä–æ–∫ –æ—Ç —Å–ø–æ–Ω—Å–æ—Ä–∞"})[l]||l,S=l=>({none:"–ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è",add_ticket:"–î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç"})[l]||l,M=async()=>{m.value=!0,v.value=null;try{const l=await O("/wow/prize-types");if(!l.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ –ø—Ä–∏–∑–æ–≤");const d=await l.json();o.value=d.data||[]}catch(l){v.value=l.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ –ø—Ä–∏–∑–æ–≤"}finally{m.value=!1}},V=()=>{b.value={name:"",type:"empty",value:0,message:"",action:"none",icon_url:"",is_active:!0},x.value=null},_=()=>{h.value=!1,f.value=!1,V()},E=l=>{x.value=l,b.value={name:l.name,type:l.type,value:l.value||0,message:l.message||"",action:l.action||"none",icon_url:l.icon_url||"",is_active:l.is_active!==!1},f.value=!0},B=async()=>{t.value=!0;try{let l;if(f.value&&x.value?l=await W(`/wow/prize-types/${x.value.id}`,b.value):l=await X("/wow/prize-types",b.value),!l.ok){const d=await l.json();throw new Error(d.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–∏–∑–∞")}await p.fire({title:"–£—Å–ø–µ—à–Ω–æ",text:f.value?"–¢–∏–ø –ø—Ä–∏–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω":"–¢–∏–ø –ø—Ä–∏–∑–∞ —Å–æ–∑–¥–∞–Ω",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),_(),await M()}catch(l){await p.fire({title:"–û—à–∏–±–∫–∞",text:l.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–∏–∑–∞",icon:"error",confirmButtonText:"–û–ö"})}finally{t.value=!1}},U=async l=>{if((await p.fire({title:"–£–¥–∞–ª–∏—Ç—å —Ç–∏–ø –ø—Ä–∏–∑–∞?",text:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å "${l.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"–î–∞, —É–¥–∞–ª–∏—Ç—å",cancelButtonText:"–û—Ç–º–µ–Ω–∞"})).isConfirmed)try{const y=await Q(`/wow/prize-types/${l.id}`);if(!y.ok){const L=await y.json();throw new Error(L.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–∏–∑–∞")}await p.fire({title:"–£—Å–ø–µ—à–Ω–æ",text:"–¢–∏–ø –ø—Ä–∏–∑–∞ —É–¥–∞–ª–µ–Ω",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await M()}catch(y){await p.fire({title:"–û—à–∏–±–∫–∞",text:y.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–∏–∑–∞",icon:"error",confirmButtonText:"–û–ö"})}},T=()=>{s.value=null,g.value=!0},C=()=>{g.value=!1,s.value=null},z=l=>{if(l){const d=l.url||(l.metadata?.path?"/"+l.metadata.path:"");b.value.icon_url=d||"",s.value=l,setTimeout(()=>{C()},300)}},D=l=>{l.target.style.display="none"};return H(()=>{M()}),{loading:m,saving:t,error:v,prizeTypes:o,showCreateModal:h,showEditModal:f,showMediaModal:g,form:b,getTypeLabel:P,getActionLabel:S,editPrizeType:E,savePrizeType:B,deletePrizeType:U,closeModal:_,openMediaSelector:T,closeMediaModal:C,handleMediaFileSelected:z,handleImageError:D}}},$={class:"prize-types-page space-y-6"},ee={class:"flex items-center justify-between"},te={key:0,class:"flex items-center justify-center py-12"},oe={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},se={class:"text-destructive"},le={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},ne={class:"overflow-x-auto"},re={class:"w-full"},ae={class:"divide-y divide-border"},de={class:"px-6 py-4 text-sm font-medium text-foreground"},ie={class:"px-6 py-4 text-sm text-foreground"},ce={class:"px-2 py-1 text-xs rounded-md bg-blue-500/10 text-blue-600"},ue={class:"px-6 py-4 text-sm text-foreground"},me={class:"px-6 py-4 text-sm text-foreground"},fe={key:0,class:"px-2 py-1 text-xs rounded-md bg-green-500/10 text-green-600"},xe={key:1,class:"text-muted-foreground"},be={class:"px-6 py-4 text-sm"},ge={class:"px-6 py-4 text-sm text-right"},pe={class:"flex items-center justify-end gap-2"},ve=["onClick"],ye=["onClick"],we={key:3,class:"bg-card rounded-lg border border-border p-12 text-center"},ke={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6"},he={class:"text-lg font-semibold mb-4"},Me={class:"flex gap-2"},_e={key:0,class:"mt-2"},Ce=["src"],je={class:"flex items-center gap-2"},Fe={class:"flex items-center justify-end gap-3 pt-4"},Pe=["disabled"],Se={class:"flex items-center justify-between p-4 border-b border-border"},Ve={class:"flex-1 overflow-y-auto min-h-0"};function Ee(m,t,v,o,h,f){const g=J("Media");return r(),n("div",$,[e("div",ee,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-foreground"},"–¢–∏–ø—ã –ø—Ä–∏–∑–æ–≤"),e("p",{class:"text-muted-foreground mt-1"},"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏ –ø—Ä–∏–∑–æ–≤ –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏")],-1)),e("button",{onClick:t[0]||(t[0]=s=>o.showCreateModal=!0),class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2"},[...t[16]||(t[16]=[e("span",null,"+",-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –ø—Ä–∏–∑–∞",-1)])])]),o.loading?(r(),n("div",te,[...t[18]||(t[18]=[e("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–æ–≤ –ø—Ä–∏–∑–æ–≤...",-1)])])):c("",!0),o.error?(r(),n("div",oe,[e("p",se,i(o.error),1)])):c("",!0),!o.loading&&o.prizeTypes.length>0?(r(),n("div",le,[e("div",ne,[e("table",re,[t[19]||(t[19]=e("thead",{class:"bg-muted/30 border-b border-border"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase"},"–ù–∞–∑–≤–∞–Ω–∏–µ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase"},"–¢–∏–ø"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase"},"–ó–Ω–∞—á–µ–Ω–∏–µ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase"},"–î–µ–π—Å—Ç–≤–∏–µ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase"},"–°—Ç–∞—Ç—É—Å"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase"},"–î–µ–π—Å—Ç–≤–∏—è")])],-1)),e("tbody",ae,[(r(!0),n(q,null,A(o.prizeTypes,s=>(r(),n("tr",{key:s.id,class:"hover:bg-muted/10"},[e("td",de,i(s.name),1),e("td",ie,[e("span",ce,i(o.getTypeLabel(s.type)),1)]),e("td",ue,i(s.value||"-"),1),e("td",me,[s.action!=="none"?(r(),n("span",fe,i(o.getActionLabel(s.action)),1)):(r(),n("span",xe,"-"))]),e("td",be,[e("span",{class:K(["px-2 py-1 text-xs rounded-md",s.is_active?"bg-green-500/10 text-green-600":"bg-gray-500/10 text-gray-600"])},i(s.is_active?"–ê–∫—Ç–∏–≤–µ–Ω":"–ù–µ–∞–∫—Ç–∏–≤–µ–Ω"),3)]),e("td",ge,[e("div",pe,[e("button",{onClick:x=>o.editPrizeType(s),class:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors"}," –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ",8,ve),e("button",{onClick:x=>o.deletePrizeType(s),class:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors"}," –£–¥–∞–ª–∏—Ç—å ",8,ye)])])]))),128))])])])])):c("",!0),!o.loading&&o.prizeTypes.length===0?(r(),n("div",we,[...t[20]||(t[20]=[e("p",{class:"text-muted-foreground"},"–¢–∏–ø—ã –ø—Ä–∏–∑–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–∏–ø –ø—Ä–∏–∑–∞.",-1)])])):c("",!0),o.showCreateModal||o.showEditModal?(r(),n("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:t[12]||(t[12]=w((...s)=>o.closeModal&&o.closeModal(...s),["self"]))},[e("div",ke,[e("h3",he,i(o.showEditModal?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –ø—Ä–∏–∑–∞":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –ø—Ä–∏–∑–∞"),1),e("form",{onSubmit:t[11]||(t[11]=w((...s)=>o.savePrizeType&&o.savePrizeType(...s),["prevent"])),class:"space-y-4"},[e("div",null,[t[21]||(t[21]=e("label",{class:"text-sm font-medium mb-1 block"},[j("–ù–∞–∑–≤–∞–Ω–∏–µ "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.name=s),type:"text",placeholder:"–î–µ–Ω—å–≥–∏ 300 —Ä—É–±–ª–µ–π",required:"",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,512),[[k,o.form.name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-sm font-medium mb-1 block"},[j("–¢–∏–ø "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.type=s),required:"",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},[...t[22]||(t[22]=[I('<option value="money">–î–µ–Ω—å–≥–∏</option><option value="ticket">–ë–∏–ª–µ—Ç</option><option value="gift">–ü–æ–¥–∞—Ä–æ–∫</option><option value="secret_box">–°–µ–∫—Ä–µ—Ç–Ω—ã–π –±–æ–∫—Å</option><option value="empty">–ü—É—Å—Ç–æ</option><option value="sponsor_gift">–ü–æ–¥–∞—Ä–æ–∫ –æ—Ç —Å–ø–æ–Ω—Å–æ—Ä–∞</option>',6)])],512),[[F,o.form.type]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"text-sm font-medium mb-1 block"},"–ó–Ω–∞—á–µ–Ω–∏–µ",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.value=s),type:"number",min:"0",placeholder:"300",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,512),[[k,o.form.value,void 0,{number:!0}]]),t[25]||(t[25]=e("p",{class:"text-xs text-muted-foreground mt-1"},"–°—É–º–º–∞ –¥–µ–Ω–µ–≥, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤ –∏ —Ç.–¥.",-1))]),e("div",null,[t[26]||(t[26]=e("label",{class:"text-sm font-medium mb-1 block"},"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",-1)),u(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.message=s),rows:"3",placeholder:"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏...",class:"w-full px-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,512),[[k,o.form.message]]),t[27]||(t[27]=e("p",{class:"text-xs text-muted-foreground mt-1"},"–°–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ –≤—ã–∏–≥—Ä—ã—à–∞",-1))]),e("div",null,[t[29]||(t[29]=e("label",{class:"text-sm font-medium mb-1 block"},"–î–µ–π—Å—Ç–≤–∏–µ",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.form.action=s),class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},[...t[28]||(t[28]=[e("option",{value:"none"},"–ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è",-1),e("option",{value:"add_ticket"},"–î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç",-1)])],512),[[F,o.form.action]]),t[30]||(t[30]=e("p",{class:"text-xs text-muted-foreground mt-1"},"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞)",-1))]),e("div",null,[t[31]||(t[31]=e("label",{class:"text-sm font-medium mb-1 block"},"URL –∏–∫–æ–Ω–∫–∏",-1)),e("div",Me,[u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.form.icon_url=s),type:"text",placeholder:"https://...",class:"flex-1 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,512),[[k,o.form.icon_url]]),e("button",{onClick:t[7]||(t[7]=(...s)=>o.openMediaSelector&&o.openMediaSelector(...s)),type:"button",class:"h-10 px-4 bg-accent/10 text-accent border border-accent/40 hover:bg-accent/20 rounded-lg inline-flex items-center justify-center gap-2 transition-colors",title:"–í—ã–±—Ä–∞—Ç—å –∏–∑ –º–µ–¥–∏–∞—Ç–µ–∫–∏"}," üìÅ ")]),o.form.icon_url?(r(),n("div",_e,[e("img",{src:o.form.icon_url,alt:"–ò–∫–æ–Ω–∫–∞",class:"w-16 h-16 object-contain rounded",onError:t[8]||(t[8]=(...s)=>o.handleImageError&&o.handleImageError(...s))},null,40,Ce)])):c("",!0)]),e("div",je,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.form.is_active=s),type:"checkbox",id:"is_active",class:"w-4 h-4"},null,512),[[G,o.form.is_active]]),t[32]||(t[32]=e("label",{for:"is_active",class:"text-sm font-medium cursor-pointer"},"–ê–∫—Ç–∏–≤–µ–Ω",-1))]),e("div",Fe,[e("button",{type:"button",onClick:t[10]||(t[10]=(...s)=>o.closeModal&&o.closeModal(...s)),class:"px-4 py-2 text-sm border border-border rounded-lg hover:bg-muted transition-colors"}," –û—Ç–º–µ–Ω–∞ "),e("button",{type:"submit",disabled:o.saving,class:"px-4 py-2 text-sm bg-accent text-white rounded-lg hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},i(o.saving?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),9,Pe)])],32)])])):c("",!0),o.showMediaModal?(r(),n("div",{key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:t[15]||(t[15]=w((...s)=>o.closeMediaModal&&o.closeMediaModal(...s),["self"]))},[e("div",{class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col",onClick:t[14]||(t[14]=w(()=>{},["stop"]))},[e("div",Se,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold"},"–í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É",-1)),e("button",{onClick:t[13]||(t[13]=(...s)=>o.closeMediaModal&&o.closeMediaModal(...s)),class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-colors"}," ‚úï ")]),e("div",Ve,[R(g,{selectionMode:!0,countFile:1,selectedFiles:m.selectedMediaFile?[m.selectedMediaFile]:[],onFileSelected:o.handleMediaFileSelected},null,8,["selectedFiles","onFileSelected"])])])])):c("",!0)])}const De=N(Z,[["render",Ee]]);export{De as default};
