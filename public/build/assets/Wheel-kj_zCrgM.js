import{_ as ee,c as d,a as t,b as p,p as te,e as z,t as f,d as i,D as k,v as g,F as D,q as L,w as R,f as se,r as a,m as W,k as oe,h as ne,o as u,C as re,E as le}from"./admin-BJZEhXMZ.js";import{a as q,c as G}from"./api-DccBIR6h.js";import{S as h}from"./sweetalert2.esm.all-C0u8rGqG.js";import ae from"./Media-E9_NVEyB.js";const ie={name:"Wheel",components:{Media:ae},setup(){const m=a(!1),e=a(!1),S=a(!1),s=a(null),x=a([]),y=a([]),w=a(!1),o=a(3),l=a(""),C=a(1),V=a(!0),j=a(24),U=a(!0),T=a(!0),E=a("ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ!"),F=a(24),A=a(!1),_=a(null),M=a(null),H=W(()=>x.value.reduce((n,r)=>n+(parseFloat(r.probability_percent)||0),0)),B=W(()=>Math.abs(H.value-100)<.01),J=async()=>{try{const n=await q("/wow/prize-types");if(n.ok){const r=await n.json();y.value=r.data||[]}}catch(n){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ‚Ð¸Ð¿Ð¾Ð² Ð¿Ñ€Ð¸Ð·Ð¾Ð²:",n)}},I=async()=>{m.value=!0,s.value=null;try{const n=await q("/wow/wheel");if(!n.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²");const r=await n.json();x.value=(r.data||[]).map(c=>({...c,probability_percent:parseFloat(c.probability_percent)||0,prize_value:c.prize_value||0,prize_type_id:c.prize_type_id||null})),r.settings&&(w.value=r.settings.always_empty_mode||!1,o.value=r.settings.ticket_restore_hours||3,l.value=r.settings.admin_username||"",C.value=r.settings.initial_tickets_count||1,V.value=r.settings.ticket_accrual_enabled??!0,j.value=r.settings.ticket_accrual_interval_hours??24,U.value=r.settings.ticket_accrual_notifications_enabled??!0,T.value=r.settings.broadcast_enabled??!0,E.value=r.settings.broadcast_message_text??"ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ!",F.value=r.settings.broadcast_interval_hours??24)}catch(n){s.value=n.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²"}finally{m.value=!1}},P=n=>({money:"Ð”ÐµÐ½ÑŒÐ³Ð¸",ticket:"Ð‘Ð¸Ð»ÐµÑ‚",gift:"ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº",secret_box:"Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð±Ð¾ÐºÑ",empty:"ÐŸÑƒÑÑ‚Ð¾",sponsor_gift:"ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ðº Ð¾Ñ‚ ÑÐ¿Ð¾Ð½ÑÐ¾Ñ€Ð°"})[n]||n,K=n=>{const r=y.value.find(b=>b.id===n);if(!r)return"";let c=`Ð¢Ð¸Ð¿: ${P(r.type)}`;return r.value&&(c+=`, Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: ${r.value}`),r.action!=="none"&&(c+=`, Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ: ${r.action==="add_ticket"?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚":r.action}`),c},O=n=>{const r=y.value.find(c=>c.id===n.prize_type_id);r&&(n.prize_type=r.type,n.prize_value=r.value||0,n.icon_url=r.icon_url||n.icon_url)},Q=async()=>{if(!B.value){await h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:"Ð¡ÑƒÐ¼Ð¼Ð° Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°Ð²Ð½Ð° 100%",icon:"error",confirmButtonText:"ÐžÐš"});return}e.value=!0,s.value=null;try{const n=x.value.map(b=>{let v=b.prize_type;return v&&typeof v=="object"&&(v=v.type||v.prize_type||null),{id:b.id,prize_type:v||"empty",prize_value:b.prize_value||0,icon_url:b.icon_url||null,probability_percent:parseFloat(b.probability_percent)||0,is_active:b.is_active!==!1,prize_type_id:b.prize_type_id||null}}),r=await G("/wow/wheel/bulk-update",{sectors:n});if(!r.ok){const b=await r.json();throw new Error(b.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²")}const c=await r.json();await h.fire({title:"Ð¡ÐµÐºÑ‚Ð¾Ñ€Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),await I()}catch(n){s.value=n.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²",await h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:n.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²",icon:"error",confirmButtonText:"ÐžÐš"})}finally{e.value=!1}},X=n=>{n.target.style.display="none"},Y=n=>{_.value=n,M.value=null,A.value=!0},N=()=>{A.value=!1,_.value=null,M.value=null},Z=n=>{if(_.value&&n){const r=n.url||(n.metadata?.path?"/"+n.metadata.path:"");_.value.icon_url=r||"",M.value=n,setTimeout(()=>{N()},300)}},$=async()=>{S.value=!0;try{const n=await G("/wow/wheel/settings",{always_empty_mode:w.value,ticket_restore_hours:o.value,admin_username:l.value,initial_tickets_count:C.value,ticket_accrual_enabled:V.value,ticket_accrual_interval_hours:j.value,ticket_accrual_notifications_enabled:U.value,broadcast_enabled:T.value,broadcast_message_text:E.value,broadcast_interval_hours:F.value});if(!n.ok){const r=await n.json();throw new Error(r.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº")}await h.fire({title:"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹",icon:"success",timer:1500,showConfirmButton:!1,toast:!0,position:"top-end"})}catch(n){await h.fire({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",text:n.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº",icon:"error",confirmButtonText:"ÐžÐš"}),await I()}finally{S.value=!1}};return oe(async()=>{await J(),await I()}),{loading:m,saving:e,savingSettings:S,error:s,sectors:x,alwaysEmptyMode:w,ticketRestoreHours:o,adminUsername:l,initialTicketsCount:C,ticketAccrualEnabled:V,ticketAccrualIntervalHours:j,ticketAccrualNotificationsEnabled:U,broadcastEnabled:T,broadcastMessageText:E,broadcastIntervalHours:F,totalProbability:H,probabilityValid:B,saveAllSectors:Q,saveSettings:$,handleImageError:X,showMediaModal:A,currentSector:_,selectedMediaFile:M,openMediaSelector:Y,closeMediaModal:N,handleMediaFileSelected:Z,prizeTypes:y,getTypeLabel:P,getSelectedPrizeTypeInfo:K,onPrizeTypeChange:O}}},de={class:"wheel-page space-y-6"},ue={class:"flex items-center justify-between"},ce={class:"flex items-center gap-4"},be={key:0,class:"ml-2"},fe=["disabled"],me={key:0,class:"bg-card rounded-lg border border-border p-6 space-y-6"},pe={class:"flex items-center justify-between"},ge={class:"relative inline-flex items-center cursor-pointer"},ve={class:"flex items-center justify-between"},xe={class:"flex items-center gap-3"},ye={class:"flex items-center justify-between"},we={class:"flex items-center gap-3"},_e={class:"flex items-center justify-between"},ke={class:"flex items-center gap-3"},he={class:"flex items-center justify-between"},Se={class:"relative inline-flex items-center cursor-pointer"},Me={class:"flex items-center justify-between"},ze={class:"flex items-center gap-3"},Ce={class:"flex items-center justify-between"},Ve={class:"relative inline-flex items-center cursor-pointer"},je={class:"flex items-center justify-between"},Ue={class:"relative inline-flex items-center cursor-pointer"},Te={class:"flex items-center justify-between"},Ee={class:"flex-1"},Fe={class:"text-sm text-muted-foreground"},Ae={class:"flex items-center gap-3"},Ie={class:"space-y-2"},He={class:"text-sm text-muted-foreground mb-2"},Be={class:"bg-muted px-1 rounded"},Pe={class:"bg-muted px-1 rounded"},Ne={key:1,class:"flex items-center justify-center py-12"},De={key:2,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},Le={class:"text-destructive"},Re={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},We={class:"flex items-center justify-between"},qe={class:"text-lg font-semibold"},Ge={class:"flex items-center gap-2 cursor-pointer"},Je=["onUpdate:modelValue"],Ke=["onUpdate:modelValue","onChange"],Oe=["value"],Qe={key:0,class:"text-xs text-muted-foreground mt-1"},Xe=["onUpdate:modelValue"],Ye={class:"mt-1 h-2 bg-muted rounded-full overflow-hidden"},Ze={class:"flex gap-2"},$e=["onUpdate:modelValue"],et=["onClick"],tt={key:0,class:"mt-2"},st=["src","alt"],ot={class:"flex items-center justify-between p-4 border-b border-border"},nt={class:"flex-1 overflow-y-auto min-h-0"};function rt(m,e,S,s,x,y){const w=ne("Media");return u(),d("div",de,[t("div",ue,[e[25]||(e[25]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸"),t("p",{class:"text-muted-foreground mt-1"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð² Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸ Ð¸ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð²Ñ‹Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ")],-1)),t("div",ce,[t("div",{class:te(["px-4 py-2 rounded-lg text-sm font-medium",s.probabilityValid?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"])},[z(" Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ: "+f(s.totalProbability.toFixed(2))+"% ",1),s.probabilityValid?p("",!0):(u(),d("span",be,"(Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ 100%)"))],2),t("button",{onClick:e[0]||(e[0]=(...o)=>s.saveAllSectors&&s.saveAllSectors(...o)),disabled:!s.probabilityValid||s.saving,class:"h-11 px-6 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-2xl shadow-lg shadow-accent/10 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[t("span",null,f(s.saving?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð²ÑÐµ"),1)],8,fe)])]),s.loading?p("",!0):(u(),d("div",me,[e[46]||(e[46]=t("h2",{class:"text-xl font-semibold mb-4"},"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ€ÑƒÐ»ÐµÑ‚ÐºÐ¸",-1)),t("div",pe,[e[27]||(e[27]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},'Ð ÐµÐ¶Ð¸Ð¼ "Ð’ÑÐµÐ³Ð´Ð° Ð¿ÑƒÑÑ‚Ð¾"'),t("p",{class:"text-sm text-muted-foreground"}," ÐŸÑ€Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ ÐºÐ¾Ð»ÐµÑÐ¾ Ð²ÑÐµÐ³Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ð¿ÑƒÑÑ‚Ð¾Ð¼ ÑÐµÐºÑ‚Ð¾Ñ€Ðµ ")],-1)),t("label",ge,[i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.alwaysEmptyMode=o),onChange:e[2]||(e[2]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[k,s.alwaysEmptyMode]]),e[26]||(e[26]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),t("div",ve,[e[29]||(e[29]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"ÐŸÐµÑ€Ð¸Ð¾Ð´ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð±Ð¸Ð»ÐµÑ‚Ð°"),t("p",{class:"text-sm text-muted-foreground"}," Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð±Ð¸Ð»ÐµÑ‚ (Ð¾Ñ‚ 1 Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð²) ")],-1)),t("div",xe,[i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.ticketRestoreHours=o),onChange:e[4]||(e[4]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"number",min:"1",max:"24",step:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,s.ticketRestoreHours,void 0,{number:!0}]]),e[28]||(e[28]=t("span",{class:"text-sm text-muted-foreground"},"Ñ‡Ð°ÑÐ¾Ð²",-1))])]),t("div",ye,[e[30]||(e[30]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"Username Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"),t("p",{class:"text-sm text-muted-foreground"}," Telegram username Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÑÑ‹Ð»Ð¾Ðº (Ð±ÐµÐ· @) ")],-1)),t("div",we,[i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.adminUsername=o),onChange:e[6]||(e[6]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"text",placeholder:"admin_username",class:"w-64 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,544),[[g,s.adminUsername]])])]),t("div",_e,[e[32]||(e[32]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ðµ Ð±Ð¸Ð»ÐµÑ‚Ñ‹"),t("p",{class:"text-sm text-muted-foreground"}," ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð²Ñ…Ð¾Ð´Ðµ (Ð¾Ñ‚ 0 Ð´Ð¾ 100). Ð•ÑÐ»Ð¸ Ð½Ðµ Ð·Ð°Ð´Ð°Ð½Ð¾ â€” Ð±ÑƒÐ´ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: 1 ")],-1)),t("div",ke,[i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.initialTicketsCount=o),onChange:e[8]||(e[8]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"number",min:"0",max:"100",step:"1",placeholder:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,s.initialTicketsCount,void 0,{number:!0}]]),e[31]||(e[31]=t("span",{class:"text-sm text-muted-foreground"},"Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²",-1))])]),e[47]||(e[47]=t("div",{class:"border-t border-border my-4"},null,-1)),e[48]||(e[48]=t("h3",{class:"text-lg font-semibold mb-4"},"ÐÐ°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²",-1)),t("div",he,[e[34]||(e[34]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},"Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²"),t("p",{class:"text-sm text-muted-foreground"}," Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð¸Ð»Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÑƒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð². ")],-1)),t("label",Se,[i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.ticketAccrualEnabled=o),onChange:e[10]||(e[10]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[k,s.ticketAccrualEnabled]]),e[33]||(e[33]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),t("div",Me,[e[36]||(e[36]=t("div",{class:"flex-1"},[t("h3",{class:"text-base font-medium mb-1"},"ÐŸÐµÑ€Ð¸Ð¾Ð´ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ"),t("p",{class:"text-sm text-muted-foreground"}," Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ð² Ñ‡Ð°ÑÐ°Ñ…, Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð°Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒÑÑ 1 Ð±Ð¸Ð»ÐµÑ‚, Ð²Ð½Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð±Ð°Ð»Ð°Ð½ÑÐ° (Ð¾Ñ‚ 1 Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð²) ")],-1)),t("div",ze,[i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.ticketAccrualIntervalHours=o),onChange:e[12]||(e[12]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"number",min:"1",max:"24",step:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,s.ticketAccrualIntervalHours,void 0,{number:!0}]]),e[35]||(e[35]=t("span",{class:"text-sm text-muted-foreground"},"Ñ‡Ð°ÑÐ¾Ð²",-1))])]),t("div",Ce,[e[38]||(e[38]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÑÑ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¾ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸"),t("p",{class:"text-sm text-muted-foreground"}," Ð•ÑÐ»Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾, Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð°. ")],-1)),t("label",Ve,[i(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>s.ticketAccrualNotificationsEnabled=o),onChange:e[14]||(e[14]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[k,s.ticketAccrualNotificationsEnabled]]),e[37]||(e[37]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),e[49]||(e[49]=t("div",{class:"border-t border-border my-4"},null,-1)),e[50]||(e[50]=t("h3",{class:"text-lg font-semibold mb-4"},"Ð Ð°ÑÑÑ‹Ð»ÐºÐ¸",-1)),t("div",je,[e[40]||(e[40]=t("div",null,[t("h3",{class:"text-base font-medium mb-1"},"Ð Ð°ÑÑÑ‹Ð»ÐºÐ° Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°"),t("p",{class:"text-sm text-muted-foreground"}," Ð¤Ð»Ð°Ð³ Ð´Ð»Ñ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ/Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ñ€Ð°ÑÑÑ‹Ð»ÐºÐ¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼. ")],-1)),t("label",Ue,[i(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s.broadcastEnabled=o),onChange:e[16]||(e[16]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"checkbox",class:"sr-only peer"},null,544),[[k,s.broadcastEnabled]]),e[39]||(e[39]=t("div",{class:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"},null,-1))])]),t("div",Te,[t("div",Ee,[e[41]||(e[41]=t("h3",{class:"text-base font-medium mb-1"},"Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð» Ñ€Ð°ÑÑÑ‹Ð»ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ (Ð² Ñ‡Ð°ÑÐ°Ñ…)",-1)),t("p",Fe," Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÐ¾Ð² Ð¿Ð¾ÑÐ»Ðµ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ (Ð¾Ñ‚ 1 Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð²). Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: "+f(m.username)+", "+f(m.tickets_count),1)]),t("div",Ae,[i(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>s.broadcastIntervalHours=o),onChange:e[18]||(e[18]=(...o)=>s.saveSettings&&s.saveSettings(...o)),type:"number",min:"1",max:"24",step:"1",class:"w-24 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent text-center"},null,544),[[g,s.broadcastIntervalHours,void 0,{number:!0}]]),e[42]||(e[42]=t("span",{class:"text-sm text-muted-foreground"},"Ñ‡Ð°ÑÐ¾Ð²",-1))])]),t("div",Ie,[t("div",null,[e[45]||(e[45]=t("h3",{class:"text-base font-medium mb-1"},"Ð¢ÐµÐºÑÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ",-1)),t("p",He,[e[43]||(e[43]=z(" Ð¢ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ: ",-1)),t("code",Be,f(m.username),1),e[44]||(e[44]=z(", ",-1)),t("code",Pe,f(m.tickets_count),1)])]),i(t("textarea",{"onUpdate:modelValue":e[19]||(e[19]=o=>s.broadcastMessageText=o),onChange:e[20]||(e[20]=(...o)=>s.saveSettings&&s.saveSettings(...o)),rows:"4",placeholder:"ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ!",class:"w-full px-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent resize-y"},null,544),[[g,s.broadcastMessageText]])])])),s.loading?(u(),d("div",Ne,[...e[51]||(e[51]=[t("p",{class:"text-muted-foreground"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²...",-1)])])):p("",!0),s.error?(u(),d("div",De,[t("p",Le,f(s.error),1)])):p("",!0),s.loading?p("",!0):(u(),d("div",Re,[(u(!0),d(D,null,L(s.sectors,o=>(u(),d("div",{key:o.id,class:"bg-card rounded-lg border border-border p-6 space-y-4"},[t("div",We,[t("h3",qe,"Ð¡ÐµÐºÑ‚Ð¾Ñ€ #"+f(o.sector_number),1),t("label",Ge,[i(t("input",{"onUpdate:modelValue":l=>o.is_active=l,type:"checkbox",class:"w-4 h-4"},null,8,Je),[[k,o.is_active]]),e[52]||(e[52]=t("span",{class:"text-sm"},"ÐÐºÑ‚Ð¸Ð²ÐµÐ½",-1))])]),t("div",null,[e[54]||(e[54]=t("label",{class:"text-sm font-medium mb-1 block"},"Ð¢Ð¸Ð¿ Ð¿Ñ€Ð¸Ð·Ð°",-1)),i(t("select",{"onUpdate:modelValue":l=>o.prize_type_id=l,onChange:l=>s.onPrizeTypeChange(o),class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},[e[53]||(e[53]=t("option",{value:null},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð¿Ñ€Ð¸Ð·Ð°",-1)),(u(!0),d(D,null,L(s.prizeTypes,l=>(u(),d("option",{key:l.id,value:l.id},f(l.name)+" ("+f(s.getTypeLabel(l.type))+") ",9,Oe))),128))],40,Ke),[[re,o.prize_type_id]]),o.prize_type_id?(u(),d("p",Qe,f(s.getSelectedPrizeTypeInfo(o.prize_type_id)),1)):p("",!0)]),t("div",null,[e[55]||(e[55]=t("label",{class:"text-sm font-medium mb-1 block"},[z(" Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ (%) "),t("span",{class:"text-xs text-muted-foreground"},"(0-100)")],-1)),i(t("input",{"onUpdate:modelValue":l=>o.probability_percent=l,type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",class:"w-full h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,Xe),[[g,o.probability_percent,void 0,{number:!0}]]),t("div",Ye,[t("div",{class:"h-full bg-accent transition-all",style:le({width:`${o.probability_percent}%`})},null,4)])]),t("div",null,[e[56]||(e[56]=t("label",{class:"text-sm font-medium mb-1 block"},"URL Ð¸ÐºÐ¾Ð½ÐºÐ¸",-1)),t("div",Ze,[i(t("input",{"onUpdate:modelValue":l=>o.icon_url=l,type:"text",placeholder:"https://...",class:"flex-1 h-10 px-4 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-accent"},null,8,$e),[[g,o.icon_url]]),t("button",{onClick:l=>s.openMediaSelector(o),type:"button",class:"h-10 px-4 bg-accent/10 text-accent border border-accent/40 hover:bg-accent/20 rounded-lg inline-flex items-center justify-center gap-2 transition-colors",title:"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð¼ÐµÐ´Ð¸Ð°Ñ‚ÐµÐºÐ¸"}," ðŸ“ ",8,et)]),o.icon_url?(u(),d("div",tt,[t("img",{src:o.icon_url,alt:`Ð¡ÐµÐºÑ‚Ð¾Ñ€ ${o.sector_number}`,class:"w-16 h-16 object-contain rounded",onError:e[21]||(e[21]=(...l)=>s.handleImageError&&s.handleImageError(...l))},null,40,st)])):p("",!0)])]))),128))])),s.showMediaModal?(u(),d("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:e[24]||(e[24]=R((...o)=>s.closeMediaModal&&s.closeMediaModal(...o),["self"]))},[t("div",{class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col",onClick:e[23]||(e[23]=R(()=>{},["stop"]))},[t("div",ot,[e[57]||(e[57]=t("h3",{class:"text-lg font-semibold"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸ÐºÐ¾Ð½ÐºÑƒ",-1)),t("button",{onClick:e[22]||(e[22]=(...o)=>s.closeMediaModal&&s.closeMediaModal(...o)),class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-muted transition-colors"}," âœ• ")]),t("div",nt,[se(w,{selectionMode:!0,countFile:1,selectedFiles:s.selectedMediaFile?[s.selectedMediaFile]:[],onFileSelected:s.handleMediaFileSelected},null,8,["selectedFiles","onFileSelected"])])])])):p("",!0)])}const ut=ee(ie,[["render",rt]]);export{ut as default};
