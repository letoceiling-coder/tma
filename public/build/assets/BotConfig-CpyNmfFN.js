import{r as c,k as B,c as d,a as o,b as p,t as v,w as U,d as g,v as m,B as f,j as i,o as b}from"./admin-Cwthrtlw.js";const V={class:"bot-config-page space-y-6"},A={key:0,class:"flex items-center justify-center py-12"},T={key:1,class:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg"},W={class:"text-destructive"},L={key:2,class:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg"},$={class:"text-green-600"},j={class:"bg-card rounded-lg border border-border p-6"},I={class:"space-y-4"},N={class:"bg-card rounded-lg border border-border p-6"},R={class:"space-y-4"},D={class:"flex gap-4"},H=["disabled"],S=["disabled"],q=["disabled"],z={class:"bg-card rounded-lg border border-border p-6"},E={class:"space-y-4"},G={class:"flex items-center gap-2"},O={key:0},F={key:1,class:"space-y-3"},J={class:"flex items-center gap-2"},K={key:0,class:"space-y-3 pl-6"},P={class:"flex gap-4"},Q=["disabled"],Z={__name:"BotConfig",setup(X){const s=c(!1),u=c(!1),a=c(null),n=c(null),l=c({bot_token:"",webhook_url:"",mini_app_url:"",welcome_message:{enabled:!0,text:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>",mini_app_button:{enabled:!0,text:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",url:""}}}),k=async()=>{s.value=!0,a.value=null;try{const e=await i.get("/api/v1/settings/bot");e.data&&(l.value={bot_token:e.data.bot_token||"",mini_app_url:e.data.mini_app_url||"",welcome_message:e.data.welcome_message||l.value.welcome_message})}catch(e){a.value=e.response?.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{s.value=!1}},_=async()=>{s.value=!0,a.value=null,n.value=null;try{const e=await i.post("/api/v1/settings/bot",l.value);n.value="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",e.data.webhook_error&&(a.value=e.data.webhook_error),l.value.bot_token&&setTimeout(()=>{y()},1e3)}catch(e){a.value=e.response?.data?.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫"}finally{s.value=!1}},x=async()=>{s.value=!0,a.value=null;try{const e=await i.post("/api/v1/settings/bot/test-connection");e.data.success?n.value="–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –ë–æ—Ç: "+e.data.bot.username:a.value=e.data.error||"–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}catch(e){a.value=e.response?.data?.error||"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}finally{s.value=!1}},w=async()=>{s.value=!0,a.value=null,n.value=null;try{const e=await i.post("/api/v1/settings/bot/set-webhook");e.data.ok?(n.value=`Webhook —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${e.data.result?.url||"URL –æ–±–Ω–æ–≤–ª–µ–Ω"}`,setTimeout(()=>{y()},1e3)):a.value=e.data.description||"–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook"}catch(e){a.value=e.response?.data?.error||e.response?.data?.message||"–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook"}finally{s.value=!1}},y=async()=>{s.value=!0,a.value=null;try{const e=await i.get("/api/v1/settings/bot/webhook-info");if(e.data.ok){const t=e.data.result;n.value=`Webhook: ${t.url||"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"}, –û–∂–∏–¥–∞—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: ${t.pending_update_count||0}`}else a.value=e.data.description||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"}catch(e){a.value=e.response?.data?.error||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ webhook"}finally{s.value=!1}},h=async()=>{u.value=!0,a.value=null,n.value=null;try{const e=await i.post("/api/v1/settings/bot/menu-button");e.data.success?n.value=e.data.message||"Menu button —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ":a.value=e.data.error||"–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ menu button"}catch(e){a.value=e.response?.data?.error||"–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ menu button"}finally{u.value=!1}},M=async()=>{u.value=!0,a.value=null,n.value=null;try{const e=await i.delete("/api/v1/settings/bot/menu-button");e.data.success?n.value=e.data.message||"Menu button —É–¥–∞–ª–µ–Ω":a.value=e.data.error||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è menu button"}catch(e){a.value=e.response?.data?.error||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è menu button"}finally{u.value=!1}},C=async()=>{u.value=!0,a.value=null,n.value=null;try{const e=await i.get("/api/v1/settings/bot/menu-button");if(e.data.ok){const t=e.data.result;n.value=`Menu Button: ${t.type||"default"}`}else a.value=e.data.description||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"}catch(e){a.value=e.response?.data?.error||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ menu button"}finally{u.value=!1}};return B(()=>{k()}),(e,t)=>(b(),d("div",V,[t[20]||(t[20]=o("div",null,[o("h1",{class:"text-3xl font-semibold text-foreground"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞"),o("p",{class:"text-muted-foreground mt-1"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Telegram –±–æ—Ç–∞ –∏ webhook")],-1)),s.value?(b(),d("div",A,[...t[7]||(t[7]=[o("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫...",-1)])])):p("",!0),a.value?(b(),d("div",T,[o("p",W,v(a.value),1)])):p("",!0),n.value?(b(),d("div",L,[o("p",$,v(n.value),1)])):p("",!0),s.value?p("",!0):(b(),d("form",{key:3,onSubmit:U(_,["prevent"]),class:"space-y-6"},[o("div",j,[t[10]||(t[10]=o("h2",{class:"text-xl font-semibold mb-4"},"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",-1)),o("div",I,[o("div",null,[t[8]||(t[8]=o("label",{class:"block text-sm font-medium mb-2"},"–¢–æ–∫–µ–Ω –±–æ—Ç–∞",-1)),g(o("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>l.value.bot_token=r),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"},null,512),[[m,l.value.bot_token]])]),o("div",null,[t[9]||(t[9]=o("label",{class:"block text-sm font-medium mb-2"},"Mini App URL",-1)),g(o("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.value.mini_app_url=r),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[m,l.value.mini_app_url]])])])]),o("div",N,[t[12]||(t[12]=o("h2",{class:"text-xl font-semibold mb-4"},"Menu Button (–ú–µ–Ω—é WebApp)",-1)),o("div",R,[t[11]||(t[11]=o("p",{class:"text-sm text-muted-foreground"}," –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –≤ WebApp (—Ç—Ä–∏ –ø–æ–ª–æ—Å–∫–∏ —Å–ª–µ–≤–∞). –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /start –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. ",-1)),o("div",D,[o("button",{type:"button",onClick:h,disabled:u.value,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},v(u.value?"–£—Å—Ç–∞–Ω–æ–≤–∫–∞...":"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –°—Ç–∞—Ä—Ç"),9,H),o("button",{type:"button",onClick:M,disabled:u.value,class:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},v(u.value?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å –∫–Ω–æ–ø–∫—É"),9,S),o("button",{type:"button",onClick:C,disabled:u.value,class:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ–Ω—é ",8,q)])])]),o("div",z,[t[18]||(t[18]=o("h2",{class:"text-xl font-semibold mb-4"},"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1)),o("div",E,[o("div",G,[g(o("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.welcome_message.enabled=r),type:"checkbox",id:"welcome_enabled",class:"w-4 h-4"},null,512),[[f,l.value.welcome_message.enabled]]),t[13]||(t[13]=o("label",{for:"welcome_enabled",class:"text-sm font-medium"},"–í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",-1))]),l.value.welcome_message.enabled?(b(),d("div",O,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (HTML)",-1)),g(o("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.value.welcome_message.text=r),rows:"5",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</b>"},null,512),[[m,l.value.welcome_message.text]])])):p("",!0),l.value.welcome_message.enabled?(b(),d("div",F,[o("div",J,[g(o("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.value.welcome_message.mini_app_button.enabled=r),type:"checkbox",id:"button_enabled",class:"w-4 h-4"},null,512),[[f,l.value.welcome_message.mini_app_button.enabled]]),t[15]||(t[15]=o("label",{for:"button_enabled",class:"text-sm font-medium"},"–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É Mini App",-1))]),l.value.welcome_message.mini_app_button.enabled?(b(),d("div",K,[o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium mb-2"},"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏",-1)),g(o("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l.value.welcome_message.mini_app_button.text=r),type:"text",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"},null,512),[[m,l.value.welcome_message.mini_app_button.text]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium mb-2"},"URL Mini App",-1)),g(o("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>l.value.welcome_message.mini_app_button.url=r),type:"url",class:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"https://example.com"},null,512),[[m,l.value.welcome_message.mini_app_button.url]])])])):p("",!0)])):p("",!0)])]),o("div",P,[t[19]||(t[19]=o("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors"}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)),o("button",{type:"button",onClick:x,class:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors"}," –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ "),o("button",{type:"button",onClick:w,disabled:s.value,class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},v(s.value?"–£—Å—Ç–∞–Ω–æ–≤–∫–∞...":"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook"),9,Q),o("button",{type:"button",onClick:y,class:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors"}," –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ webhook ")])],32))]))}};export{Z as default};
